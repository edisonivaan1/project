import{r as l,a as Ds,b as W}from"./vendor-BWKaKzkG.js";import{u as Be,a as de,L as ue,b as bt,c as Bt,N as Rt,B as zs,R as Bs,d as le}from"./router-wu2zoqyw.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function o(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=o(i);fetch(i.href,a)}})();var Ft={exports:{}},st={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rs=l,Fs=Symbol.for("react.element"),Us=Symbol.for("react.fragment"),Hs=Object.prototype.hasOwnProperty,Ws=Rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qs={key:!0,ref:!0,__self:!0,__source:!0};function Ut(t,s,o){var r,i={},a=null,n=null;o!==void 0&&(a=""+o),s.key!==void 0&&(a=""+s.key),s.ref!==void 0&&(n=s.ref);for(r in s)Hs.call(s,r)&&!Qs.hasOwnProperty(r)&&(i[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Fs,type:t,key:a,ref:n,props:i,_owner:Ws.current}}st.Fragment=Us;st.jsx=Ut;st.jsxs=Ut;Ft.exports=st;var e=Ft.exports,Ht,At=Ds;Ht=At.createRoot,At.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vs={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),B=(t,s)=>{const o=l.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:d="",children:c,...b},m)=>l.createElement("svg",{ref:m,...Vs,width:i,height:i,stroke:r,strokeWidth:n?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Gs(t)}`,d].join(" "),...b},[...s.map(([w,y])=>l.createElement(w,y)),...Array.isArray(c)?c:[c]]));return o.displayName=`${t}`,o};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=B("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=B("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=B("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=B("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=B("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=B("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=B("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=B("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=B("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=B("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=B("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=B("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=B("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=B("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=B("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=B("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=B("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=B("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=B("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=B("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=B("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=B("Rewind",[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=B("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=B("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=B("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=B("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=B("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=B("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=B("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=B("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ze="/assets/logo_GrammarMasterPro-BnAn_47b.png",po=()=>window.location.hostname.includes("vercel.app")?"/api":window.location.hostname==="edisonivaan1.github.io"?"https://project-production-11fe.up.railway.app/api":"http://localhost:5000/api",xo=po(),R=async(t,s={})=>{try{const o=localStorage.getItem("authToken"),r={"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`},...s.headers},i=await fetch(`${xo}${t}`,{...s,headers:r}),a=await i.json();if(!i.ok)throw i.status===401&&localStorage.removeItem("authToken"),{status:i.status,message:a.message||"Error en la peticiÃ³n",errors:a.errors||[]};return a}catch(o){throw o.status?o:{status:500,message:"Connection error. Verify that the server is running.",errors:[]}}},be={register:async t=>R("/auth/register",{method:"POST",body:JSON.stringify(t)}),login:async t=>R("/auth/login",{method:"POST",body:JSON.stringify(t)}),forgotPassword:async t=>R("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:t})}),verifySecurityAnswer:async t=>R("/auth/verify-security-answer",{method:"POST",body:JSON.stringify(t)}),resetPassword:async t=>R("/auth/reset-password",{method:"POST",body:JSON.stringify(t)}),getCurrentUser:async()=>{const t=localStorage.getItem("authToken");return R("/auth/me",{headers:{Authorization:`Bearer ${t}`}})},updateProfileImage:async t=>R("/auth/profile-image",{method:"PUT",body:JSON.stringify({profileImage:t})}),deleteProfileImage:async()=>R("/auth/profile-image",{method:"DELETE"})},Ee={getProgress:async()=>{const t=localStorage.getItem("authToken");if(!t)throw new Error("No authentication token found");try{const s=await R("/progress",{headers:{Authorization:`Bearer ${t}`}});return console.log("Progress API response:",s),s}catch(s){throw console.error("Error in getProgress:",s),s}},getAttempts:async t=>{const s=localStorage.getItem("authToken");if(!s)throw new Error("No authentication token found");const o=new URLSearchParams;t&&Object.entries(t).forEach(([a,n])=>{n!=null&&o.append(a,n.toString())});const r=o.toString(),i=`/progress/attempts${r?`?${r}`:""}`;try{const a=await R(i,{headers:{Authorization:`Bearer ${s}`}});return console.log("Attempts API response:",a),a}catch(a){throw console.error("Error in getAttempts:",a),a}},completeLevel:async t=>{try{if(console.log("ðŸš€ Iniciando completeLevel"),!localStorage.getItem("authToken"))throw console.error("âŒ No se encontrÃ³ token de autenticaciÃ³n"),new Error("No authentication token found");console.log("ðŸ”‘ Token encontrado"),console.log("ðŸ“¦ Datos recibidos:",t);const o={topicId:t.topicId.replace("_","-"),difficulty:t.difficulty,correct:t.correct,total:t.total,timeSpent:t.timeSpent||0,hintsUsed:t.hintsUsed||0,questionsDetails:t.questionsDetails?.map(r=>({...r,timeSpent:r.timeSpent||0,hintsUsed:r.hintsUsed||0}))||[]};console.log("ðŸ“ Datos formateados:",o);try{const r=await R("/progress/complete-level",{method:"POST",body:JSON.stringify(o)});return console.log("âœ… Respuesta del servidor:",r),r}catch(r){throw console.error("âŒ Error en la peticiÃ³n:",r),r.status===401&&console.error("âŒ Error de autenticaciÃ³n - Token invÃ¡lido o expirado"),r}}catch(s){throw console.error("âŒ Error en completeLevel:",s),s}},getLevelProgress:async(t,s)=>{const o=localStorage.getItem("authToken");return R(`/progress/level/${t}/${s}`,{headers:{Authorization:`Bearer ${o}`}})},getUnlockedDifficulties:async()=>{const t=localStorage.getItem("authToken");return R("/progress/unlocked-difficulties",{headers:{Authorization:`Bearer ${t}`}})},getStats:async()=>{const t=localStorage.getItem("authToken");return R("/progress/stats",{headers:{Authorization:`Bearer ${t}`}})}},Ye={getAllAchievements:async()=>{const t=localStorage.getItem("authToken");return R("/achievements",{headers:{Authorization:`Bearer ${t}`}})},getUserAchievements:async(t=!0)=>{const s=localStorage.getItem("authToken");return R(`/achievements/user?includeAll=${t}`,{headers:{Authorization:`Bearer ${s}`}})},getUserAchievementStats:async()=>{const t=localStorage.getItem("authToken");return R("/achievements/user/stats",{headers:{Authorization:`Bearer ${t}`}})},getUnnotifiedAchievements:async()=>{const t=localStorage.getItem("authToken");return R("/achievements/user/unnotified",{headers:{Authorization:`Bearer ${t}`}})},checkAchievements:async t=>{const s=localStorage.getItem("authToken");return R("/achievements/check",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({context:t})})},markAsNotified:async t=>{const s=localStorage.getItem("authToken");return R("/achievements/mark-notified",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({achievementIds:t})})},getLeaderboard:async(t=10)=>{const s=localStorage.getItem("authToken");return R(`/achievements/leaderboard?limit=${t}`,{headers:{Authorization:`Bearer ${s}`}})},getAchievementsByCategory:async t=>{const s=localStorage.getItem("authToken");return R(`/achievements/category/${t}`,{headers:{Authorization:`Bearer ${s}`}})},initializeAchievements:async()=>{const t=localStorage.getItem("authToken");return R("/achievements/initialize",{method:"POST",headers:{Authorization:`Bearer ${t}`}})},resetUserAchievements:async()=>{const t=localStorage.getItem("authToken");return R("/achievements/reset-user",{method:"POST",headers:{Authorization:`Bearer ${t}`}})}},Oe=t=>{switch(t.status){case 400:return t.message.includes("already exists")?"This email is already registered":t.errors&&Array.isArray(t.errors)&&t.errors.length>0?t.errors[0].msg||t.errors[0]:t.message||"Data validation error";case 401:return"Incorrect credentials. Verify your email and password.";case 404:return"No account was found with this email address.";case 500:return t.message||"Server error. Please try again later.";default:return t.message||"Unexpected error. Please try again."}},Ne={getInProgressAttempt:async(t,s)=>{const o=localStorage.getItem("authToken");return R(`/progress/in-progress/${t}/${s}`,{headers:{Authorization:`Bearer ${o}`}})},saveInProgressAttempt:async t=>{const s=localStorage.getItem("authToken");return R("/progress/in-progress",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(t)})},deleteInProgressAttempt:async(t,s)=>{const o=localStorage.getItem("authToken");return R(`/progress/in-progress/${t}/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}})},saveAnswer:async(t,s,o)=>{const r=localStorage.getItem("authToken");return R(`/progress/in-progress/${t}/${s}/answer`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(o)})}},bo={submitMessage:async t=>R("/support/message",{method:"POST",body:JSON.stringify(t)}),getMessages:async t=>{const s=t?`?${new URLSearchParams(t).toString()}`:"";return R(`/support/messages${s}`)},updateMessageStatus:async(t,s,o)=>R(`/support/messages/${t}/status`,{method:"PUT",body:JSON.stringify({status:s,adminNotes:o})}),getStats:async()=>R("/support/stats")},Xt=l.createContext(void 0),yo=({children:t})=>{const[s,o]=l.useState(null),[r,i]=l.useState(null),[a,n]=l.useState(!0);l.useEffect(()=>{(async()=>{const C=localStorage.getItem("authToken");if(C)try{i(C);const _=await be.getCurrentUser();_.success&&_.user?o(_.user):(localStorage.removeItem("authToken"),i(null))}catch(_){console.error("Error verifying token:",_),localStorage.removeItem("authToken"),i(null)}n(!1)})()},[]);const y={user:s,token:r,isLoading:a,isAuthenticated:!!s&&!!r,login:async(j,C)=>{try{n(!0);const _=await be.login({email:j,password:C});return _.success&&_.token&&_.user?(i(_.token),o(_.user),localStorage.setItem("authToken",_.token),{success:!0}):{success:!1,message:_.message||"Error de login"}}catch(_){return{success:!1,message:Oe(_)}}finally{n(!1)}},register:async j=>{try{n(!0);const C=await be.register(j);return C.success?{success:!0}:{success:!1,message:C.message||"Error de registro"}}catch(C){return{success:!1,message:Oe(C)}}finally{n(!1)}},logout:()=>{o(null),i(null),localStorage.removeItem("authToken"),localStorage.removeItem("topicProgress"),localStorage.removeItem("lastQuestions"),localStorage.removeItem("highestScores")},refreshUser:async()=>{if(r)try{const j=await be.getCurrentUser();j.success&&j.user&&o(j.user)}catch(j){console.error("Error refreshing user:",j)}}};return e.jsx(Xt.Provider,{value:y,children:t})},fe=()=>{const t=l.useContext(Xt);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},vo=()=>{const t=Be(),s=de(),{user:o,logout:r,isAuthenticated:i}=fe(),a=t.pathname==="/",n=t.pathname==="/login"||t.pathname==="/signup",d=w=>t.pathname===w,c=()=>{r(),s("/")},b=e.jsx("button",{onClick:()=>s("/login"),className:"px-6 py-2 border border-blue-600 text-blue-600 rounded-full hover:bg-blue-50 transition-colors font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Go to login page",children:"LOGIN"}),m=i&&o?e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(ue,{to:"/profile",className:"flex items-center space-x-2 text-gray-700 hover:text-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg px-2 py-1","aria-label":`Go to ${o.first_name} ${o.last_name}'s profile`,children:[e.jsx(mo,{className:"h-5 w-5","aria-hidden":"true"}),e.jsxs("span",{className:"font-medium",children:[o.first_name," ",o.last_name]})]}),e.jsxs("button",{onClick:c,className:"flex items-center space-x-1 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",title:"Logout","aria-label":"Logout from your account",children:[e.jsx(oo,{className:"h-5 w-5","aria-hidden":"true"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]}):null;return(a||n)&&!i?e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ue,{to:"/",className:"flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg",children:e.jsx("img",{src:Ze,alt:"Grammar Master Pro - Learn English Grammar",className:"h-16 w-auto"})}),!n&&b]})})}):e.jsx("header",{className:"bg-white shadow-sm",role:"banner",children:e.jsx("div",{className:"container-custom py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsx(ue,{to:"/",className:"flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg","aria-label":"Grammar Master Pro - Ir a pÃ¡gina de inicio",children:e.jsx("img",{src:Ze,alt:"Grammar Master Pro - Logotipo de la aplicaciÃ³n para aprender gramÃ¡tica inglesa",className:"h-32 w-auto",tabIndex:0,role:"img"})}),e.jsxs("nav",{id:"navigation",className:"hidden md:flex items-center space-x-8",role:"navigation","aria-label":"NavegaciÃ³n principal de la aplicaciÃ³n",children:[e.jsxs(ue,{to:"/topics",className:`flex items-center space-x-2 font-medium text-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg px-2 py-1 ${d("/topics")?"text-[rgb(var(--color-button))]":"text-gray-700 hover:text-blue-600"}`,"aria-label":"Explorar temas de gramÃ¡tica inglesa","aria-current":d("/topics")?"page":void 0,children:[e.jsx(yt,{className:`h-6 w-6 ${d("/topics")?"text-[rgb(var(--color-button))]":""}`,"aria-hidden":"true"}),e.jsx("span",{children:"Topics"})]}),e.jsxs(ue,{to:"/settings",className:`flex items-center space-x-2 font-medium text-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg px-2 py-1 ${d("/settings")?"text-[rgb(var(--color-button))]":"text-gray-700 hover:text-blue-600"}`,"aria-label":"ConfiguraciÃ³n de la aplicaciÃ³n","aria-current":d("/settings")?"page":void 0,children:[e.jsx(go,{className:`h-6 w-6 ${d("/settings")?"text-[rgb(var(--color-button))]":""}`,"aria-hidden":"true"}),e.jsx("span",{children:"Configuration"})]}),e.jsxs(ue,{to:"/help",className:`flex items-center space-x-2 font-medium text-lg transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg px-2 py-1 ${d("/help")?"text-[rgb(var(--color-button))]":"text-gray-700 hover:text-blue-600"}`,"aria-label":"Obtener ayuda y soporte tÃ©cnico","aria-current":d("/help")?"page":void 0,children:[e.jsx(so,{className:`h-6 w-6 ${d("/help")?"text-[rgb(var(--color-button))]":""}`,"aria-hidden":"true"}),e.jsx("span",{children:"Help"})]})]})]}),e.jsx("div",{className:"hidden md:block",children:m}),e.jsxs("div",{className:"flex md:hidden items-center space-x-2",children:[m,e.jsx("button",{className:"text-text hover:text-primary transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg p-2","aria-label":"Abrir menÃº de navegaciÃ³n mÃ³vil","aria-expanded":"false","aria-controls":"mobile-navigation",tabIndex:0,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"w-6 h-6","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]})})})},wo=()=>Be().pathname.includes("/game/")?null:e.jsxs("footer",{className:"bg-[#D9D9D91A] text-black py-12",role:"contentinfo",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left",children:[e.jsxs("div",{className:"mx-auto md:mx-0",children:[e.jsx("h4",{className:"text-lg font-semibold mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2",tabIndex:0,role:"heading","aria-level":4,children:"GRAMMAR MASTER PRO"}),e.jsx("p",{className:"text-black/80 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2",tabIndex:0,role:"text","aria-label":"DescripciÃ³n de la aplicaciÃ³n: Master English grammar through interactive exercises and real-time feedback",children:"Master English grammar through interactive exercises and real-time feedback."})]}),e.jsxs("div",{className:"mx-auto md:mx-0",children:[e.jsx("h5",{className:"text-sm font-semibold uppercase tracking-wider mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2",tabIndex:0,role:"heading","aria-level":5,children:"Platform"}),e.jsx("nav",{role:"navigation","aria-label":"Enlaces de la plataforma",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-black/80 hover:text-black focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2 py-1 transition-colors",tabIndex:0,"aria-label":"Acerca de Grammar Master Pro",children:"About"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-black/80 hover:text-black focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2 py-1 transition-colors",tabIndex:0,"aria-label":"CaracterÃ­sticas de la plataforma",children:"Features"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-black/80 hover:text-black focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2 py-1 transition-colors",tabIndex:0,"aria-label":"Precios y planes de suscripciÃ³n",children:"Pricing"})})]})})]}),e.jsxs("div",{className:"mx-auto md:mx-0",children:[e.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wider mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2",tabIndex:0,role:"heading","aria-level":2,children:"Contact US"}),e.jsx("nav",{role:"navigation","aria-label":"Redes sociales y contacto",children:e.jsxs("div",{className:"flex space-x-4 justify-center md:justify-start",children:[e.jsxs("a",{href:"#",className:"text-black/80 hover:text-black focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg p-1 transition-colors",tabIndex:0,"aria-label":"Visitar nuestra pÃ¡gina de Facebook",children:[e.jsx("span",{className:"sr-only",children:"Facebook"}),e.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})]}),e.jsxs("a",{href:"#",className:"text-black/80 hover:text-black focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg p-1 transition-colors",tabIndex:0,"aria-label":"Seguirnos en Twitter",children:[e.jsx("span",{className:"sr-only",children:"Twitter"}),e.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})]}),e.jsxs("a",{href:"#",className:"text-black/80 hover:text-black focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg p-1 transition-colors",tabIndex:0,"aria-label":"Seguirnos en Instagram",children:[e.jsx("span",{className:"sr-only",children:"Instagram"}),e.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z",clipRule:"evenodd"})})]})]})})]})]})}),e.jsx("div",{className:"bg-[#007AA26B] py-4 mt-8",children:e.jsx("p",{className:"text-black text-center text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2",tabIndex:0,role:"contentinfo","aria-label":"InformaciÃ³n de copyright: Â© 2025 Grammar Master Pro. All rights reserved.",children:"Â© 2025 Grammar Master Pro. All rights reserved."})})]}),_o=({isVisible:t=!1,onClose:s})=>{const[o,r]=l.useState(t);l.useEffect(()=>{r(t)},[t]);const i=()=>{r(!1),localStorage.setItem("keyboardHelpSeen","true"),s?.()};return l.useEffect(()=>{const a=n=>{n.key==="F1"&&(n.preventDefault(),r(!0)),n.key==="Escape"&&o&&i()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[o]),o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"keyboard-help-title","aria-describedby":"keyboard-help-description",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{className:"h-6 w-6 text-blue-600","aria-hidden":"true"}),e.jsx("h2",{id:"keyboard-help-title",className:"text-xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":2,children:"Ayuda de NavegaciÃ³n por Teclado"})]}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded-lg p-1","aria-label":"Cerrar ayuda",children:e.jsx(Jt,{className:"h-6 w-6","aria-hidden":"true"})})]}),e.jsxs("div",{id:"keyboard-help-description",className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Vt,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0","aria-hidden":"true"}),e.jsx("p",{className:"text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Esta aplicaciÃ³n es completamente accesible por teclado. Todos los elementos pueden ser navegados sin usar el mouse."})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"NavegaciÃ³n General"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Next element:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Tab"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Previous element:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Shift + Tab"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Activate element:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Enter / Space"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Skip to content:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Skip links"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"NavegaciÃ³n Avanzada"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Arriba/Abajo:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"â†‘ / â†“"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Izquierda/Derecha:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"â† / â†’"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ir al inicio:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Home"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Ir al final:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"End"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"NavegaciÃ³n RÃ¡pida"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"PÃ¡gina anterior:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Page Up"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"PÃ¡gina siguiente:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Page Down"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Esta ayuda:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"F1"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Cerrar modal:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Esc"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Elementos EspecÃ­ficos"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Botones:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Enter / Space"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Enlaces:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Enter"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Campos de texto:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Focus + Type"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Checkboxes:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"Space"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Funciones de Accesibilidad"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Lector de Pantalla"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[e.jsx("li",{children:"Todas las imÃ¡genes tienen texto alternativo"}),e.jsx("li",{children:"Botones tienen etiquetas descriptivas"}),e.jsx("li",{children:"Encabezados organizados jerÃ¡rquicamente"}),e.jsx("li",{children:"Estados de elementos anunciados"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Indicadores Visuales"}),e.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[e.jsx("li",{children:"Anillos de foco visibles en todos los elementos"}),e.jsx("li",{children:"Estados hover y focus diferenciados"}),e.jsx("li",{children:"Soporte para alto contraste"}),e.jsx("li",{children:"Respeta preferencias de movimiento reducido"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Presiona ",e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:"F1"})," en cualquier momento para ver esta ayuda"]}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300",children:"Entendido"})]})]})]})})}):e.jsx("button",{onClick:()=>r(!0),className:"fixed bottom-4 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300 z-40","aria-label":"Mostrar ayuda de navegaciÃ³n por teclado (F1)",title:"Presiona F1 para ayuda de navegaciÃ³n",children:e.jsx(Et,{className:"h-6 w-6","aria-hidden":"true"})})},jo=(t={})=>{const{enableArrowKeys:s=!0,enableHomeEnd:o=!0,enablePageUpDown:r=!0,onNavigate:i}=t;return l.useEffect(()=>{const c=m=>{const w=document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"], [role="text"], [role="img"], [role="heading"], h1, h2, h3, h4, h5, h6'),y=Array.from(w).filter(C=>!C.hasAttribute("disabled")&&C.offsetParent!==null),j=y.indexOf(document.activeElement);switch(m.key){case"ArrowDown":case"ArrowRight":if(s){m.preventDefault();const C=(j+1)%y.length;y[C]?.focus(),i?.("next")}break;case"ArrowUp":case"ArrowLeft":if(s){m.preventDefault();const C=j<=0?y.length-1:j-1;y[C]?.focus(),i?.("previous")}break;case"Home":o&&(m.preventDefault(),y[0]?.focus(),i?.("first"));break;case"End":o&&(m.preventDefault(),y[y.length-1]?.focus(),i?.("last"));break;case"PageDown":if(r){m.preventDefault();const C=Math.min(j+10,y.length-1);y[C]?.focus(),i?.("next")}break;case"PageUp":if(r){m.preventDefault();const C=Math.max(j-10,0);y[C]?.focus(),i?.("previous")}break}};document.addEventListener("keydown",c);const b=()=>{const m=document.activeElement;if(m){const w=m.getAttribute("aria-label"),y=m.textContent?.trim(),j=m.getAttribute("role"),C=m.tagName.toLowerCase();let _="";w?_=w:y?_=`${j||C}: ${y}`:_=`${j||C} element`;const M=document.createElement("div");M.setAttribute("aria-live","polite"),M.setAttribute("aria-atomic","true"),M.className="sr-only",M.textContent=_,document.body.appendChild(M),setTimeout(()=>{document.body.removeChild(M)},1e3)}};return document.addEventListener("focusin",b),()=>{document.removeEventListener("keydown",c),document.removeEventListener("focusin",b)}},[s,o,r,i]),{focusFirst:()=>{document.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"], [role="text"], [role="img"], [role="heading"], h1')?.focus()},focusLast:()=>{const c=document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"], [role="text"], [role="img"], [role="heading"], h1, h2, h3, h4, h5, h6');c[c.length-1]?.focus()},getNavigationStats:()=>{const c=document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"], [role="text"], [role="img"], [role="heading"], h1, h2, h3, h4, h5, h6');return{totalFocusableElements:c.length,currentElementIndex:Array.from(c).indexOf(document.activeElement),hasActiveElement:document.activeElement!==document.body}}}},No=({children:t})=>{const s=Be(),{focusFirst:o}=jo({enableArrowKeys:!0,enableHomeEnd:!0,enablePageUpDown:!0,onNavigate:a=>{const n=a==="next"?"Navigating to next element":a==="previous"?"Navigating to previous element":a==="first"?"Navigating to first element":"Navigating to last element",d=document.createElement("div");d.setAttribute("aria-live","polite"),d.className="sr-only",d.textContent=n,document.body.appendChild(d),setTimeout(()=>{document.body.removeChild(d)},1e3)}}),r=["/login","/signup"].includes(s.pathname),i=["/login","/signup"].includes(s.pathname);return l.useEffect(()=>{const a=setTimeout(()=>{const n=document.querySelector(".skip-link");n?n.focus():o()},100);return()=>clearTimeout(a)},[s.pathname,o]),e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsxs("div",{className:"sr-only focus:not-sr-only focus:absolute focus:top-0 focus:left-0 focus:z-50",children:[e.jsx("a",{href:"#main-content",className:"skip-link bg-blue-600 text-white px-4 py-2 rounded-b-md focus:outline-none focus:ring-2 focus:ring-blue-300",onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),document.getElementById("main-content")?.focus())},children:"Skip to main content (Enter)"}),e.jsx("a",{href:"#navigation",className:"skip-link bg-blue-600 text-white px-4 py-2 rounded-b-md focus:outline-none focus:ring-2 focus:ring-blue-300 ml-2",onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),document.getElementById("navigation")?.focus())},children:"Skip to navigation (Enter)"})]}),!r&&e.jsx(vo,{}),e.jsx("main",{id:"main-content",className:"flex-grow focus:outline-none focus:ring-2 focus:ring-blue-300 focus:ring-inset",tabIndex:-1,role:"main","aria-label":"Main application content",children:t}),!i&&e.jsx(wo,{}),e.jsx(_o,{})]})},Q=({children:t,variant:s="primary",size:o="md",fullWidth:r=!1,icon:i,iconPosition:a="left",className:n="",...d})=>{const c="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-none",b={primary:"bg-[rgb(var(--color-button))] hover:bg-[rgb(var(--color-button))/0.8] text-white border-2 border-black focus:ring-blue-500",secondary:"bg-[rgb(var(--color-secondary-button))] hover:bg-[rgb(var(--color-secondary-button))/0.8] text-[rgb(var(--color-text-white))] border-2 border-black focus:ring-gray-500",accent:"bg-[rgb(var(--color-accent))] hover:bg-[rgb(var(--color-accent))/0.8] text-[rgb(var(--color-text))] border-2 border-black focus:ring-yellow-500",outline:"border-2 border-[rgb(var(--color-button))] text-[rgb(var(--color-button))] hover:bg-[rgb(var(--color-button))/0.1] focus:ring-blue-500",ghost:"text-[rgb(var(--color-button))] hover:bg-[rgb(var(--color-button))/0.1] focus:ring-blue-500",custom:""},m={sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"},w=r?"w-full":"";return e.jsxs("button",{className:`${c} ${b[s]} ${m[o]} ${w} ${n}`,"aria-label":d["aria-label"],tabIndex:d.disabled?-1:0,...d,children:[i&&a==="left"&&e.jsx("span",{className:"mr-2","aria-hidden":"true",children:i}),e.jsx("span",{children:t}),i&&a==="right"&&e.jsx("span",{className:"ml-2","aria-hidden":"true",children:i})]})},ko=()=>{const t=de(),{isAuthenticated:s,isLoading:o}=fe();if(l.useEffect(()=>{s&&!o&&t("/topics",{replace:!0})},[s,o,t]),o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Loading..."})]})});const r=[{icon:e.jsx(Wt,{className:"h-12 w-12 text-blue-600"}),title:"Learn Quickly",description:"Master grammar rules through engaging exercises and interactive lessons."},{icon:e.jsx(Js,{className:"h-12 w-12 text-green-600"}),title:"Real-Time Feedback",description:"Get instant feedback on your answers to improve your understanding."},{icon:e.jsx(fo,{className:"h-12 w-12 text-purple-600"}),title:"Track Your Growth",description:"Monitor your progress and see how you're improving over time."}];return e.jsx("div",{className:"py-0 mb-0",children:e.jsxs("main",{className:"flex-grow",children:[e.jsx("section",{className:"bg-[rgba(0,12,234,0.11)] pt-8 pb-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[e.jsxs("div",{className:"w-full md:w-1/2 text-center md:text-left mb-8 md:mb-0 md:pr-8",children:[e.jsxs("h1",{className:"text-5xl md:text-6xl font-extrabold text-gray-900 mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:["A Classical Education ",e.jsx("br",{})," for the ",e.jsx("span",{className:"text-blue-600",children:"Future"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-10 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":"Application description: Master English grammar through interactive exercises and real-time feedback. Perfect for B1 level students looking to improve their language skills.",children:"Master English grammar through interactive exercises and real-time feedback. Perfect for B1 level students looking to improve their language skills."}),e.jsx(Q,{onClick:()=>t("/signup"),className:"bg-blue-600 hover:bg-blue-700 text-white px-32 py-3 text-lg font-medium rounded-full flex items-center md:mx-0 w-auto focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",variant:"custom","aria-label":"Join Grammar Master Pro - Start learning English grammar",children:"JOIN"})]}),e.jsx("div",{className:"w-full md:w-1/2 flex items-start justify-center -mt-20",children:e.jsxs("div",{className:"relative w-80 h-80 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full",tabIndex:0,role:"img","aria-label":"Hero image showing students actively learning English grammar with interactive exercises",children:[e.jsx("div",{className:"absolute bg-[#083DED] opacity-25 inset-0 rounded-full"}),e.jsx("div",{className:"relative w-full h-full",children:e.jsx("img",{src:"../assets/img/homeStudents.png",alt:"Students actively learning English grammar with interactive exercises and engaging study materials",className:"w-full h-full object-cover rounded-full object-top"})})]})})]})})}),e.jsx("section",{className:"py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":2,children:"Why Choose Grammar Master Pro?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",role:"grid","aria-label":"Features showcase",children:r.map((i,a)=>e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm hover:shadow-md transition-shadow focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"gridcell","aria-label":`Feature ${a+1}: ${i.title} - ${i.description}`,children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-50 flex items-center justify-center mb-6 mx-auto focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"img","aria-label":`${i.title} icon`,children:i.icon}),e.jsx("h3",{className:"text-xl font-bold text-center mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:i.title}),e.jsx("p",{className:"text-gray-600 text-center focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:i.description})]},a))})]})})]})})},ge=({children:t,className:s="",onClick:o,hoverEffect:r=!0,tabIndex:i,onKeyDown:a,role:n,...d})=>{const c=r?"transition-transform duration-300 hover:translate-y-[-4px]":"";return e.jsx("div",{className:`bg-white rounded-xl shadow-md overflow-hidden ${c} ${s}`,onClick:o,tabIndex:i,onKeyDown:a,role:n,...d,children:t})},Zt=({children:t,className:s=""})=>e.jsx("div",{className:`p-6 border-b border-gray-100 ${s} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded`,tabIndex:0,role:"region","aria-label":"Card header section",children:t}),me=({children:t,className:s=""})=>e.jsx("div",{className:`p-6 ${s} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded`,tabIndex:0,role:"region","aria-label":"Card body section",children:t}),es=({children:t,className:s=""})=>e.jsx("div",{className:`p-6 border-t border-gray-100 ${s} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded`,tabIndex:0,role:"region","aria-label":"Card footer section",children:t}),et=({value:t,max:s,showPercentage:o=!1,size:r="md",color:i="primary",label:a,className:n=""})=>{const d=Math.round(t/s*100),c={sm:"h-1",md:"h-2",lg:"h-4"},b={primary:"bg-[rgb(var(--color-primary))]",secondary:"bg-[rgb(var(--color-secondary))]",success:"bg-[rgb(var(--color-success))]",warning:"bg-[rgb(var(--color-warning))]",error:"bg-[rgb(var(--color-error))]"};return e.jsxs("div",{className:`w-full ${n}`,children:[a&&e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:a}),o&&e.jsxs("span",{className:"text-sm font-medium text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:[d,"%"]})]}),e.jsx("div",{className:`w-full bg-gray-200 rounded-full ${c[r]}`,role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":s,"aria-label":a||`Progress: ${d} percent complete`,children:e.jsx("div",{className:`${b[i]} rounded-full transition-all duration-500 ease-out ${c[r]}`,style:{width:`${d}%`}})}),!a&&o&&e.jsx("div",{className:"mt-1 text-right",children:e.jsxs("span",{className:"text-sm font-medium text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:[d,"%"]})})]})},$e=({icon:t,variant:s="primary",size:o="md",tooltip:r,className:i="",...a})=>{const n="inline-flex items-center justify-center rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2",d={primary:"bg-primary text-white hover:bg-primary/90 focus:ring-primary/50",secondary:"bg-secondary text-white hover:bg-secondary/90 focus:ring-secondary/50",accent:"bg-accent text-text hover:bg-accent/90 focus:ring-accent/50",outline:"border-2 border-primary text-primary hover:bg-primary/10 focus:ring-primary/50",ghost:"text-primary hover:bg-primary/10 focus:ring-primary/50"},c={sm:"p-1.5",md:"p-2",lg:"p-3"},b={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return e.jsxs("button",{className:`${n} ${d[s]} ${c[o]} ${i}`,title:r,"aria-label":a["aria-label"]||r,tabIndex:a.disabled?-1:0,...a,children:[e.jsx("span",{className:b[o],"aria-hidden":"true",children:t}),r&&!a["aria-label"]&&e.jsx("span",{className:"sr-only",children:r})]})},ce=[{id:"present-tenses",title:"PRESENT TENSES",description:"Practice Using Present Simple, Present Continuous, And Present Perfect Tenses Correctly.",icon:"Clock",difficulty:"easy",completedPercentage:75,youtubeUrl:"https://www.youtube.com/watch?v=_TUKYWPuW4g",transcript:`
PRESENT SIMPLE:
This tense is used to describe an action, habit or facts that are generally true and occur in the present time. 

Structure: Subject + verb in present form
Examples:
- I walk to work every morning
- Anna visits the town center every weekend
- She works as a teaching assistant in the school

Important note: If you're using I, you, we, they - the verb doesn't end with an S. However, if you use the subjects she, he, or it, we generally add an S to the verb.
Examples: walks, visits, works, goes

PRESENT PERFECT:
This tense is used to describe an action that has taken place once or many times before now.

Structure: Subject + have/has + past participle
Examples:
- I have walked to school every day
- They have traveled to China twice
- Stacy has worked as a teaching assistant for three years now

Important: The time period is still continuing. For example, Stacy's career is still continuing, therefore we use the present perfect tense.

Note: For subjects I, we, you, they - we use "have". For subjects she, he, it - we use "has".

PRESENT CONTINUOUS:
This tense is used to describe an action that is ongoing now.

Structure: Subject + am/is/are + verb ending in -ing
Examples:
- It is snowing outside
- I am studying for my exam
- She is eating her lunch

Note: For subject I - we use "am". For subjects she, he, it - we use "is". For subjects we, you, they - we use "are".

PRESENT PERFECT CONTINUOUS:
This tense is used to describe an experience or an action that started in the past and is still continuing till the present moment.

Structure: Subject + have/has been + verb ending in -ing
Examples:
- I have been studying for three hours now
- They have been living in the same house since 1999
- It has been snowing all morning

Note: For subjects I, we, you, they - we use "have". For subjects she, he, it - we use "has".
    `},{id:"past-tenses",title:"PAST TENSES",description:"Learn When To Use Past Simple, Past Continuous, And Past Perfect Tenses.",icon:"History",difficulty:"medium",completedPercentage:40,youtubeUrl:"https://www.youtube.com/watch?v=c7JNq6a3e1A",transcript:`
PAST SIMPLE:
This tense is used to describe an action that has already happened.

Structure: Subject + verb in the past form
Examples:
- I walked to work today
- She arrived late for school
- I ate my lunch in the cafe
- I saw my friend in the shop

Important note: Irregular verbs have different past forms. For example, eating becomes ate and eaten. There are many types of irregular verbs, so make sure you know the past forms.

PAST PERFECT:
This tense is used to describe an action that was finished before another past action.

Structure: Subject + had + verb past participle
Examples:
- I had finished my homework to give to my teacher, but she had already left
- He had visited China
- My mum hadn't packed my lunch so I had to prepare it myself

PAST CONTINUOUS:
This tense is used to describe an action that was ongoing. This action may have been interrupted or another action also occurred.

Structure: Subject + was or were + verb ending in -ing
Examples:
- I was working all day to finish my homework
- We were walking home when my mum called me
- He was waiting an hour when the bus finally arrived

Important note: With subjects I, she, he, it we use "was". With subjects we, they, you we use "were".

PAST PERFECT CONTINUOUS:
This tense is used to describe an action that started in the past and continued till another action or time in the past.

Structure: Subject + had been + verb ending in -ing
Examples:
- It had been raining all day so I couldn't walk to work
- We had been looking for my phone for one hour when Jasmine found it under the sofa
- She had been preparing dinner when I arrived home
    `},{id:"conditionals",title:"CONDITIONALS",description:"Master The Four Types Of Conditional Sentences In English.",icon:"GitBranch",difficulty:"hard",completedPercentage:10,youtubeUrl:"https://www.youtube.com/watch?v=z_L80p8WbLM",transcript:`
CONDITIONALS - IF CLAUSES - INTRODUCTION:

Conditional sentences consist of two parts: the if clause which is a condition, and the main clause which is a result.

Example: If it rains, we will cancel the trip.
- "If it rains..." is the if-clause, the condition
- An if-clause begins with IF and has a subject and a verb
- "We will cancel the trip" - the main clause, the result

The word IF introduces a condition. This is something that may or may not happen depending on the circumstances. We don't know exactly if it is going to rain so we say: if it rains and what is the result of this condition? We will cancel the trip.

There is always a condition and a result. The if-clause introduces a condition. The main clause is the result of that condition. What happens in the main clause is conditional on what happens in the if-clause. In other words, the main clause only happens when the events in the if-clause happen.

ORDERING CONDITIONAL SENTENCES:
Note, there are two ways of ordering a conditional sentence:
1. We can use the condition comma + result with a comma after the condition
2. We could use result + condition without a comma between the two

Look at the original sentence: "If it rains, we will cancel the trip."
Notice how there is a comma after the verb 'rains' which is the last part of the if-clause. When the if-clause comes first in the sentence, we put a comma after it.

"If it rains, we will cancel the trip."
But, when the main clause comes first in the sentence, the comma is not necessary.
"We will cancel the trip if it rains."

Notice how there is no comma in this last sentence. You can use either order. They are both used and both correct.

TYPES OF CONDITIONALS:
The four main types of conditionals are: the zero conditional, the first conditional, second conditional and the third conditional. Sometimes these are called type 0, type 1, type 2, and type 3 conditionals. We will quickly introduce them in this lesson and go into more detail about each conditional in individual lessons.

ZERO CONDITIONAL:
Involves the present simple + the present simple. This is used for facts that are generally true or scientific facts. The condition always has the same result.

Examples:
- If you stand in the rain, you get wet. This is generally true.
- If you heat ice, it melts. This is a fact.

FIRST CONDITIONAL:
Involves the present simple + will or its negative won't + the verb. This is used to express a possible situation in the future. We are predicting a likely result in the future if the condition happens.

Examples:
- If it rains, we will cancel the trip. This is the likely result in the future if it rains.
- If you study, you will pass the exam. Again, I predict that this will happen in the future if you study.

SECOND CONDITIONAL:
Involves the past simple + would + the verb. This is used for hypothetical or unlikely situations. Also for unreal or improbable situations now or in the future.

Examples:
- If I won the lottery, I would travel a lot. It is unlikely that I will win the lottery, but in this hypothetical situation, this is what I would do.
- If they sold their house, they would be rich. It is unlikely that they will sell their house because they like living there. However, in the improbable situation of them selling the house, they would become rich.

THIRD CONDITIONAL:
Involves the past perfect + would have + the past participle. This is used when a person is imagining a different past, an imaginary situation that did not happen in the past.

Examples:
- If you had studied, you would have passed the exam. I imagine that if you had done this in the past, the result would have been different.
- If I hadn't been sick, I would have gone to your party. I'm imagining the situation of not being sick in the past, something that I cannot change now.

SUMMARY:
So, in general, zero conditional refers to fact, the first conditional and second conditional refer to the present or the future. However, second conditional sentences suggest it is less probable or imaginary. The third conditional refers to the past.

There are more than these four types of conditional sentences, though these are the ones that are used the most. We will look at other types in future lessons.

Remember, this is just an introduction to conditionals. We will now look at each of these four types of conditional sentences. I hope you found this lesson about conditionals useful. If you have click like and subscribe to our channel, so you know when we create new videos to help you improve your English. Have an awesome day!
    `},{id:"prepositions",title:"PARTICIPLES AS ADJECTIVES",description:"Learn To Use Prepositions Of Time, Place, And Movement Correctly.",icon:"MapPin",difficulty:"medium",completedPercentage:60,youtubeUrl:"https://www.youtube.com/watch?v=V6KfL58Z-vw",transcript:`
PARTICIPLE ADJECTIVES INTRODUCTION:
Welcome back today's lesson is about participle adjectives. Participles come from verb so the word starts out as a verb something like interest and then you add an ing interesting that's the present participle and interested that's the past participle. I put those on the board right here so you can easily see them.

Structure: The present participle would be the verb plus the ing and the past participle would be the verb plus the ed most of the time sometimes it's e and sometimes the past participle is an irregular verb which you just have to learn.

RULE A - EMOTIONS:
So there are three ways to learn this. The first part is about emotions so I'll just put a right here it's about emotions. So if you have the emotion you would say for example I am interested I am interested and I put the ed on the end why because I have that emotion I am interested because the movie is interesting.

Now the movie doesn't have any emotions so the movie actually gives me the emotion so this is the rule:
- If you have the emotion it's ed
- If you have the emotion which means you have to be a person or an animal in order to have an emotion so you would have the ed on the end of those words that describe a person's emotions or an animal's emotions
- Ing is when something gives the emotion to you

Examples:
- I'm bored because the class is boring
- I'm confused because the directions were confusing

So the directions give me that feeling. The directions are confusing but I have the emotions so I am confused. So have the emotion ed give the emotion ing so that's the first difference between the past participles the second one or past and the present participles.

RULE B - WHEN THE OBJECT DOES THE VERB:
The second one I'll call this b is when the object does the verb. Let me do an example how about everyone everyone was sad on the losing team the team lost the game okay the losing team lost the game.

So the way that you do this one it's not going to be a lost team the team loses so what you do because this word is the object obj object okay everyone the losing team is the object this is the participle right here if the object does that verb then you put ing on the end.

Example:
- Did the team lose the answer is yes the team lost that's why everyone is said so the team it's a losing team

Whereas if you look at this one the children found the lost dog found the lost dog now this is not present participle this is the past participle as I said before some of these are irregular here's an irregular one.

- Did the dog lose the answer is no the Little Boy Lost the dog but the dog didn't lose so the object here obj the object did not do this verb and therefore it's in the past participle form

RULE C - TIMING:
The third part here if I have room to write this I think I do see okay the c is when something is happening at that time.

Examples:
- If the snow is falling you say the falling snow made everything look white
- But if the snow is already on the ground you would say the fallen snow is 30 cm deep

So the one is happening at the same time the falling snow is happening at the time that I'm saying that the fallen snow well it snowed yesterday it's not snowing today today so the falling snow the falling snow is oh let's just say beautiful the falling snow is beautiful it's falling right now.

So when this thing is happening right now it is the ing once again which I will circle ing okay so with those three little rules you can remember whether the partis is a present participle or a past participle bye for now.
`},{id:"articles",title:"GERUNDS AND INFINITIVES",description:"Practice Using A, An, And The Correctly In Different Contexts.",icon:"Type",difficulty:"easy",completedPercentage:85,youtubeUrl:"https://www.youtube.com/watch?v=UqXM7H8eqzU",transcript:`
VERBS FOLLOWED BY OTHER VERBS - INTRODUCTION:
English lessons today's mini English lesson is about verbs verbs followed by other verbs. Verbs can be followed by the infinitive to plus the base form to eat for example or gerunds verb plus the ing eating.

VERBS ALWAYS FOLLOWED BY GERUNDS:
So some verbs are always followed by gerunds enjoy I enjoy eating fresh croissants in the morning.

VERBS ALWAYS FOLLOWED BY THE INFINITIVE:
And some verbs are always followed by the infinitive I want to eat eggs in the bacon today want is an example of a verb always followed by the infinitive but how do we know which ones to use unfortunately for these verbs you just have to learn them sorry.

VERBS FOLLOWED BY BOTH WITH SLIGHT DIFFERENCE:
Then there are a group of verbs that can be followed by gerunds infinitives these verbs a little bit more complicated because there is a slight difference in meaning.

Examples:
- I like oh I love eating chocolate
- I love to eat chocolate with my coffee in the morning

If we say I love eating it's more general but if I say I love to eat then our specific moment.

VERBS THAT CHANGE MEANING:
The last group of verbs are verbs that can be followed by gerunds or infinitives but the meaning changes quite a lot stop stop is an example that can be used by both the difference is quite big.

Examples:
- I stopped eating so much cake because I was worried about my weight
- I stopped to eat another piece of cake

Here how do we know what the difference in meaning is I stopped eating we are looking backwards at the event where as I start to eat is looking forwards at the event.

RECAP:
Let's just recap there are three different types of verbs that can be followed by other verbs:

1. The first example we looked at there are verbs that are always followed by gerunds are always followed by infinitives
2. Then there are those verbs like lie and love which are sometimes followed by one or the other there is a little difference in meaning but basically they are very similar  
3. Then we have those verbs like stop who are very different meanings if we use them with gerunds or follow them by infinitives

I think you should remember to stop before you use a gerund or infinitive after reverb next time.
    `},{id:"modal-verbs",title:"MODAL AND ADVERBS",description:"Learn To Express Ability, Possibility, Permisson, And Obligation With Modal Verbs.",icon:"HelpCircle",difficulty:"medium",completedPercentage:30,youtubeUrl:"https://www.youtube.com/watch?v=9ctrwsj3VRY",transcript:`
    Hello guys welcome to interchange 2 unit 14. Now i get it in this unit we are going to discuss about the possible meanings of signs symbols and body language and also we will discuss different ways to express prohibition permission and obligation let's begin.

    POPULAR EMOJIS:
    An emoji it's a graphic or picture that is used to express or represent a feeling an emotion or a situation.

    Examples:
    - I'm bored
    - I love it
    - That's awful
    - Great job
    - I'm not amused
    - That's amazing
    - Just kidding
    - I'm laughing so hard i'm crying
    - I'm so embarrassed
    - My heart is breaking

    BODY LANGUAGE:
    Here we have six pictures and we have to guess the way these women feel based on their expressions.

    Examples:
    - In the first picture she's scratching her head she looks confused
    - In the second picture she's biting her nails she looks nervous
    - In the third picture she's rolling her eyes she looks bored
    - In the fourth picture she's tapping her foot she looks impatient
    - In the fourth picture she is pulling her hair out she looks frustrated
    - In the last picture she is wrinkling her nose she looks annoyed

    CONVERSATION EXAMPLE:
    This is a conversation between eva brian and jack they're talking about the new Bulgarian conversation it's pretty confusing part a listen and practice how was dinner with the new Bulgarian student last night what's her name elena yeah elena it was nice we always have a good time but i still don't understand her very well you see when we offer her something to eat or drink she nods her head up and down but at the same time she says no it might mean she wants to accept it but she thinks it's not polite in some countries you have to refuse any offer first then the host insists and you accept it i don't know it's pretty confusing it could mean she doesn't want anything but she thinks it's rude to say no actually in some countries when people move their heads up and down it means no really now i get it.

    MODALS AND ADVERBS OF CERTAINTY:
    We can use the models might may could must and the adverbs maybe perhaps possibly probably and definitely to express how sure we are about the meaning of signs and gestures.

    Examples:
    - Maybe it means he doesn't understand you
    - That must mean it's perfect

    Structure: To create sentences with models we need a subject the modal verb the verb mean and the complement.

    Examples:
    - In my mean she can't hear you
    - He may mean she can't hear you

    Important note: In this case we use might or may when you are not very sure about the meaning of this expression.

    - It could mean he doesn't know
    - It could mean he doesn't know

    Important note: We use could when we are like 50 sure about the meaning of the expression.

    - That must mean be quiet
    - That must mean be quiet

    Important note: We use mas when we are almost a hundred percent sure about the meaning.

    ADVERBS STRUCTURE:
    With adverbs we need a subject the adverb the verb mean conjugated for the third person and a compliment.

    Examples:
    - Maybe it means come here
    - Perhaps it means come here

    Important note: We use maybe and perhaps at the beginning of the sentence maybe and perhaps are the same you use maybe and perhaps when you are now very sure about the meaning of the expression.

    - It possibly means call me
    - It possibly means call me
    - It probably means call me

    Important note: When you are like 50 sure about the expression we use possibly or probably.

    - That definitely means you're crazy
    - That definitely means you're crazy

    Important note: Now if you are almost 100 sure we use definitely.

    PERMISSION, OBLIGATION AND PROHIBITION:
    To express permission obligation and prohibition we can use be allowed to can have to have got to can't and not be allowed to.

    Examples:
    - You can use the computers in the library you can use the computers in the library you have the permission
    - You have to take off your shoes before you enter you have to take off your shoes before you enter this is an obligation before you enter you have to do this action you have to take off your shoes so this is an obligation
    - You are not allowed to swim in this area you are not allowed to swim in this area you cannot do it you don't have the permission to do it

    PERMISSION STRUCTURE:
    To create sentences with permissions we need a subject allowed to or can plus a verb in the base form plus a complement.

    Examples:
    - You are allowed to go to the restroom you are allowed to go to the restroom
    - You can participate if you raise your hand you can participate if you raise your hand

    Important note: In this case you have the permission this is something that you can do if you want to.

    OBLIGATION STRUCTURE:
    To create sentences with obligations we need a subject have to or have got two plus a verb in the base form plus a complement.

    Examples:
    - You have to throw your trash into the wastebasket you have to throw your trash into the wastebasket
    - You have got to wear a face mask during the pandemic you have got to wear a face mask during the pandemic

    Important note: In this case it's an obligation you are forced to do this you don't have any other action.

    PROHIBITION STRUCTURE:
    To talk about prohibition we need a subject now we allow to or can't plus the verb in the base form plus a compliment.

    Examples:
    - You are not allowed to talk loudly inside the library you are not allowed to talk loudly inside the library
    - You can't smoke on the subway you can't smoke on the subway

    Important note: You are not allowed you don't have the permission to do this action.

    Well guys that was everything for today thanks for watching don't forget to like comment and subscribe.
        `}],ts=l.createContext(void 0),Io=({children:t})=>{const[s,o]=l.useState(null),[r,i]=l.useState(null),[a,n]=l.useState([]),[d,c]=l.useState(!1),{user:b}=fe(),m=async()=>{if(!(!b||d))try{c(!0);const u=await Ee.getAttempts({limit:1e3,sortBy:"completedAt",sortOrder:"desc"});u.success&&u.data?.attempts&&(n(u.data.attempts),console.log("âœ… Intentos cargados desde el backend:",u.data.attempts))}catch(u){console.error("âŒ Error cargando intentos desde el backend:",u)}finally{c(!1)}};l.useEffect(()=>{b?m():n([])},[b]);const w=async()=>{await m()},y=async(u,h)=>{if(!b)return null;try{const k=await Ne.getInProgressAttempt(u,h);if(k.success&&k.data){const E=k.data,T={id:E.id,topicId:E.topicId,startTime:E.startTime,answers:E.answers||{},isCompleted:!1,score:0,totalQuestions:E.totalQuestions,correctAnswers:0,usedHints:E.usedHints||[],timePerQuestion:E.timePerQuestion||{},hintsPerQuestion:E.hintsPerQuestion||{}};return o(T),i(h),console.log("ðŸ“¥ Intento en progreso cargado:",T.id),T}return null}catch(k){return console.error("Error loading in-progress attempt:",k),null}},j=u=>s&&s.topicId===u?s:null,C=async(u,h="easy",k=10)=>{if(b)try{await Ne.deleteInProgressAttempt(u,h);const E=await Ne.saveInProgressAttempt({topicId:u,difficulty:h,totalQuestions:k,currentQuestionIndex:0,answers:{},usedHints:[],timePerQuestion:{},hintsPerQuestion:{}});if(E.success&&E.data){const T=E.data,z={id:T.id,topicId:T.topicId,startTime:T.startTime,answers:T.answers||{},isCompleted:!1,score:0,totalQuestions:T.totalQuestions,correctAnswers:0,usedHints:T.usedHints||[],timePerQuestion:T.timePerQuestion||{},hintsPerQuestion:T.hintsPerQuestion||{}};o(z),i(h),console.log("âœ¨ Nuevo intento iniciado:",z.id)}}catch(E){console.error("Error starting new attempt:",E)}},_=async(u,h,k,E,T)=>{if(!(!s||s.topicId!==u||!r))try{const z=await Ne.saveAnswer(u,r,{questionIndex:h,answer:k,timeSpent:E,hintsUsed:T});if(z.success&&z.data){const D={...s,answers:z.data.answers||s.answers,timePerQuestion:z.data.timePerQuestion||s.timePerQuestion,hintsPerQuestion:z.data.hintsPerQuestion||s.hintsPerQuestion};o(D),console.log("ðŸ’¾ Respuesta guardada:",{questionIndex:h,answer:k})}}catch(z){console.error("Error saving answer:",z),o(D=>!D||D.topicId!==u?D:{...D,answers:{...D.answers,[h]:k}})}},M=(u,h)=>{s&&s.topicId===u&&o(k=>!k||k.topicId!==u?k:{...k,usedHints:[...k.usedHints,h]})},S=u=>s&&s.topicId===u?s.usedHints||[]:[],g=(u,h,k)=>{s&&s.topicId===u&&o(E=>!E||E.topicId!==u?E:{...E,isCompleted:!0,score:Math.round(h/k*100),totalQuestions:k,correctAnswers:h})},v=u=>s!==null&&s.topicId===u&&!s.isCompleted,x=async(u,h)=>{if(!b)return!1;try{const k=await Ne.getInProgressAttempt(u,h);return k.success&&k.data!==null}catch(k){return console.error("Error checking in-progress attempt:",k),!1}},I=(u,h)=>a.filter(E=>E.topicId===u&&(!h||E.difficulty===h)).length>0?!0:s&&s.topicId===u?s.isCompleted:!1,O=()=>[],N=async u=>{if(s&&s.topicId===u&&r)try{await Ne.deleteInProgressAttempt(u,r),console.log("ðŸ—‘ï¸ Intento eliminado del backend")}catch(h){console.error("Error deleting in-progress attempt:",h)}o(null),i(null)},P=u=>s&&s.topicId===u?{correct:s.correctAnswers,total:s.totalQuestions||10}:{correct:0,total:10};return e.jsx(ts.Provider,{value:{getCurrentAttempt:j,startNewAttempt:C,submitAnswer:_,completeAttempt:g,hasInProgressAttempt:v,hasInProgressAttemptForDifficulty:x,hasCompletedAttempt:I,getAttemptHistory:O,resetAttempt:N,getAttemptScore:P,recordHintUsage:M,getUsedHints:S,refreshAttempts:w,loadInProgressAttempt:y},children:t})},vt=()=>{const t=l.useContext(ts);if(t===void 0)throw new Error("useAttempt must be used within an AttemptProvider");return t},ss=l.createContext(void 0),So=({children:t})=>{const[s,o]=l.useState([]),[r,i]=l.useState(["easy"]),[a,n]=l.useState(!1),{isAuthenticated:d,user:c}=fe();l.useEffect(()=>{d&&c?b():(o([]),i(["easy"]))},[d,c]);const b=async()=>{try{n(!0),console.log("Loading progress for user:",c?._id);const g=await Ee.getProgress();if(g.success&&g.data){const{levels:v,unlockedDifficulties:x}=g.data;console.log("Progress loaded:",{levelsCount:v?.length||0,unlockedDifficulties:x||["easy"]}),o(v||[]),i(x||["easy"])}else console.warn("Failed to load progress:",g.message),o([]),i(["easy"])}catch(g){console.error("Error loading progress:",g),o([]),i(["easy"])}finally{n(!1)}},m=(g,v)=>s.find(x=>x.topicId===g&&x.difficulty===v)||null,S={levels:s,unlockedDifficulties:r,isLoading:a,getLevelProgress:m,isLevelCompleted:(g,v)=>m(g,v)?.isCompleted||!1,canAccessDifficulty:g=>r.includes(g),getLevelPercentage:(g,v)=>m(g,v)?.bestScore.percentage||0,completeLevel:async(g,v,x,I,O)=>{try{n(!0),console.log(`Completing level: ${g} ${v} - ${x}/${I} for user:`,c?._id);const N=await Ee.completeLevel({topicId:g,difficulty:v,correct:x,total:I,timeSpent:O?.timeSpent||0,hintsUsed:O?.hintsUsed||0,questionsDetails:O?.questionsDetails||[]});if(N.success&&N.data){const P=N.data.levelProgress,u=N.data.unlockedDifficulties,h=N.data.newUnlocks;return console.log("Level completed successfully:",{levelProgress:P,unlockedDifficulties:u,newUnlocks:h}),o(k=>{const E=k.findIndex(T=>T.topicId===g&&T.difficulty===v);if(E!==-1){const T=[...k];return T[E]=P,console.log("Updated existing level at index:",E),T}else return console.log("Added new level to progress"),[...k,P]}),i(u),{success:!0,message:N.message,newUnlocks:h}}else return console.error("Failed to complete level:",N.message),{success:!1,message:N.message||"Error al completar nivel"}}catch(N){return console.error("Error completing level:",N),{success:!1,message:N.message||"Error de conexiÃ³n al completar nivel"}}finally{n(!1)}},refreshProgress:async()=>{await b()},getStats:()=>{const g=s.filter(I=>I.isCompleted).length,v=s.length>0?Math.round(s.reduce((I,O)=>I+O.bestScore.percentage,0)/s.length):0,x={easy:s.filter(I=>I.difficulty==="easy"&&I.isCompleted).length,medium:s.filter(I=>I.difficulty==="medium"&&I.isCompleted).length,hard:s.filter(I=>I.difficulty==="hard"&&I.isCompleted).length};return{totalCompleted:g,averageScore:v,completedByDifficulty:x}}};return e.jsx(ss.Provider,{value:S,children:t})},wt=()=>{const t=l.useContext(ss);if(t===void 0)throw new Error("useGameProgress must be used within a GameProgressProvider");return t},To="modulepreload",Ao=function(t){return"/"+t},Ct={},Mt=function(s,o,r){let i=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),d=n?.nonce||n?.getAttribute("nonce");i=Promise.allSettled(o.map(c=>{if(c=Ao(c),c in Ct)return;Ct[c]=!0;const b=c.endsWith(".css"),m=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const w=document.createElement("link");if(w.rel=b?"stylesheet":To,b||(w.as="script"),w.crossOrigin="",w.href=c,d&&w.setAttribute("nonce",d),document.head.appendChild(w),b)return new Promise((y,j)=>{w.addEventListener("load",y),w.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(n){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=n,window.dispatchEvent(d),!d.defaultPrevented)throw n}return i.then(n=>{for(const d of n||[])d.status==="rejected"&&a(d.reason);return s().catch(a)})},Eo="/assets/background-music-DrpuuhDs.mp3",os=l.createContext(void 0),ns="grammar_master_audio_settings",Po=()=>{try{const t=sessionStorage.getItem(ns);if(t){const s=JSON.parse(t);return{isMusicEnabled:s.isMusicEnabled??!1,isSoundEffectsEnabled:s.isSoundEffectsEnabled??!1}}}catch(t){console.error("Error loading audio settings:",t)}return{isMusicEnabled:!1,isSoundEffectsEnabled:!1}},Co=(t,s)=>{try{sessionStorage.setItem(ns,JSON.stringify({isMusicEnabled:t,isSoundEffectsEnabled:s}))}catch(o){console.error("Error saving audio settings:",o)}},Mo=({children:t})=>{const{user:s}=fe(),o=Po(),[r,i]=l.useState(o.isMusicEnabled),[a,n]=l.useState(o.isSoundEffectsEnabled),[d,c]=l.useState(null);l.useEffect(()=>{const _=new Audio(Eo);return _.loop=!0,_.volume=.3,_.preload="auto",c(_),console.log("ðŸŽµ Background music loaded"),()=>{c(M=>(M&&(M.pause(),M.currentTime=0,console.log("ðŸ›‘ Background music cleaned up")),null))}},[]),l.useEffect(()=>{Co(r,a),d&&(s&&r?(console.log("â–¶ï¸ Starting background music (user authenticated)"),d.play().catch(_=>{console.error("Error playing background music:",_)})):(console.log(s?"â¹ï¸ Stopping background music (disabled by user)":"â¹ï¸ Stopping background music (user not authenticated)"),d.pause(),d.currentTime=0))},[r,a,d,s]),l.useEffect(()=>{!s&&d&&(console.log("ðŸšª User logged out, stopping all audio"),d.pause(),d.currentTime=0)},[s,d]);const b=()=>{i(_=>!_)},m=()=>{n(_=>!_)},w=()=>{s&&r&&d?(console.log("ðŸŽµ Manual play background music"),d.play().catch(_=>{console.error("Error playing background music:",_)})):console.log(s?"ðŸš« Background music disabled or not loaded":"ðŸš« Background music blocked - user not authenticated")},y=()=>{d&&(console.log("ðŸ›‘ Manual stop background music"),d.pause(),d.currentTime=0)},j=async(_,M=.6)=>{if(!s||!a){s||console.log("ðŸš« Sound effect blocked - user not authenticated");return}try{const S=_==="correct"?await Mt(()=>import("./CorrectAnswer-L_-Fpju_.js"),[]):await Mt(()=>import("./WrongAnswer-B-lU0EWy.js"),[]),g=new Audio(S.default);g.volume=M,g.play().catch(v=>{console.error(`Error playing ${_} sound effect:`,v)})}catch(S){console.error(`Error loading ${_} sound effect:`,S)}},C=_=>{if(!s||!a){console.log(s?"ðŸš« Question audio blocked - sound effects disabled":"ðŸš« Question audio blocked - user not authenticated");return}const M=new Audio(_);M.volume=.7,M.play().catch(S=>{console.error("Error playing question audio:",S)})};return e.jsx(os.Provider,{value:{isMusicEnabled:r,isSoundEffectsEnabled:a,toggleMusic:b,toggleSoundEffects:m,playBackgroundMusic:w,stopBackgroundMusic:y,playSoundEffect:j,playQuestionAudio:C,isUserAuthenticated:!!s},children:t})},_t=()=>{const t=l.useContext(os);if(t===void 0)throw new Error("useAudio must be used within an AudioProvider");return t},qt={easy:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",button:"bg-emerald-500 hover:bg-emerald-600 text-white"},medium:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",button:"bg-blue-500 hover:bg-blue-600 text-white"},hard:{bg:"bg-fuchsia-50",text:"text-fuchsia-700",border:"border-fuchsia-200",button:"bg-fuchsia-500 hover:bg-fuchsia-600 text-white"}},qo=()=>{const t=de(),{hasInProgressAttemptForDifficulty:s,hasCompletedAttempt:o}=vt(),{canAccessDifficulty:r,isLevelCompleted:i,getLevelPercentage:a}=wt(),{isMusicEnabled:n,toggleMusic:d,isUserAuthenticated:c}=_t(),[b,m]=l.useState({}),[w,y]=l.useState(!0),j=ce.reduce((g,v)=>(g[v.difficulty]||(g[v.difficulty]=[]),g[v.difficulty].push(v),g),{});l.useEffect(()=>{(async()=>{y(!0);const v={};for(const x of ce){const I=`${x.id}-${x.difficulty}`;try{const O=await s(x.id,x.difficulty);v[I]=O}catch(O){console.error(`Error checking attempt for ${x.id}-${x.difficulty}:`,O),v[I]=!1}}m(v),y(!1)})()},[s]);const C=(g,v)=>{const x=`${g}-${v}`;return w?"LOADING...":b[x]?"CONTINUE ATTEMPT":"START PRACTICE"},_=(g,v,x)=>{g.stopPropagation(),r(x)&&t(`/game/${v}?difficulty=${x}`)},M=(g,v,x)=>{g.stopPropagation(),r(x)&&t(`/results/${v}?difficulty=${x}`)},S=(g,v)=>r(v)?i(g,v)?"completed":"available":"locked";return e.jsxs("div",{className:"animate-fade-in max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("header",{className:"mb-16 text-center",children:[e.jsx("h1",{className:"font-extrabold text-5xl md:text-6xl mb-6 text-primary tracking-tight focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:"GRAMMAR MASTER PRO"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":"Application description: Master English Grammar Through Interactive Games And Activities Designed For B1-Level Learners",children:"Master English Grammar Through Interactive Games And Activities Designed For B1-Level Learners."}),e.jsxs("div",{className:"flex justify-center mt-8 space-x-4",role:"toolbar","aria-label":"Audio and help controls",children:[e.jsx($e,{icon:c?n?e.jsx(Xe,{className:"h-6 w-6 text-blue-600"}):e.jsx(je,{className:"h-6 w-6"}):e.jsx(je,{className:"h-6 w-6 opacity-50"}),variant:"outline",size:"lg",tooltip:c?n?"ðŸŽµ Mute Background Music":"ðŸŽµ Enable Background Music":"ðŸ” Background Music (Login Required)","aria-label":c?n?"Mute Background Music":"Enable Background Music":"Background Music - Login Required",onClick:c?d:void 0,disabled:!c,className:`transition-transform ${c?"hover:scale-105":"opacity-50 cursor-not-allowed"}`}),e.jsx($e,{icon:e.jsx(Vt,{className:"h-6 w-6"}),variant:"outline",size:"lg",tooltip:"Help","aria-label":"Get help and support",onClick:()=>t("/help"),className:"hover:scale-105 transition-transform"})]})]}),e.jsx("main",{children:Object.entries(j).map(([g,v])=>e.jsxs("section",{className:"mb-12",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-8 text-gray-900 capitalize focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":2,"aria-label":`${g} difficulty level section`,children:[g," Level"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",role:"grid","aria-label":`${g} level topics grid`,children:v.map(x=>{const I=a(x.id,x.difficulty),O=S(x.id,x.difficulty),N=qt[x.difficulty]||qt.easy,P=O==="locked",u=O==="completed";return e.jsx(ge,{className:`transition-all duration-300 ${P?"opacity-60":"hover:shadow-lg hover:-translate-y-1 cursor-pointer"} ${N.border} border-2 ${u?"ring-2 ring-green-400":""}`,onClick:()=>!P&&t(`/tutorial/${x.id}?difficulty=${x.difficulty}`),tabIndex:P?-1:0,onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&!P&&(h.preventDefault(),t(`/tutorial/${x.id}?difficulty=${x.difficulty}`))},role:"button","aria-label":`${x.title} - ${x.difficulty} level. ${P?"Locked - Complete previous topics to unlock":u?"Completed":`${I}% progress`}`,"aria-disabled":P,children:e.jsxs(me,{className:"flex flex-col h-full relative",children:[P&&e.jsx("div",{className:"absolute top-4 right-4 z-10 bg-white rounded-full p-2 shadow-lg border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"img","aria-label":"Topic is locked - complete previous topics to unlock",children:e.jsx(Pt,{className:"h-8 w-8 text-gray-600","aria-hidden":"true"})}),u&&e.jsx("div",{className:"absolute top-4 right-4 z-10 focus:outline-none focus:ring-2 focus:ring-green-500 rounded",tabIndex:0,role:"img","aria-label":"Topic completed successfully",children:e.jsx(Xs,{className:"h-6 w-6 text-green-500","aria-hidden":"true"})}),e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:`text-xl font-bold ${P?"text-gray-400":"text-gray-900"} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1`,tabIndex:0,role:"heading","aria-level":3,children:x.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${N.text} ${N.bg} focus:outline-none focus:ring-2 focus:ring-blue-500`,tabIndex:0,role:"text","aria-label":`Difficulty level: ${x.difficulty}`,children:x.difficulty.toUpperCase()}),I===100&&e.jsx("div",{className:"focus:outline-none focus:ring-2 focus:ring-yellow-500 rounded",tabIndex:0,role:"img","aria-label":"Perfect score achieved - star rating",children:e.jsx(Kt,{className:"h-4 w-4 text-yellow-500 fill-current","aria-hidden":"true"})})]})]}),e.jsx("p",{className:`mb-6 flex-grow ${P?"text-gray-400":"text-gray-600"} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1`,tabIndex:0,role:"text","aria-label":`Topic description: ${x.description}`,children:x.description}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`Progress information: ${I} percent complete`,children:[e.jsx("span",{className:"text-gray-500",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[I,"%"]})]}),e.jsx("div",{tabIndex:0,role:"region","aria-label":"Progress visualization",className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",children:e.jsx(et,{value:I,max:100,className:"h-2","aria-label":`Topic progress: ${I} percent complete`})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Q,{variant:"primary",size:"sm",className:`w-full ${P?"bg-gray-400 cursor-not-allowed":N.button}`,onClick:h=>_(h,x.id,x.difficulty),disabled:P,children:P?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Pt,{className:"h-5 w-5 mr-2 text-white"}),"LOCKED"]}):C(x.id,x.difficulty)}),!P&&o(x.id,x.difficulty)&&e.jsx(Q,{variant:"outline",size:"sm",className:"w-full border-2 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200 hover:shadow-md hover:-translate-y-0.5",onClick:h=>M(h,x.id,x.difficulty),children:"VIEW RESULTS"}),e.jsx(Q,{variant:"outline",size:"sm",icon:e.jsx(Wt,{className:"h-4 w-4"}),className:"w-full border-2 border-green-500 text-green-700 hover:bg-green-50 hover:border-green-600 hover:text-green-800 transition-all duration-200 hover:shadow-md hover:-translate-y-0.5",onClick:h=>{h.stopPropagation(),t(`/tutorial/${x.id}?difficulty=${x.difficulty}`)},children:"ðŸ“˜ Tutorial"})]})]})]})},x.id)})})]},g))})]})},Lo=({videoId:t,onProgress:s,onComplete:o,className:r=""})=>{const[i,a]=l.useState(!1),[n,d]=l.useState(0),[c,b]=l.useState(!1),m=l.useRef(null),w=l.useRef(null),y=()=>{w.current&&clearInterval(w.current),w.current=setInterval(()=>{d(S=>{const g=S+1;return s?.(g),g>=100&&(a(!0),o?.(),w.current&&clearInterval(w.current)),g})},1e3)},j=()=>{a(!0),d(100),o?.(),w.current&&clearInterval(w.current)},C=()=>{if(a(!1),d(0),b(!1),m.current){const S=m.current.src;m.current.src="",setTimeout(()=>{m.current&&(m.current.src=S)},100)}},_=()=>{b(!0),y()};l.useEffect(()=>()=>{w.current&&clearInterval(w.current)},[]);const M=`https://www.youtube.com/embed/${t}?autoplay=0&rel=0&modestbranding=1&showinfo=0`;return e.jsxs("div",{className:`relative bg-black rounded-lg overflow-hidden ${r}`,children:[!c&&e.jsx("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center z-10 focus:outline-none focus:ring-2 focus:ring-white rounded",tabIndex:0,role:"text","aria-label":"Loading video content",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"text-xl mb-2 focus:outline-none focus:ring-2 focus:ring-white rounded px-1",tabIndex:0,role:"text",children:"Cargando video..."}),e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto focus:outline-none focus:ring-2 focus:ring-white rounded",tabIndex:0,role:"img","aria-label":"Loading spinner"})]})}),e.jsx("iframe",{ref:m,src:M,title:"YouTube video player",className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:_}),e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 hover:opacity-100 transition-opacity pointer-events-none",children:[e.jsxs("div",{className:"absolute bottom-16 left-0 right-0 px-4 pointer-events-auto",children:[e.jsx("div",{className:"w-full h-1 bg-gray-600 rounded-lg relative focus:outline-none focus:ring-2 focus:ring-white rounded",tabIndex:0,role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Video progress: ${Math.floor(n)}% completed`,children:e.jsx("div",{className:"h-full bg-primary rounded-lg transition-all duration-300",style:{width:`${n}%`}})}),e.jsxs("div",{className:"flex justify-between text-white text-sm mt-1",children:[e.jsxs("span",{className:"focus:outline-none focus:ring-2 focus:ring-white rounded px-1",tabIndex:0,role:"text",children:[Math.floor(n),"% completado"]}),e.jsx("span",{className:"focus:outline-none focus:ring-2 focus:ring-white rounded px-1",tabIndex:0,role:"text",children:i?"Completado":"En progreso"})]})]}),e.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex items-center justify-center gap-4 pointer-events-auto",children:[!i&&e.jsxs(Q,{variant:"ghost",size:"sm",onClick:j,className:"text-white hover:bg-white/20",children:[e.jsx(Yt,{size:20}),"Saltar Tutorial"]}),i&&e.jsxs(Q,{variant:"ghost",size:"sm",onClick:C,className:"text-white hover:bg-white/20",children:[e.jsx(uo,{size:20}),"Repetir Tutorial"]})]})]}),i&&e.jsx("div",{className:"absolute inset-0 bg-green-500/20 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-green-500 rounded",tabIndex:0,role:"text","aria-label":"Tutorial completed successfully",children:e.jsx("div",{className:"bg-green-500 text-white px-4 py-2 rounded-lg",children:"âœ… Tutorial Completado"})})]})},Oo=({transcript:t,className:s=""})=>e.jsxs("div",{className:`bg-white rounded-lg border-2 border-gray-200 p-6 ${s}`,children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:[e.jsx(to,{size:24,className:"text-blue-600"}),"Video Transcript"]}),e.jsx("div",{className:"text-gray-700 leading-relaxed whitespace-pre-line focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":"Video transcript content",children:t})]}),tt=[{id:"pt-1",text:"Ben _____ in a hospital.",options:["work","works","is work","is works"],correctAnswer:"works",explanation:'"Ben" is a third-person singular subject (like "he"). In the simple present, we add "-s" to the verb "work."',hint:`Is it "he" or "they"? Add "s" if it's "he", "she", or "it".`,image:"questions/presentTense/pt-1.png",alt:"Ben, a doctor, works in a hospital. A doctor in a white coat in a hospital setting.",audio:"/assets/audio_questions/presentTense/question1_audio.mp3"},{id:"pt-2",text:"_____ you _____ fish?",options:["Do - like","Does - like","Do - likes","Does - likes"],correctAnswer:"Do - like",explanation:'To form a simple present question with "you," we use the auxiliary verb "do" before the subject. The main verb "like" remains in its base form.',hint:'Is it a question about "you"? Use "do".',image:"questions/presentTense/pt-2.png",alt:'A girl eating fish, representing the question "Do you like fish?"',audio:"/assets/audio_questions/presentTense/question2_audio.mp3"},{id:"pt-3",text:"Matthew never _____ television.",options:["watch","are watch","watches","is matches"],correctAnswer:"watches",explanation:'"Matthew" is a third-person singular subject (like "he"). Verbs ending in -ch (like "watch") add "-es" in the simple present for third-person singular subjects.',hint:`It's "he" and the verb ends in "ch". Add "es".`,image:"questions/presentTense/pt-3.png",alt:"Matthew sitting and watching television, illustrating the action of watching TV.",audio:"/assets/audio_questions/presentTense/question3_audio.mp3"},{id:"pt-4",text:"______ she play football?",options:["Done","Did","Do","Does"],correctAnswer:"Does",explanation:'To form a simple present question with "she," we use the auxiliary verb "does" before the subject. The main verb "play" remains in its base form.',hint:`It's a question about "she". Use "does".`,image:"questions/presentTense/pt-4.png",alt:"A girl kicking a soccer ball, representing the question about playing football.",audio:"/assets/audio_questions/presentTense/question4_audio.mp3"},{id:"pt-5",text:"They always ______ dinner at 7 o'clock.",options:["eat","is eat","are eats","eats"],correctAnswer:"eat",explanation:'"They" is a plural subject. For "I, you, we, they," the verb remains in its base form in the simple present.',hint:`Is it "they" or "he"? Don't add "s" for "they".`,image:"questions/presentTense/pt-5.png",alt:"Several people having dinner together at 7 o'clock, showing a regular dinner routine.",audio:"/assets/audio_questions/presentTense/question5_audio.mp3"},{id:"pt-6",text:"Valerie ______ English at university.",options:["study","studies","is study","is studies"],correctAnswer:"studies",explanation:'"Valerie" is a third-person singular subject (like "she"). Verbs ending in a consonant + "y" (like "study") change "y" to "i" and add "-es" in the simple present for third-person singular.',hint:`It's "she" and the verb ends in "y". Change "y" to "i" and add "es".`,image:"questions/presentTense/pt-6.png",alt:"Valerie studying English at university, sitting with books and notes.",audio:"/assets/audio_questions/presentTense/question6_audio.mp3"},{id:"pt-7",text:"I _____ English every Monday and Wednesday.",options:["study","studies","am studying","have studied"],correctAnswer:"study",explanation:"Regular Schedules Take Present Simple.",hint:"Routine On Fixed Days. I study English every Monday and Wednesday.",image:"questions/presentTense/pt-7.png",alt:"A man studying English with books, representing a weekly study routine.",audio:"/assets/audio_questions/presentTense/question7_audio.mp3"},{id:"pt-8",text:"She _____ her homework already.",options:["finishes","is finishing","has finished","finish"],correctAnswer:"has finished",explanation:"Present Perfect Shows A Recently Completed Action Relevant Now.",hint:"Use Have/Has + Past Participle. She has finished her homework.",image:"questions/presentTense/pt-8.png",alt:"A student showing her completed homework, indicating she has already finished.",audio:"/assets/audio_questions/presentTense/question8_audio.mp3"},{id:"pt-9",text:"The sun _____ in the east.",options:["rise","rises","is rising","has risen"],correctAnswer:"rises",explanation:"Facts And Universal Truths Use Present Simple.",hint:"General Truth. The sun rises in the east.",image:"questions/presentTense/pt-9.png",alt:"The sun rising in the east over the horizon, representing a universal fact.",audio:"/assets/audio_questions/presentTense/question9_audio.mp3"},{id:"pt-10",text:"Look! The children _____ in the park.",options:["play","plays","are playing","have played"],correctAnswer:"are playing",explanation:"Present Continuous For An Action Happening Right Now.",hint:'"Look!" Signals Something In Progress. The children are playing.',image:"questions/presentTense/pt-10.png",alt:"Several children actively playing in the park right now.",audio:"/assets/audio_questions/presentTense/question10_audio.mp3"}],rs=[{id:"past-1",text:"While I (read / a book), the phone suddenly (ring).",correctAnswer:"While I was reading a book, the phone suddenly rang.",explanation:"The first action was ongoing (Past Continuous), the second was a sudden interruption (Simple Past).",hint:"Ongoing action interrupted.",image:"questions/pastTense/pat-1.png",alt:"A person reading a book at home when the phone suddenly rings.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question1_audio.mp3"},{id:"past-2",text:"She (go / to the store) after she (finish / her work).",correctAnswer:"She went to the store after she had finished her work.",explanation:"The finishing of work happened before going to the store, so Past Perfect is used for the earlier action.",hint:"What happened first of the two?",image:"questions/pastTense/pat-2.png",alt:"A woman finishing her work at a desk and then going to the store.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question2_audio.mp3"},{id:"past-3",text:"I _____ soccer every Sunday when I was a child.",options:["played","was playing","had played","have played"],correctAnswer:"played",explanation:"Past Simple For Repeated Actions In The Past.",hint:"Childhood Habit â†’ Past Simple. I played soccer every Sunday.",image:"questions/pastTense/pat-3.png",alt:"A child playing soccer on a field, representing a childhood habit.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question3_audio.mp3"},{id:"past-4",text:"After she _____ the letter, she felt relieved.",options:["had written","wrote","was writing","has written"],correctAnswer:"had written",explanation:"Past Perfect Highlights The Earlier Past Action (Writing).",hint:"First Write, Then Feel Relieved. She had written the letter.",image:"questions/pastTense/pat-4.png",alt:"A woman writing a letter and then showing relief.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question4_audio.mp3"},{id:"past-5",text:"They _____ TV when the lights went out.",options:["watched","were watching","had watched","have watched"],correctAnswer:"were watching",explanation:"Past Continuous For An Ongoing Past Action Interrupted.",hint:"Action In Progress â†’ Past Continuous. They were watching TV.",image:"questions/pastTense/pat-5.png",alt:"Several people watching TV when the lights suddenly go out.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question5_audio.mp3"},{id:"past-6",text:"By the time the movie started, we _____ our seats.",options:["found","had found","were finding","have found"],correctAnswer:"had found",explanation:"Past Perfect Shows Completion Before Another Past Event.",hint:"Seat Finding Happened Earlier. We had found our seats.",image:"questions/pastTense/pat-6.png",alt:"A group of people finding and sitting in their seats in a movie theater before the movie starts.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question6_audio.mp3"},{id:"past-7",text:"He _____ in Berlin last year.",options:["lived","was living","had lived","has lived"],correctAnswer:"lived",explanation:'Past Simple For A Finished Past Situation With A Specific Time ("Last Year").',hint:"Specific Past Time â†’ Past Simple. He lived in Berlin last year.",image:"questions/pastTense/pat-7.png",alt:"A man walking through the city of Berlin, with buildings and a recognizable tower.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question7_audio.mp3"},{id:"past-8",text:"What _____ you _____ when I called?",options:["did / do","were / doing","had / done","have / done"],correctAnswer:"were/doing",explanation:"Past Continuous Describes The Activity In Progress During The Interruption.",hint:"Focus On Ongoing Action. What were you doing?",image:"questions/pastTense/pat-8.png",alt:"A phone ringing while a person is doing another activity.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question8_audio.mp3"},{id:"past-9",text:"He was tired because he _____ all day.",options:["worked","was working","had worked","has worked"],correctAnswer:"had worked",explanation:"Past Perfect Explains The Reason For A Past State.",hint:"Work Finished Before Feeling Tired. He had worked all day.",image:"questions/pastTense/pat-9.png",alt:"A man exhausted sitting after working all day.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question9_audio.mp3"},{id:"past-10",text:"We _____ to the beach yesterday.",options:["went","were going","had gone","have gone"],correctAnswer:"went",explanation:'Past Simple Is Used With Finished Time Adverbs Like "Yesterday".',hint:"Completed Trip. We went to the beach yesterday.",image:"questions/pastTense/pat-10.png",alt:"A group of people enjoying at the beach during the day, representing a recent visit.",isFillInTheBlank:!0,audio:"/assets/audio_questions/past_question10_audio.mp3"}],as=[{id:"cond-1",text:"If it _____ tomorrow, we will cancel the picnic.",options:["will rain","rains","would rain","had rained"],correctAnswer:"rains",explanation:'First Conditional Uses Present Simple In The If-Clause And "Will" In The Result Clause.',hint:"Possible Future Condition. If it rains, we will cancel.",image:"questions/conditional/con_1.png",alt:"A park with a picnic set up under dark clouds, suggesting it might rain tomorrow.",audio:"/assets/audio_questions/conditional/question1_audio.mp3"},{id:"cond-2",text:"If I _____ rich, I would travel around the world.",options:["am","was","were","had been"],correctAnswer:"were",explanation:'Second Conditional Uses "Were" For All Persons In Hypothetical Present Situations.',hint:"Imaginary Situation â†’ If I were rich, I would travel.",image:"questions/conditional/con_2.png",alt:"A person imagining traveling around the world with suitcases and famous landmarks.",audio:"/assets/audio_questions/conditional/question2_audio.mp3"},{id:"cond-3",text:"If she had known the answer, she _____ me.",options:["will tell","would tell","would have told","told"],correctAnswer:"would have told",explanation:"Third Conditional For Past Hypotheticals: If + Past Perfect â†’ Would Have + PP.",hint:"Regret About The Past. She would have told me.",image:"questions/conditional/con_3.png",alt:"A woman thinking and regretting not giving an answer in the past.",audio:"/assets/audio_questions/conditional/question3_audio.mp3"},{id:"cond-4",text:"If you study hard, you _____ the exam.",options:["pass","will pass","would pass","would have passed"],correctAnswer:"will pass",explanation:'First Conditional Result Uses "Will" + Base Verb.',hint:"Real Possibility. You will pass.",image:"questions/conditional/con_4.png",alt:"A student focused on studying for an exam with books and notes.",audio:"/assets/audio_questions/conditional/question4_audio.mp3"},{id:"cond-5",text:"I _____ the train if I had left earlier.",options:["would catch","would have caught","caught","will catch"],correctAnswer:"would have caught",explanation:"Third Conditional Describes A Missed Past Possibility.",hint:"Past Regret. I would have caught the train.",image:"questions/conditional/con_5.png",alt:"A man running toward a train that is leaving, showing he missed the train by leaving late.",audio:"/assets/audio_questions/conditional/question5_audio.mp3"},{id:"cond-6",text:"If they _____ here now, we could start.",options:["are","were","had been","will be"],correctAnswer:"were",explanation:'Second Conditional Uses Past Simple ("Were") For Hypothetical Present.',hint:"They Are Not Here â†’ Hypothetical. If they were here.",image:"questions/conditional/con_6.png",alt:"A group of people waiting for others to arrive so they can start a meeting.",audio:"/assets/audio_questions/conditional/question6_audio.mp3"},{id:"cond-7",text:"If water reaches 0 Â°C, it _____.",options:["freezes","will freeze","would freeze","froze"],correctAnswer:"freezes",explanation:"Zero Conditional Expresses Scientific Facts: If + Present Simple â†’ Present Simple.",hint:"General Truth. It freezes.",image:"questions/conditional/con_7.png",alt:"A glass of water freezing, illustrating the scientific fact that water freezes at 0 Â°C.",audio:"/assets/audio_questions/conditional/question7_audio.mp3"},{id:"cond-8",text:"What _____ you do if you lost your wallet?",options:["will","would","did","had"],correctAnswer:"would",explanation:'Second Conditional Question Uses "Would" + Base Verb.',hint:"Hypothetical Question. What would you do?",image:"questions/conditional/con_8.png",alt:"A person searching for a lost wallet on the street, representing a hypothetical situation.",audio:"/assets/audio_questions/conditional/question8_audio.mp3"},{id:"cond-9",text:"If I _____ you, I wouldn't do that.",options:["am","was","were","had been"],correctAnswer:"were",explanation:'Fixed Expression In Second Conditional: "If I Were You".',hint:"Advice Formula â†’ If I were you.",image:"questions/conditional/con_9.png",alt:'A person giving advice to another, representing the phrase "If I were you".',audio:"/assets/audio_questions/conditional/question9_audio.mp3"},{id:"cond-10",text:"You can stay with us, _____ you help with the chores.",options:["if","unless","provided","in case"],correctAnswer:"provided",explanation:'"Provided (That)" Introduces A Conditional Meaning "Only If".',hint:'Conditional Word Synonym For "If". Provided you help.',image:"questions/conditional/con_10.png",alt:"People doing household chores together, showing help at home as a condition.",audio:"/assets/audio_questions/conditional/question10_audio.mp3"}],is=[{id:"prep-1",text:"The adventure movie was so ______! After watching it, I felt really ______ to travel the world.",correctAnswer:["exciting","inspired"],explanation:"The movie creates excitement (exciting), and as a result, the person feels inspired (inspired).",hint:"What quality does the movie have, and how does it make you feel afterwards?",image:"questions/prepositions/pre_1.png",alt:"A person watching an adventure movie in the cinema and then dreaming of traveling the world.",isDragAndDrop:!0,dragOptions:["exciting","excited","inspired","inspiring"],audio:"/assets/audio_questions/prepositions/question1_audio.mp3"},{id:"prep-2",text:"After working 10 hours, I felt completely ______.",correctAnswer:"tired",explanation:"The person experiences the feeling, so it takes the -ed form.",hint:"How do you feel?",image:"questions/prepositions/pre_2.png",alt:"A person with an extremely tired expression after working 10 hours straight.",isDragAndDrop:!0,dragOptions:["tiring","tired"],audio:"/assets/audio_questions/prepositions/question2_audio.mp3"},{id:"prep-3",text:"The dog barked loudly, which was very ______ to the neighbors. They were very ______.",correctAnswer:["annoying","annoyed"],explanation:"The barking causes annoyance (annoying). The neighbors feel annoyed (annoyed).",hint:"What makes the noise, and who feels it?",image:"questions/prepositions/pre_3.png",alt:"A dog barking loudly and neighbors showing annoyance at the noise.",isDragAndDrop:!0,dragOptions:["annoying","annoyed"],audio:"/assets/audio_questions/prepositions/question3_audio.mp3"},{id:"prep-4",text:"The rollercoaster ride was absolutely ______!",correctAnswer:"exciting",explanation:"The ride itself produces the feeling of excitement, so the -ing form is used.",hint:"Is the ride feeling excited?",image:"questions/prepositions/pre_4.png",alt:"People screaming and raising their hands on a rollercoaster, showing excitement.",isDragAndDrop:!0,dragOptions:["excited","exciting"],audio:"/assets/audio_questions/prepositions/question4_audio.mp3"},{id:"prep-5",text:"She was so ______ when she heard the news; she couldn't believe it.",correctAnswer:"surprised",explanation:"The person experienced the surprise from the news.",hint:"How did she react?",image:"questions/prepositions/pre_5.png",alt:"A woman with a surprised expression after receiving unexpected news.",isDragAndDrop:!0,dragOptions:["surprising","surprised"],audio:"/assets/audio_questions/prepositions/question5_audio.mp3"},{id:"prep-6",text:"Learning a new language can be very ______, but it's also very ______.",correctAnswer:["frustrating","rewarding"],explanation:"The process of learning causes frustration (frustrating) and provides rewards (rewarding).",hint:"What kind of experience is it, and what kind of results does it give?",image:"questions/prepositions/pre_6.png",alt:"A person studying a language, showing frustration and then satisfaction from achievement.",isDragAndDrop:!0,dragOptions:["frustrating","frustrated","rewarding","rewarded"],audio:"/assets/audio_questions/prepositions/question6_audio.mp3"},{id:"prep-7",text:"I find history books very ______.",correctAnswer:"interesting",explanation:"The books possess the quality that makes them interesting to read.",hint:"Do the books feel interest?",image:"questions/prepositions/pre_7.png",alt:"A person reading history books with attention and curiosity.",isDragAndDrop:!0,dragOptions:["interested","interesting"],audio:"/assets/audio_questions/prepositions/question7_audio.mp3"},{id:"prep-8",text:"The sudden loud noise was quite ______, and the children felt very ______.",correctAnswer:["alarming","alarmed"],explanation:"The noise caused alarm (alarming), and the children felt alarm (alarmed).",hint:"What was the nature of the noise, and how did they feel?",image:"questions/prepositions/pre_8.png",alt:"A sudden loud noise startling several children in a room.",isDragAndDrop:!0,dragOptions:["alarming","alarmed"],audio:"/assets/audio_questions/prepositions/question8_audio.mp3"},{id:"prep-9",text:"Climbing that mountain was the most ______ experience of my life. I was truly ______ by the view.",correctAnswer:["amazing","amazed"],explanation:"The experience caused amazement (amazing). The person felt amazement (amazed).",hint:"What kind of experience is it, and how does it make you feel?",image:"questions/prepositions/pre_9.png",alt:"A person at the top of a mountain, amazed by the panoramic view.",isDragAndDrop:!0,dragOptions:["amazing","amazed"],audio:"/assets/audio_questions/prepositions/question9_audio.mp3"},{id:"prep-10",text:"The exam results were very ______. The students were all ______.",correctAnswer:["disappointing","disappointed"],explanation:"The results caused disappointment (disappointing). The students felt disappointment (disappointed).",hint:"What kind of results were they, and how did the students feel about them?",image:"questions/prepositions/pre_10.png",alt:"A group of students looking at their exam results with disappointed expressions.",isDragAndDrop:!0,dragOptions:["disappointing","disappointed"],audio:"/assets/audio_questions/prepositions/question10_audio.mp3"}],ls=[{id:"art-1",text:"I use my cell phone _____ messages.",options:["to send","for send","to sending","for sending"],correctAnswer:"to send",explanation:'The infinitive "to send" clearly states the specific purpose for which the cell phone is used. The reason for using the phone is to perform the action of sending messages.',hint:"Are you describing the specific action your phone helps you achieve, or the general activity it's designed for?",image:"questions/gerundsInfinitives/gi-1.png",alt:"A person using their cell phone to send text messages.",audio:"/assets/audio_questions/gerundsInfinitives/question1_audio.mp3"},{id:"art-2",text:"Some Ñ€eople use their phones ______ videos",options:["for watch","to watching","to watch","for watching"],correctAnswer:"to watch",explanation:'Similarly, "to watch" explains the intention or objective behind using their phones. They use the phones for the purpose of watching videos.',hint:"Think about whether you're emphasizing the purposeful act they perform with the phone, or the function/activity the phone provides.",image:"questions/gerundsInfinitives/gi-2.png",alt:"Several people watching videos on their mobile phones.",audio:"/assets/audio_questions/gerundsInfinitives/question2_audio.mp3"},{id:"art-3",text:"People often use their phones _____ photos.",options:["to taking","for taking","for take","to take"],correctAnswer:"to take",explanation:'"To take" indicates the direct purpose of using their phones. The phones are utilized for the action of taking photos.',hint:"Is the emphasis on the action of capturing an image, or the role of the phone in the act of photography?",image:"questions/gerundsInfinitives/gi-3.png",alt:"A person taking a photo with their mobile phone.",audio:"/assets/audio_questions/gerundsInfinitives/question3_audio.mp3"},{id:"art-4",text:"I went to the shop ____ some bread",options:["to buying","for buy","to buy","for buying"],correctAnswer:"to buy",explanation:'"To buy" explains the reason or purpose why I went to the shop. It answers the question "Why did I go to the shop?"',hint:"What was the action I intended?",image:"questions/gerundsInfinitives/gi-4.png",alt:"A person entering a shop to buy bread.",audio:"/assets/audio_questions/gerundsInfinitives/question4_audio.mp3"},{id:"art-5",text:"This machine is used ____ metal.",options:["for cutting","for cut","to cut","to cutting"],correctAnswer:"for cutting",explanation:'"For cutting" describes the function or general purpose of the machine. It tells us what the machine is designed for or used for as an activity.',hint:"What is its main function?",image:"questions/gerundsInfinitives/gi-5.png",alt:"An industrial machine cutting metal in a factory.",audio:"/assets/audio_questions/gerundsInfinitives/question5_audio.mp3"},{id:"art-6",text:"She uses her computer _____ videos.",options:["to edit","for edit","for editing","to editing"],correctAnswer:"for editing",explanation:`"For editing" describes the activity or specific use that she puts her computer to. It's the purpose it serves for her.`,hint:"What activity does she do with it?",image:"questions/gerundsInfinitives/gi-6.png",alt:"A woman editing videos on her laptop computer.",audio:"/assets/audio_questions/gerundsInfinitives/question6_audio.mp3"},{id:"art-7",text:"She bought a new oven ____ cakes.",options:["to bake","to baking","for baking","for bake"],correctAnswer:"to bake",explanation:`"To bake" expresses the specific purpose for which she purchased the oven. The oven's utility is directly linked to the action of baking cakes.`,hint:"Is she buying it so that she can perform an action, or for a general type of cooking?",image:"questions/gerundsInfinitives/gi-7.png",alt:"A woman putting a cake into a new oven.",audio:"/assets/audio_questions/gerundsInfinitives/question7_audio.mp3"},{id:"art-8",text:"He went to the library _____ for his exam.",options:["for studying","for study","to studying","to study"],correctAnswer:"to study",explanation:'"To study" indicates the reason why he went to the library. His purpose in going there was to perform the action of studying.',hint:"What was the reason for his trip? Was it to do something specific, or for a general activity that happens there?",image:"questions/gerundsInfinitives/gi-8.png",alt:"A young man studying for an exam in the library, surrounded by books.",audio:"/assets/audio_questions/gerundsInfinitives/question8_audio.mp3"},{id:"art-9",text:"We use a map _____ our way.",options:["to finding","to find","for find","for finding"],correctAnswer:"to find",explanation:'To find" explains the direct purpose of using a map. The map is used to achieve the action of finding the way.',hint:"Consider if the map helps you achieve a particular outcome, or if its use is related to a broader activity.",image:"questions/gerundsInfinitives/gi-9.png",alt:"A group of people using a map to find the correct way.",audio:"/assets/audio_questions/gerundsInfinitives/question9_audio.mp3"},{id:"art-10",text:"They wear helmets ____ their heads.",options:["for protect","to protect","to protecting","for protecting"],correctAnswer:"to protect",explanation:'"To protect" clearly states the intention or purpose behind wearing helmets. The helmets are worn for the action of protecting.',hint:"Are they wearing them in order to perform a certain action, or for a defensive purpose?",image:"questions/gerundsInfinitives/gi-10.png",alt:"Several people wearing helmets to protect their heads at a construction site or while cycling.",audio:"/assets/audio_questions/gerundsInfinitives/question10_audio.mp3"}],cs=[{id:"mod-1",text:"She _____ swim when she was five.",options:["can","could","may","must"],correctAnswer:"could",explanation:'"Could" Expresses Past Ability.',hint:"Past Ability â†’ could swim.",image:"questions/modalVerbs/modal_question1_child_swimming.png",alt:"A five-year-old girl swimming in a pool, showing past ability.",audio:"/assets/audio_questions/modalVerbs/question1_audio.mp3"},{id:"mod-2",text:"You _____ park here. It's forbidden.",options:["can","could","mustn't","might"],correctAnswer:"mustn't",explanation:`"Mustn't" Expresses Prohibition.`,hint:"Not Allowed At All. You mustn't park here.",image:"questions/modalVerbs/modal_question2_no_parking.png",alt:'A "No parking" sign on a street, indicating parking is forbidden.',audio:"/assets/audio_questions/modalVerbs/question2_audio.mp3"},{id:"mod-3",text:"_____ I open the window?",options:["Must","Should","May","Have to"],correctAnswer:"May",explanation:'"May" Or "Could" Are Polite Requests For Permission.',hint:"Polite Permission. May I open the window?",image:"questions/modalVerbs/modal_question3_window_open.png",alt:"A person asking for permission to open a window in a room.",audio:"/assets/audio_questions/modalVerbs/question3_audio.mp3"},{id:"mod-4",text:"It _____ rain later, so take an umbrella.",options:["can","must","might","should"],correctAnswer:"might",explanation:'"Might" Expresses Weak Possibility.',hint:"Uncertain Forecast â†’ might rain.",image:"questions/modalVerbs/modal_question4_rain_umbrella.png",alt:"An open umbrella under a cloudy sky, suggesting a possibility of rain.",audio:"/assets/audio_questions/modalVerbs/question4_audio.mp3"},{id:"mod-5",text:"Students _____ submit the assignment by Friday.",options:["should","could","might","would"],correctAnswer:"should",explanation:'"Should" Gives Advice/Obligation That Is Not Strict.',hint:"Strong Recommendation. Students should submit.",image:"questions/modalVerbs/modal_question5_student_assignment.png",alt:"A student handing in an assignment before Friday, showing responsibility.",audio:"/assets/audio_questions/modalVerbs/question5_audio.mp3"},{id:"mod-6",text:"He _____ be at home; the lights are on.",options:["can","must","could","may"],correctAnswer:"must",explanation:'"Must" For Logical Deduction (High Certainty).',hint:"Evidence-Based Conclusion. He must be at home.",image:"questions/modalVerbs/modal_question6_house_lights.png",alt:"A house with lights on, suggesting someone is at home.",audio:"/assets/audio_questions/modalVerbs/question6_audio.mp3"},{id:"mod-7",text:"I _____ speak three languages.",options:["can","must","should","might"],correctAnswer:"can",explanation:'"Can" Shows Present Ability.',hint:"Current Capability. I can speak three languages.",image:"questions/modalVerbs/modal_question7_speak_languages.png",alt:"A person speaking in three different languages, representing language ability.",audio:"/assets/audio_questions/modalVerbs/question7_audio.mp3"},{id:"mod-8",text:"We _____ leave early tomorrow; the boss insisted.",options:["have to","could","may","might"],correctAnswer:"have to",explanation:'"Have To" Expresses External Obligation.',hint:"Outside Requirement. We have to leave early.",image:"questions/modalVerbs/modal_question8_boss_meeting.png",alt:"A group of employees preparing to leave the office early as instructed by the boss.",audio:"/assets/audio_questions/modalVerbs/question8_audio.mp3"},{id:"mod-9",text:"You _____ see a doctor if the pain continues.",options:["must","should","can","might"],correctAnswer:"should",explanation:'"Should" Offers Advice.',hint:"Recommendation â†’ should see a doctor.",image:"questions/modalVerbs/modal_question9_doctor_visit.png",alt:"A patient consulting a doctor for persistent pain.",audio:"/assets/audio_questions/modalVerbs/question9_audio.mp3"},{id:"mod-10",text:"Visitors _____ smoke in this areaâ€”it's allowed.",options:["can","must","should","may not"],correctAnswer:"can",explanation:'"Can" States General Permission.',hint:"Allowed Action. Visitors can smoke here.",image:"questions/modalVerbs/modal_question10_smoking_area.png",alt:"A designated smoking area with people smoking legally.",audio:"/assets/audio_questions/modalVerbs/question10_audio.mp3"}],$o=()=>{const{topicId:t}=bt(),s=de(),[o,r]=l.useState(!1),[i,a]=l.useState(0),[n,d]=l.useState(!1),c=ce.find(h=>h.id===t),b=h=>{const k=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,E=h.match(k);return E&&E[2].length===11?E[2]:""},m=h=>{a(h)},w=()=>{r(!0),a(100)};if(!c)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":2,children:"Topic not found"}),e.jsx(Q,{onClick:()=>s("/"),tabIndex:0,"aria-label":"Back to home page",children:"Return to Home"})]});const y=()=>{s(`/game/${t}`)},j=()=>{r(!0),a(100)},C=()=>{r(!1),a(0),d(!1)},S=(()=>{switch(t){case"present-tenses":return tt;case"past-tenses":return rs;case"conditionals":return as;case"prepositions":return is;case"articles":return ls;case"modal-verbs":return cs;default:return tt}})()[0],v=(h=>h.isDragAndDrop?"drag-and-drop":h.isFillInTheBlank?"fill-in-blank":"multiple-choice")(S),x=({question:h})=>e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg my-6",children:[e.jsx("h4",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":4,children:"Example Question:"}),e.jsx("p",{className:"mb-4 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:h.text}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mb-4",children:h.options?.map((k,E)=>e.jsx("button",{className:`p-3 rounded-lg border-2 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
              ${k===h.correctAnswer?"border-success bg-success/10 font-medium":"border-gray-200 hover:border-primary/50"}`,tabIndex:0,"aria-label":`Option ${E+1}: ${k} ${k===h.correctAnswer?"(Correct answer)":""}`,children:k},E))}),e.jsxs("div",{className:"bg-success/10 border border-success/30 p-4 rounded-lg mt-4",children:[e.jsx("h5",{className:"font-bold text-success mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":5,children:"Explanation:"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:h.explanation})]})]}),I=({question:h})=>e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg my-6",children:[e.jsx("h4",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":4,children:"Example Question:"}),e.jsx("p",{className:"mb-4 text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:h.text}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",value:Array.isArray(h.correctAnswer)?h.correctAnswer[0]:h.correctAnswer,readOnly:!0,className:"p-3 border-2 border-success bg-success/10 rounded-lg w-full font-medium focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Type your answer here...",tabIndex:0,"aria-label":"Example answer field showing correct response"})}),e.jsxs("div",{className:"bg-success/10 border border-success/30 p-4 rounded-lg mt-4",children:[e.jsx("h5",{className:"font-bold text-success mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":5,children:"Correct Answer:"}),e.jsx("p",{className:"font-medium mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:Array.isArray(h.correctAnswer)?h.correctAnswer.join(", "):h.correctAnswer}),e.jsx("h5",{className:"font-bold text-success mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":5,children:"Explanation:"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:h.explanation})]})]}),O=({question:h})=>{const k=h.text.split("______"),E=Array.isArray(h.correctAnswer)?h.correctAnswer:[h.correctAnswer];return e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg my-6",children:[e.jsx("h4",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":4,children:"Example Question:"}),e.jsx("div",{className:"mb-4 p-4 bg-white rounded-lg border-2 border-dashed border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Example sentence with filled blanks",children:e.jsx("div",{className:"text-lg text-center",children:k.map((T,z)=>e.jsxs(W.Fragment,{children:[e.jsx("span",{children:T}),z<k.length-1&&e.jsx("span",{className:"inline-block mx-2 px-3 py-1 bg-success/20 border-2 border-success rounded-lg font-medium",children:E[z]||"______"})]},z))})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Available words:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.dragOptions?.map((T,z)=>e.jsx("div",{className:`px-3 py-2 rounded-lg border-2 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500
                  ${E.includes(T)?"border-success bg-success/10 font-medium":"border-gray-200 bg-gray-50"}`,tabIndex:0,role:"text","aria-label":`Word option ${z+1}: ${T} ${E.includes(T)?"(Correct answer)":""}`,children:T},z))})]}),e.jsxs("div",{className:"bg-success/10 border border-success/30 p-4 rounded-lg mt-4",children:[e.jsx("h5",{className:"font-bold text-success mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":5,children:"Explanation:"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:h.explanation})]})]})},N=(h,k)=>{switch(h){case"multiple-choice":return`In this game, you will practice using ${k.toLowerCase()} correctly in different contexts. You'll be shown sentences with missing words and need to select the correct option from multiple choices.`;case"fill-in-blank":return`In this game, you will practice using ${k.toLowerCase()} correctly by typing the complete sentences. You'll be given sentence structures with hints, and you need to write the full correct sentence.`;case"drag-and-drop":return`In this game, you will practice using ${k.toLowerCase()} correctly by dragging words into the right positions. You'll be shown sentences with blank spaces and need to drag the correct words from the available options.`;default:return`In this game, you will practice using ${k.toLowerCase()} correctly in different contexts.`}},P=h=>{const k=["You'll receive immediate feedback on your answers","If you're stuck, you can use the hint button","Track your progress with the progress bar","See your final score at the end of the game"];switch(h){case"drag-and-drop":return[...k,"Drag words from the options area to the blank spaces","Use keyboard shortcuts: Ctrl+1/2/3 to select words, 1/2 to place them"];case"fill-in-blank":return[...k,"Type complete sentences using proper grammar","Press Enter to submit your answer"];default:return k}},u=c.youtubeUrl?b(c.youtubeUrl):"";return e.jsxs("div",{className:"max-w-3xl mx-auto animate-fade-in",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-6 text-center focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:[c.title," - Tutorial"]}),e.jsxs(ge,{className:"mb-8",children:[e.jsxs(me,{children:[e.jsxs("div",{className:"aspect-video bg-gray-800 rounded-lg mb-4 relative overflow-hidden",children:[n?e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"text-xl mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Video no disponible"}),e.jsx("div",{className:"mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"El video de tutorial no se pudo cargar"}),e.jsx(Q,{variant:"primary",icon:e.jsx(co,{}),onClick:C,tabIndex:0,"aria-label":"Retry loading tutorial video",children:"Reintentar"})]})}):c.youtubeUrl&&u?e.jsx(Lo,{videoId:u,onProgress:m,onComplete:w,className:"w-full h-full"}):e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"text-xl mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Tutorial Video"}),e.jsxs("div",{className:"mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`Loading progress: ${i} percent`,children:["Loading ",i,"%..."]}),i<100&&e.jsx(Q,{variant:"primary",icon:e.jsx(Yt,{}),onClick:j,tabIndex:0,"aria-label":"Skip tutorial and continue to game",children:"Skip Tutorial"})]})}),!o&&!n&&e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-primary transition-all duration-300",style:{width:`${i}%`},role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Tutorial progress: ${i} percent complete`})]}),c.transcript&&e.jsx(Oo,{transcript:c.transcript,className:"mt-6"}),e.jsx("h3",{className:"text-xl font-bold mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"How this Game Works"}),e.jsx("p",{className:"mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:N(v,c.title)}),v==="multiple-choice"&&e.jsx(x,{question:S}),v==="fill-in-blank"&&e.jsx(I,{question:S}),v==="drag-and-drop"&&e.jsx(O,{question:S}),e.jsx("h3",{className:"text-xl font-bold mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Game Features:"}),e.jsx("ul",{className:"list-disc pl-5 space-y-2 mb-4",children:P(v).map((h,k)=>e.jsx("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:h},k))}),e.jsxs("p",{className:"font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:["Ready to start practicing ",c.title.toLowerCase(),"?"]})]}),e.jsxs(es,{className:"flex justify-between",children:[e.jsx(Q,{variant:"custom",icon:e.jsx(ot,{className:"text-white"}),onClick:()=>s("/"),className:"h-[40px] w-[225px] bg-blue-500 hover:bg-blue-600 text-white border-2 border-black",tabIndex:0,"aria-label":"Back to topics page",children:"Back to Topics"}),e.jsx(Q,{variant:"custom",icon:e.jsx(io,{}),onClick:y,disabled:!o,className:`h-[40px] w-[225px] border-2 border-black ${o?"bg-blue-500 hover:bg-blue-600 text-white":"bg-gray-400 border-gray-500 cursor-not-allowed text-gray-200"}`,tabIndex:0,"aria-label":o?"Start practice game":"You must watch the tutorial first",children:o?"Start Game":"Watch Tutorial First"})]})]})]})},Do="/assets/art_1-D0Rhqea2.png",zo=Object.freeze(Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"})),Bo="/assets/art_2-BTypWbiN.png",Ro=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),Fo="/assets/art_4-CKgjGiY3.png",Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),Ho="/assets/art_6-B-YeVNsG.png",Wo=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"})),Qo="/assets/con_1-BqEacn5T.png",Vo=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),Go="/assets/con_10-BCE2MYDh.png",Yo=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"})),Ko="/assets/con_2-DFOZakJQ.png",Jo=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Xo="/assets/con_3-D68zNDnQ.png",Zo=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),en="/assets/con_4-xy8OwI_x.png",tn=Object.freeze(Object.defineProperty({__proto__:null,default:en},Symbol.toStringTag,{value:"Module"})),sn="/assets/con_5-D6Z3a-Dp.png",on=Object.freeze(Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"})),nn="/assets/con_6-DO8YsT5d.png",rn=Object.freeze(Object.defineProperty({__proto__:null,default:nn},Symbol.toStringTag,{value:"Module"})),an="/assets/con_7-Cy4PrHSB.png",ln=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),cn="/assets/con_8-1XM6TjRi.png",dn=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),un="/assets/con_9-ByOu7k8L.png",gn=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),mn="/assets/gi-1-sIb1Y5eC.png",fn=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"})),hn="/assets/gi-10-BGKLWWVv.png",pn=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),xn="/assets/gi-2-CDw7N9Vz.png",bn=Object.freeze(Object.defineProperty({__proto__:null,default:xn},Symbol.toStringTag,{value:"Module"})),yn="/assets/gi-3-D7iepHEu.png",vn=Object.freeze(Object.defineProperty({__proto__:null,default:yn},Symbol.toStringTag,{value:"Module"})),wn="/assets/gi-4-ByX0aJKk.png",_n=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"})),jn="/assets/gi-5-meDP3wEV.png",Nn=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"})),kn="/assets/gi-6-D0BcHMcD.png",In=Object.freeze(Object.defineProperty({__proto__:null,default:kn},Symbol.toStringTag,{value:"Module"})),Sn="/assets/gi-7-F1ev79Sq.png",Tn=Object.freeze(Object.defineProperty({__proto__:null,default:Sn},Symbol.toStringTag,{value:"Module"})),An="/assets/gi-8-B9ff5sJE.png",En=Object.freeze(Object.defineProperty({__proto__:null,default:An},Symbol.toStringTag,{value:"Module"})),Pn="/assets/gi-9-BmLkNMNB.png",Cn=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"})),Mn="/assets/modal_question10_smoking_area-DE1fS1SW.png",qn=Object.freeze(Object.defineProperty({__proto__:null,default:Mn},Symbol.toStringTag,{value:"Module"})),Ln="/assets/modal_question1_child_swimming-B-HnGSVh.png",On=Object.freeze(Object.defineProperty({__proto__:null,default:Ln},Symbol.toStringTag,{value:"Module"})),$n="/assets/modal_question2_no_parking-DxZ94fnP.png",Dn=Object.freeze(Object.defineProperty({__proto__:null,default:$n},Symbol.toStringTag,{value:"Module"})),zn="/assets/modal_question3_window_open-_2Pimqxm.png",Bn=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"})),Rn="/assets/modal_question4_rain_umbrella-BAGa8cDb.png",Fn=Object.freeze(Object.defineProperty({__proto__:null,default:Rn},Symbol.toStringTag,{value:"Module"})),Un="/assets/modal_question5_student_assignment-DRMGepPO.png",Hn=Object.freeze(Object.defineProperty({__proto__:null,default:Un},Symbol.toStringTag,{value:"Module"})),Wn="/assets/modal_question6_house_lights-f5tQxAet.png",Qn=Object.freeze(Object.defineProperty({__proto__:null,default:Wn},Symbol.toStringTag,{value:"Module"})),Vn="/assets/modal_question7_speak_languages-C_PYZwAb.png",Gn=Object.freeze(Object.defineProperty({__proto__:null,default:Vn},Symbol.toStringTag,{value:"Module"})),Yn="/assets/modal_question8_boss_meeting-Dw6gSa8F.png",Kn=Object.freeze(Object.defineProperty({__proto__:null,default:Yn},Symbol.toStringTag,{value:"Module"})),Jn="/assets/modal_question9_doctor_visit-qpDJXkak.png",Xn=Object.freeze(Object.defineProperty({__proto__:null,default:Jn},Symbol.toStringTag,{value:"Module"})),Zn="/assets/pat-1-TZZkIsM6.png",er=Object.freeze(Object.defineProperty({__proto__:null,default:Zn},Symbol.toStringTag,{value:"Module"})),tr="/assets/pat-10-BvswegKC.png",sr=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"})),or="/assets/pat-2-COGVFqF6.png",nr=Object.freeze(Object.defineProperty({__proto__:null,default:or},Symbol.toStringTag,{value:"Module"})),rr="/assets/pat-3-Mdis5vkb.png",ar=Object.freeze(Object.defineProperty({__proto__:null,default:rr},Symbol.toStringTag,{value:"Module"})),ir="/assets/pat-4-CiAzStr-.png",lr=Object.freeze(Object.defineProperty({__proto__:null,default:ir},Symbol.toStringTag,{value:"Module"})),cr="/assets/pat-5-B9z-xeeY.png",dr=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"})),ur="/assets/pat-6-NF2Q2E4n.png",gr=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"})),mr="/assets/pat-7-CvbmI_Pp.png",fr=Object.freeze(Object.defineProperty({__proto__:null,default:mr},Symbol.toStringTag,{value:"Module"})),hr="/assets/pat-8-DqMjY6jf.png",pr=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),xr="/assets/pat-9-D9pcMMD7.png",br=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"})),yr="/assets/pre_1-Sr494Wt6.png",vr=Object.freeze(Object.defineProperty({__proto__:null,default:yr},Symbol.toStringTag,{value:"Module"})),wr="/assets/pre_10-CNG5--9t.png",_r=Object.freeze(Object.defineProperty({__proto__:null,default:wr},Symbol.toStringTag,{value:"Module"})),jr="/assets/pre_2-BXiJmuT0.png",Nr=Object.freeze(Object.defineProperty({__proto__:null,default:jr},Symbol.toStringTag,{value:"Module"})),kr="/assets/pre_3-DQw2kTkV.png",Ir=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"})),Sr="/assets/pre_4-Dy7Zwinb.png",Tr=Object.freeze(Object.defineProperty({__proto__:null,default:Sr},Symbol.toStringTag,{value:"Module"})),Ar="/assets/pre_5-CzWaGobR.png",Er=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"})),Pr="/assets/pre_6-BkM3u8TH.png",Cr=Object.freeze(Object.defineProperty({__proto__:null,default:Pr},Symbol.toStringTag,{value:"Module"})),Mr="/assets/pre_7-Bg_T4IE1.png",qr=Object.freeze(Object.defineProperty({__proto__:null,default:Mr},Symbol.toStringTag,{value:"Module"})),Lr="/assets/pre_8-Cb07hONL.png",Or=Object.freeze(Object.defineProperty({__proto__:null,default:Lr},Symbol.toStringTag,{value:"Module"})),$r="/assets/pre_9-uiWzdGYD.png",Dr=Object.freeze(Object.defineProperty({__proto__:null,default:$r},Symbol.toStringTag,{value:"Module"})),zr="/assets/pt-1-C0nlA6eD.png",Br=Object.freeze(Object.defineProperty({__proto__:null,default:zr},Symbol.toStringTag,{value:"Module"})),Rr="/assets/pt-10-DWj-N32S.png",Fr=Object.freeze(Object.defineProperty({__proto__:null,default:Rr},Symbol.toStringTag,{value:"Module"})),Ur="/assets/pt-2-Cdu_Vfuo.png",Hr=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"})),Wr="/assets/pt-3-OPd9EFZn.png",Qr=Object.freeze(Object.defineProperty({__proto__:null,default:Wr},Symbol.toStringTag,{value:"Module"})),Vr="/assets/pt-4-jfNc8XV_.png",Gr=Object.freeze(Object.defineProperty({__proto__:null,default:Vr},Symbol.toStringTag,{value:"Module"})),Yr="/assets/pt-5-CV8YQ7aX.png",Kr=Object.freeze(Object.defineProperty({__proto__:null,default:Yr},Symbol.toStringTag,{value:"Module"})),Jr="/assets/pt-6-B_Iucxi-.png",Xr=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"})),Zr="/assets/pt-7-DqA0mXQZ.png",ea=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"})),ta="/assets/pt-8-BCCKEkz8.png",sa=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"})),oa="/assets/pt-9-DcNspjNE.png",na=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"})),ds=l.createContext(void 0),ra=({children:t})=>{const[s,o]=l.useState({});l.useEffect(()=>{const n=localStorage.getItem("questionStatuses");n&&o(JSON.parse(n))},[]),l.useEffect(()=>{localStorage.setItem("questionStatuses",JSON.stringify(s))},[s]);const r=(n,d,c)=>{o(b=>({...b,[n]:{...b[n],[d]:c}}))},i=(n,d)=>s[n]?.[d]||"unanswered",a=n=>{o(d=>{const{[n]:c,...b}=d;return b})};return e.jsx(ds.Provider,{value:{questionStatuses:s,updateQuestionStatus:r,getQuestionStatus:i,resetQuestionStatuses:a},children:t})},jt=()=>{const t=l.useContext(ds);if(t===void 0)throw new Error("useQuestionStatus must be used within a QuestionStatusProvider");return t},aa=({topicId:t,totalQuestions:s,currentQuestionIndex:o,onQuestionSelect:r,className:i=""})=>{const{getQuestionStatus:a}=jt(),n=d=>{const c=a(t,d),b="w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2";switch(c){case"correct":return`${b} bg-[rgb(var(--color-success))] text-white hover:bg-green-600 focus:ring-[rgb(var(--color-success))/0.5]`;case"incorrect":return`${b} bg-[rgb(var(--color-error))] text-white hover:bg-red-600 focus:ring-[rgb(var(--color-error))/0.5]`;default:return`${b} border-2 ${d===o?"border-[rgb(var(--color-primary))] bg-[rgb(var(--color-primary))/0.1]":"border-gray-300"} text-gray-700 hover:border-[rgb(var(--color-primary))] hover:text-[rgb(var(--color-primary))] focus:ring-[rgb(var(--color-primary))/0.5]`}};return e.jsx("div",{className:`flex items-center justify-center space-x-2 ${i}`,role:"navigation","aria-label":"Question navigation",children:Array.from({length:s},(d,c)=>{const b=a(t,c);return e.jsx("button",{onClick:()=>r(c),className:n(c),"aria-label":`Pregunta ${c+1}: ${b}`,title:`Pregunta ${c+1}`,tabIndex:0,children:c+1},c)})})},us=l.createContext(void 0),ia=({children:t})=>{const[s,o]=l.useState([]),[r,i]=l.useState([]),{user:a}=fe(),n=()=>{if(!a?._id)return[];const y=localStorage.getItem(`achievements_shown_${a._id}`);return y?JSON.parse(y):[]},d=y=>{a?._id&&localStorage.setItem(`achievements_shown_${a._id}`,JSON.stringify(y))},c=async y=>{try{console.log("ðŸ” Checking for new achievements..."),console.log("ðŸŽ¯ Triggering backend achievement check...");const j=await Ye.checkAchievements();console.log("ðŸŽ¯ Backend check response:",j),console.log("ðŸ”” Getting unnotified achievements...");const C=await Ye.getUnnotifiedAchievements();if(console.log("ðŸ”” Unnotified response:",C),C.success&&C.data){const _=C.data;if(_.length>0){console.log("ðŸ† New achievements from backend:",_.map(g=>g.name));const M=n();console.log("ðŸ‘ï¸ Already shown achievements:",M);const S=_.filter(g=>!M.includes(g.id));return console.log("âœ¨ Truly new achievements to show:",S.map(g=>g.name)),S.length>0&&(console.log("ðŸ“ Adding to pending notifications..."),i(g=>{const v=[...g,...S];return console.log("ðŸ“ Total pending after update:",v.length),v})),S}else console.log("ðŸ”” No unnotified achievements found")}else console.log("âŒ Failed to get unnotified achievements:",C);return[]}catch(j){return console.error("âŒ Error checking for new achievements:",j),[]}},b=async y=>{try{await Ye.markAsNotified([y]);const C=[...n(),y];d(C),i(_=>_.filter(M=>M.id!==y))}catch(j){console.error("Error marking achievement as notified:",j),i(C=>C.filter(_=>_.id!==y))}},m=()=>{i([])};l.useEffect(()=>{(async()=>{if(a)try{const j=await Ye.getUserAchievements(!0);j.success&&j.data&&o(j.data),await c()}catch(j){console.error("Error loading achievements:",j)}else o([]),i([])})()},[a]);const w={achievements:s,pendingNotifications:r,checkForNewAchievements:c,markNotificationShown:b,clearAllNotifications:m};return e.jsx(us.Provider,{value:w,children:t})},Nt=()=>{const t=l.useContext(us);if(t===void 0)throw new Error("useAchievements must be used within an AchievementProvider");return t},la=({achievement:t,isVisible:s,onClose:o,autoCloseDelay:r=5e3})=>{const[i,a]=l.useState(!1);l.useEffect(()=>{if(s&&t){a(!0);const m=setTimeout(()=>{n()},r);return()=>clearTimeout(m)}},[s,t,r]);const n=()=>{a(!1),setTimeout(()=>{o()},300)};if(!s||!t)return null;const c=(()=>{switch(t.category){case"medal":return{gradient:"from-yellow-400 to-yellow-600",border:"border-yellow-300",icon:De,bgColor:"bg-yellow-50"};case"performance":return{gradient:"from-purple-400 to-purple-600",border:"border-purple-300",icon:Kt,bgColor:"bg-purple-50"};case"completion":return{gradient:"from-green-400 to-green-600",border:"border-green-300",icon:Ks,bgColor:"bg-green-50"};default:return{gradient:"from-blue-400 to-blue-600",border:"border-blue-300",icon:De,bgColor:"bg-blue-50"}}})(),b=c.icon;return e.jsx("div",{className:`fixed top-4 right-4 z-50 transition-all duration-300 transform ${i?"translate-x-0 opacity-100":"translate-x-full opacity-0"}`,style:{maxWidth:"350px"},children:e.jsxs("div",{className:`bg-white rounded-lg shadow-xl border-2 ${c.border} overflow-hidden`,children:[e.jsxs("div",{className:`bg-gradient-to-r ${c.gradient} px-4 py-2 text-white relative`,children:[e.jsx("button",{onClick:n,className:"absolute top-2 right-2 text-white hover:text-gray-200 transition-colors p-1 focus:outline-none focus:ring-2 focus:ring-white rounded","aria-label":"Close achievement notification",tabIndex:0,children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-center space-x-2 pr-8",children:[e.jsx("div",{className:"p-1 bg-white bg-opacity-20 rounded-full",children:e.jsx(b,{className:"w-5 h-5"})}),e.jsx("div",{children:e.jsx("h3",{className:"text-sm font-bold focus:outline-none focus:ring-2 focus:ring-white rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Achievement Unlocked!"})})]})]}),e.jsx("div",{className:`p-4 ${c.bgColor}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-3xl flex-shrink-0",children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 truncate focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":4,children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:t.description}),e.jsx("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-white bg-opacity-60 text-gray-700 mt-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"text","aria-label":`Achievement category: ${t.category==="medal"?"Medal":t.category.charAt(0).toUpperCase()+t.category.slice(1)}`,children:t.category==="medal"?"Medal":t.category.charAt(0).toUpperCase()+t.category.slice(1)})]})]})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-yellow-300 rounded-full opacity-70 animate-ping"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 bg-yellow-300 rounded-full opacity-50 animate-pulse"})]})})},Lt=({enabled:t=!0})=>{const{pendingNotifications:s,markNotificationShown:o}=Nt(),[r,i]=l.useState(null),[a,n]=l.useState(!1),[d,c]=l.useState([]);l.useEffect(()=>{t&&s.length>0&&c(m=>{const w=s.filter(y=>!m.some(j=>j.id===y.id)&&(!r||r.id!==y.id));return[...m,...w]})},[s,t,r]),l.useEffect(()=>{if(t&&d.length>0&&!r){const m=d[0];i(m),n(!0),c(w=>w.slice(1))}},[d,r,t]);const b=async()=>{r&&(n(!1),await o(r.id),setTimeout(()=>{i(null)},500))};return t?e.jsx(la,{achievement:r,isVisible:a,onClose:b,autoCloseDelay:4e3}):null};function gs(t){var s,o,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(s=0;s<i;s++)t[s]&&(o=gs(t[s]))&&(r&&(r+=" "),r+=o)}else for(o in t)t[o]&&(r&&(r+=" "),r+=o);return r}function ke(){for(var t,s,o=0,r="",i=arguments.length;o<i;o++)(t=arguments[o])&&(s=gs(t))&&(r&&(r+=" "),r+=s);return r}function ca(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",s.firstChild?s.insertBefore(o,s.firstChild):s.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}ca(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Re=t=>typeof t=="number"&&!isNaN(t),Ie=t=>typeof t=="string",ye=t=>typeof t=="function",da=t=>Ie(t)||Re(t),ft=t=>Ie(t)||ye(t)?t:null,ua=(t,s)=>t===!1||Re(t)&&t>0?t:s,ht=t=>l.isValidElement(t)||Ie(t)||ye(t)||Re(t);function ga(t,s,o=300){let{scrollHeight:r,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${o}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(s,o)})})}function ma({enter:t,exit:s,appendPosition:o=!1,collapse:r=!0,collapseDuration:i=300}){return function({children:a,position:n,preventExitTransition:d,done:c,nodeRef:b,isIn:m,playToast:w}){let y=o?`${t}--${n}`:t,j=o?`${s}--${n}`:s,C=l.useRef(0);return l.useLayoutEffect(()=>{let _=b.current,M=y.split(" "),S=g=>{g.target===b.current&&(w(),_.removeEventListener("animationend",S),_.removeEventListener("animationcancel",S),C.current===0&&g.type!=="animationcancel"&&_.classList.remove(...M))};_.classList.add(...M),_.addEventListener("animationend",S),_.addEventListener("animationcancel",S)},[]),l.useEffect(()=>{let _=b.current,M=()=>{_.removeEventListener("animationend",M),r?ga(_,c,i):c()};m||(d?M():(C.current=1,_.className+=` ${j}`,_.addEventListener("animationend",M)))},[m]),W.createElement(W.Fragment,null,a)}}function Ot(t,s){return{content:ms(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:s}}function ms(t,s,o=!1){return l.isValidElement(t)&&!Ie(t.type)?l.cloneElement(t,{closeToast:s.closeToast,toastProps:s,data:s.data,isPaused:o}):ye(t)?t({closeToast:s.closeToast,toastProps:s,data:s.data,isPaused:o}):t}function fa({closeToast:t,theme:s,ariaLabel:o="close"}){return W.createElement("button",{className:`Toastify__close-button Toastify__close-button--${s}`,type:"button",onClick:r=>{r.stopPropagation(),t(!0)},"aria-label":o},W.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},W.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function ha({delay:t,isRunning:s,closeToast:o,type:r="default",hide:i,className:a,controlledProgress:n,progress:d,rtl:c,isIn:b,theme:m}){let w=i||n&&d===0,y={animationDuration:`${t}ms`,animationPlayState:s?"running":"paused"};n&&(y.transform=`scaleX(${d})`);let j=ke("Toastify__progress-bar",n?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":c}),C=ye(a)?a({rtl:c,type:r,defaultClassName:j}):ke(j,a),_={[n&&d>=1?"onTransitionEnd":"onAnimationEnd"]:n&&d<1?null:()=>{b&&o()}};return W.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":w},W.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${m} Toastify__progress-bar--${r}`}),W.createElement("div",{role:"progressbar","aria-hidden":w?"true":"false","aria-label":"notification timer",className:C,style:y,..._}))}var pa=1,fs=()=>`${pa++}`;function xa(t,s,o){let r=1,i=0,a=[],n=[],d=s,c=new Map,b=new Set,m=g=>(b.add(g),()=>b.delete(g)),w=()=>{n=Array.from(c.values()),b.forEach(g=>g())},y=({containerId:g,toastId:v,updateId:x})=>{let I=g?g!==t:t!==1,O=c.has(v)&&x==null;return I||O},j=(g,v)=>{c.forEach(x=>{var I;(v==null||v===x.props.toastId)&&((I=x.toggle)==null||I.call(x,g))})},C=g=>{var v,x;(x=(v=g.props)==null?void 0:v.onClose)==null||x.call(v,g.removalReason),g.isActive=!1},_=g=>{if(g==null)c.forEach(C);else{let v=c.get(g);v&&C(v)}w()},M=()=>{i-=a.length,a=[]},S=g=>{var v,x;let{toastId:I,updateId:O}=g.props,N=O==null;g.staleId&&c.delete(g.staleId),g.isActive=!0,c.set(I,g),w(),o(Ot(g,N?"added":"updated")),N&&((x=(v=g.props).onOpen)==null||x.call(v))};return{id:t,props:d,observe:m,toggle:j,removeToast:_,toasts:c,clearQueue:M,buildToast:(g,v)=>{if(y(v))return;let{toastId:x,updateId:I,data:O,staleId:N,delay:P}=v,u=I==null;u&&i++;let h={...d,style:d.toastStyle,key:r++,...Object.fromEntries(Object.entries(v).filter(([E,T])=>T!=null)),toastId:x,updateId:I,data:O,isIn:!1,className:ft(v.className||d.toastClassName),progressClassName:ft(v.progressClassName||d.progressClassName),autoClose:v.isLoading?!1:ua(v.autoClose,d.autoClose),closeToast(E){c.get(x).removalReason=E,_(x)},deleteToast(){let E=c.get(x);if(E!=null){if(o(Ot(E,"removed")),c.delete(x),i--,i<0&&(i=0),a.length>0){S(a.shift());return}w()}}};h.closeButton=d.closeButton,v.closeButton===!1||ht(v.closeButton)?h.closeButton=v.closeButton:v.closeButton===!0&&(h.closeButton=ht(d.closeButton)?d.closeButton:!0);let k={content:g,props:h,staleId:N};d.limit&&d.limit>0&&i>d.limit&&u?a.push(k):Re(P)?setTimeout(()=>{S(k)},P):S(k)},setProps(g){d=g},setToggle:(g,v)=>{let x=c.get(g);x&&(x.toggle=v)},isToastActive:g=>{var v;return(v=c.get(g))==null?void 0:v.isActive},getSnapshot:()=>n}}var te=new Map,ze=[],pt=new Set,ba=t=>pt.forEach(s=>s(t)),hs=()=>te.size>0;function ya(){ze.forEach(t=>xs(t.content,t.options)),ze=[]}var va=(t,{containerId:s})=>{var o;return(o=te.get(s||1))==null?void 0:o.toasts.get(t)};function ps(t,s){var o;if(s)return!!((o=te.get(s))!=null&&o.isToastActive(t));let r=!1;return te.forEach(i=>{i.isToastActive(t)&&(r=!0)}),r}function wa(t){if(!hs()){ze=ze.filter(s=>t!=null&&s.options.toastId!==t);return}if(t==null||da(t))te.forEach(s=>{s.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let s=te.get(t.containerId);s?s.removeToast(t.id):te.forEach(o=>{o.removeToast(t.id)})}}var _a=(t={})=>{te.forEach(s=>{s.props.limit&&(!t.containerId||s.id===t.containerId)&&s.clearQueue()})};function xs(t,s){ht(t)&&(hs()||ze.push({content:t,options:s}),te.forEach(o=>{o.buildToast(t,s)}))}function ja(t){var s;(s=te.get(t.containerId||1))==null||s.setToggle(t.id,t.fn)}function bs(t,s){te.forEach(o=>{(s==null||!(s!=null&&s.containerId)||s?.containerId===o.id)&&o.toggle(t,s?.id)})}function Na(t){let s=t.containerId||1;return{subscribe(o){let r=xa(s,t,ba);te.set(s,r);let i=r.observe(o);return ya(),()=>{i(),te.delete(s)}},setProps(o){var r;(r=te.get(s))==null||r.setProps(o)},getSnapshot(){var o;return(o=te.get(s))==null?void 0:o.getSnapshot()}}}function ka(t){return pt.add(t),()=>{pt.delete(t)}}function Ia(t){return t&&(Ie(t.toastId)||Re(t.toastId))?t.toastId:fs()}function Fe(t,s){return xs(t,s),s.toastId}function nt(t,s){return{...s,type:s&&s.type||t,toastId:Ia(s)}}function rt(t){return(s,o)=>Fe(s,nt(t,o))}function $(t,s){return Fe(t,nt("default",s))}$.loading=(t,s)=>Fe(t,nt("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s}));function Sa(t,{pending:s,error:o,success:r},i){let a;s&&(a=Ie(s)?$.loading(s,i):$.loading(s.render,{...i,...s}));let n={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(b,m,w)=>{if(m==null){$.dismiss(a);return}let y={type:b,...n,...i,data:w},j=Ie(m)?{render:m}:m;return a?$.update(a,{...y,...j}):$(j.render,{...y,...j}),w},c=ye(t)?t():t;return c.then(b=>d("success",r,b)).catch(b=>d("error",o,b)),c}$.promise=Sa;$.success=rt("success");$.info=rt("info");$.error=rt("error");$.warning=rt("warning");$.warn=$.warning;$.dark=(t,s)=>Fe(t,nt("default",{theme:"dark",...s}));function Ta(t){wa(t)}$.dismiss=Ta;$.clearWaitingQueue=_a;$.isActive=ps;$.update=(t,s={})=>{let o=va(t,s);if(o){let{props:r,content:i}=o,a={delay:100,...r,...s,toastId:s.toastId||t,updateId:fs()};a.toastId!==t&&(a.staleId=t);let n=a.render||i;delete a.render,Fe(n,a)}};$.done=t=>{$.update(t,{progress:1})};$.onChange=ka;$.play=t=>bs(!0,t);$.pause=t=>bs(!1,t);function Aa(t){var s;let{subscribe:o,getSnapshot:r,setProps:i}=l.useRef(Na(t)).current;i(t);let a=(s=l.useSyncExternalStore(o,r,r))==null?void 0:s.slice();function n(d){if(!a)return[];let c=new Map;return t.newestOnTop&&a.reverse(),a.forEach(b=>{let{position:m}=b.props;c.has(m)||c.set(m,[]),c.get(m).push(b)}),Array.from(c,b=>d(b[0],b[1]))}return{getToastToRender:n,isToastActive:ps,count:a?.length}}function Ea(t){let[s,o]=l.useState(!1),[r,i]=l.useState(!1),a=l.useRef(null),n=l.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:d,pauseOnHover:c,closeToast:b,onClick:m,closeOnClick:w}=t;ja({id:t.toastId,containerId:t.containerId,fn:o}),l.useEffect(()=>{if(t.pauseOnFocusLoss)return y(),()=>{j()}},[t.pauseOnFocusLoss]);function y(){document.hasFocus()||S(),window.addEventListener("focus",M),window.addEventListener("blur",S)}function j(){window.removeEventListener("focus",M),window.removeEventListener("blur",S)}function C(N){if(t.draggable===!0||t.draggable===N.pointerType){g();let P=a.current;n.canCloseOnClick=!0,n.canDrag=!0,P.style.transition="none",t.draggableDirection==="x"?(n.start=N.clientX,n.removalDistance=P.offsetWidth*(t.draggablePercent/100)):(n.start=N.clientY,n.removalDistance=P.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function _(N){let{top:P,bottom:u,left:h,right:k}=a.current.getBoundingClientRect();N.nativeEvent.type!=="touchend"&&t.pauseOnHover&&N.clientX>=h&&N.clientX<=k&&N.clientY>=P&&N.clientY<=u?S():M()}function M(){o(!0)}function S(){o(!1)}function g(){n.didMove=!1,document.addEventListener("pointermove",x),document.addEventListener("pointerup",I)}function v(){document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",I)}function x(N){let P=a.current;if(n.canDrag&&P){n.didMove=!0,s&&S(),t.draggableDirection==="x"?n.delta=N.clientX-n.start:n.delta=N.clientY-n.start,n.start!==N.clientX&&(n.canCloseOnClick=!1);let u=t.draggableDirection==="x"?`${n.delta}px, var(--y)`:`0, calc(${n.delta}px + var(--y))`;P.style.transform=`translate3d(${u},0)`,P.style.opacity=`${1-Math.abs(n.delta/n.removalDistance)}`}}function I(){v();let N=a.current;if(n.canDrag&&n.didMove&&N){if(n.canDrag=!1,Math.abs(n.delta)>n.removalDistance){i(!0),t.closeToast(!0),t.collapseAll();return}N.style.transition="transform 0.2s, opacity 0.2s",N.style.removeProperty("transform"),N.style.removeProperty("opacity")}}let O={onPointerDown:C,onPointerUp:_};return d&&c&&(O.onMouseEnter=S,t.stacked||(O.onMouseLeave=M)),w&&(O.onClick=N=>{m&&m(N),n.canCloseOnClick&&b(!0)}),{playToast:M,pauseToast:S,isRunning:s,preventExitTransition:r,toastRef:a,eventHandlers:O}}var Pa=typeof window<"u"?l.useLayoutEffect:l.useEffect,at=({theme:t,type:s,isLoading:o,...r})=>W.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${s})`,...r});function Ca(t){return W.createElement(at,{...t},W.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Ma(t){return W.createElement(at,{...t},W.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function qa(t){return W.createElement(at,{...t},W.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function La(t){return W.createElement(at,{...t},W.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Oa(){return W.createElement("div",{className:"Toastify__spinner"})}var xt={info:Ma,warning:Ca,success:qa,error:La,spinner:Oa},$a=t=>t in xt;function Da({theme:t,type:s,isLoading:o,icon:r}){let i=null,a={theme:t,type:s};return r===!1||(ye(r)?i=r({...a,isLoading:o}):l.isValidElement(r)?i=l.cloneElement(r,a):o?i=xt.spinner():$a(s)&&(i=xt[s](a))),i}var za=t=>{let{isRunning:s,preventExitTransition:o,toastRef:r,eventHandlers:i,playToast:a}=Ea(t),{closeButton:n,children:d,autoClose:c,onClick:b,type:m,hideProgressBar:w,closeToast:y,transition:j,position:C,className:_,style:M,progressClassName:S,updateId:g,role:v,progress:x,rtl:I,toastId:O,deleteToast:N,isIn:P,isLoading:u,closeOnClick:h,theme:k,ariaLabel:E}=t,T=ke("Toastify__toast",`Toastify__toast-theme--${k}`,`Toastify__toast--${m}`,{"Toastify__toast--rtl":I},{"Toastify__toast--close-on-click":h}),z=ye(_)?_({rtl:I,position:C,type:m,defaultClassName:T}):ke(T,_),D=Da(t),K=!!x||!c,Z={closeToast:y,type:m,theme:k},J=null;return n===!1||(ye(n)?J=n(Z):l.isValidElement(n)?J=l.cloneElement(n,Z):J=fa(Z)),W.createElement(j,{isIn:P,done:N,position:C,preventExitTransition:o,nodeRef:r,playToast:a},W.createElement("div",{id:O,tabIndex:0,onClick:b,"data-in":P,className:z,...i,style:M,ref:r,...P&&{role:v,"aria-label":E}},D!=null&&W.createElement("div",{className:ke("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!u})},D),ms(d,t,!s),J,!t.customProgressBar&&W.createElement(ha,{...g&&!K?{key:`p-${g}`}:{},rtl:I,theme:k,delay:c,isRunning:s,isIn:P,closeToast:y,hide:w,type:m,className:S,controlledProgress:K,progress:x||0})))},Ba=(t,s=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:s}),Ra=ma(Ba("bounce",!0)),Fa={position:"top-right",transition:Ra,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function ys(t){let s={...Fa,...t},o=t.stacked,[r,i]=l.useState(!0),a=l.useRef(null),{getToastToRender:n,isToastActive:d,count:c}=Aa(s),{className:b,style:m,rtl:w,containerId:y,hotKeys:j}=s;function C(M){let S=ke("Toastify__toast-container",`Toastify__toast-container--${M}`,{"Toastify__toast-container--rtl":w});return ye(b)?b({position:M,rtl:w,defaultClassName:S}):ke(S,ft(b))}function _(){o&&(i(!0),$.play())}return Pa(()=>{var M;if(o){let S=a.current.querySelectorAll('[data-in="true"]'),g=12,v=(M=s.position)==null?void 0:M.includes("top"),x=0,I=0;Array.from(S).reverse().forEach((O,N)=>{let P=O;P.classList.add("Toastify__toast--stacked"),N>0&&(P.dataset.collapsed=`${r}`),P.dataset.pos||(P.dataset.pos=v?"top":"bot");let u=x*(r?.2:1)+(r?0:g*N);P.style.setProperty("--y",`${v?u:u*-1}px`),P.style.setProperty("--g",`${g}`),P.style.setProperty("--s",`${1-(r?I:0)}`),x+=P.offsetHeight,I+=.025})}},[r,c,o]),l.useEffect(()=>{function M(S){var g;let v=a.current;j(S)&&((g=v.querySelector('[tabIndex="0"]'))==null||g.focus(),i(!1),$.pause()),S.key==="Escape"&&(document.activeElement===v||v!=null&&v.contains(document.activeElement))&&(i(!0),$.play())}return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[j]),W.createElement("section",{ref:a,className:"Toastify",id:y,onMouseEnter:()=>{o&&(i(!1),$.pause())},onMouseLeave:_,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":s["aria-label"]},n((M,S)=>{let g=S.length?{...m}:{...m,pointerEvents:"none"};return W.createElement("div",{tabIndex:-1,className:C(M),"data-stacked":o,style:g,key:`c-${M}`},S.map(({content:v,props:x})=>W.createElement(za,{...x,stacked:o,collapseAll:_,isIn:d(x.toastId,x.containerId),key:`t-${x.key}`},v)))}))}const Ua=Object.assign({"../assets/questions/articles/art_1.png":zo,"../assets/questions/articles/art_2.png":Ro,"../assets/questions/articles/art_4.png":Uo,"../assets/questions/articles/art_6.png":Wo,"../assets/questions/conditional/con_1.png":Vo,"../assets/questions/conditional/con_10.png":Yo,"../assets/questions/conditional/con_2.png":Jo,"../assets/questions/conditional/con_3.png":Zo,"../assets/questions/conditional/con_4.png":tn,"../assets/questions/conditional/con_5.png":on,"../assets/questions/conditional/con_6.png":rn,"../assets/questions/conditional/con_7.png":ln,"../assets/questions/conditional/con_8.png":dn,"../assets/questions/conditional/con_9.png":gn,"../assets/questions/gerundsInfinitives/gi-1.png":fn,"../assets/questions/gerundsInfinitives/gi-10.png":pn,"../assets/questions/gerundsInfinitives/gi-2.png":bn,"../assets/questions/gerundsInfinitives/gi-3.png":vn,"../assets/questions/gerundsInfinitives/gi-4.png":_n,"../assets/questions/gerundsInfinitives/gi-5.png":Nn,"../assets/questions/gerundsInfinitives/gi-6.png":In,"../assets/questions/gerundsInfinitives/gi-7.png":Tn,"../assets/questions/gerundsInfinitives/gi-8.png":En,"../assets/questions/gerundsInfinitives/gi-9.png":Cn,"../assets/questions/modalVerbs/modal_question10_smoking_area.png":qn,"../assets/questions/modalVerbs/modal_question1_child_swimming.png":On,"../assets/questions/modalVerbs/modal_question2_no_parking.png":Dn,"../assets/questions/modalVerbs/modal_question3_window_open.png":Bn,"../assets/questions/modalVerbs/modal_question4_rain_umbrella.png":Fn,"../assets/questions/modalVerbs/modal_question5_student_assignment.png":Hn,"../assets/questions/modalVerbs/modal_question6_house_lights.png":Qn,"../assets/questions/modalVerbs/modal_question7_speak_languages.png":Gn,"../assets/questions/modalVerbs/modal_question8_boss_meeting.png":Kn,"../assets/questions/modalVerbs/modal_question9_doctor_visit.png":Xn,"../assets/questions/pastTense/pat-1.png":er,"../assets/questions/pastTense/pat-10.png":sr,"../assets/questions/pastTense/pat-2.png":nr,"../assets/questions/pastTense/pat-3.png":ar,"../assets/questions/pastTense/pat-4.png":lr,"../assets/questions/pastTense/pat-5.png":dr,"../assets/questions/pastTense/pat-6.png":gr,"../assets/questions/pastTense/pat-7.png":fr,"../assets/questions/pastTense/pat-8.png":pr,"../assets/questions/pastTense/pat-9.png":br,"../assets/questions/prepositions/pre_1.png":vr,"../assets/questions/prepositions/pre_10.png":_r,"../assets/questions/prepositions/pre_2.png":Nr,"../assets/questions/prepositions/pre_3.png":Ir,"../assets/questions/prepositions/pre_4.png":Tr,"../assets/questions/prepositions/pre_5.png":Er,"../assets/questions/prepositions/pre_6.png":Cr,"../assets/questions/prepositions/pre_7.png":qr,"../assets/questions/prepositions/pre_8.png":Or,"../assets/questions/prepositions/pre_9.png":Dr,"../assets/questions/presentTense/pt-1.png":Br,"../assets/questions/presentTense/pt-10.png":Fr,"../assets/questions/presentTense/pt-2.png":Hr,"../assets/questions/presentTense/pt-3.png":Qr,"../assets/questions/presentTense/pt-4.png":Gr,"../assets/questions/presentTense/pt-5.png":Kr,"../assets/questions/presentTense/pt-6.png":Xr,"../assets/questions/presentTense/pt-7.png":ea,"../assets/questions/presentTense/pt-8.png":sa,"../assets/questions/presentTense/pt-9.png":na}),Ha=t=>{const s=`../assets/${t}`;return Ua[s]},$t=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 45 46",fill:"none",className:"mr-2",children:e.jsx("path",{d:"M11.2499 2.375V6.125H16.8749V12.5L7.70615 8.7125L2.68115 20.825L13.0687 25.1375L22.3874 32.0375L25.8561 33.4813L33.0374 16.1563L29.5687 14.7125L20.6249 13.3812V6.125H26.2499V2.375H11.2499ZM40.8937 12.2937L36.5624 14.0938L37.9874 17.5625L42.3186 15.7625L40.8937 12.2937ZM37.0874 25.9437L35.6249 29.4125L40.8562 31.5687L42.2811 28.1L37.0874 25.9437ZM30.3562 35.9938L26.8874 37.4188L28.6874 41.75L32.1561 40.3062L30.3562 35.9938Z",fill:"currentColor"})}),Wa=({className:t="",isPlaying:s=!1})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:t,children:s?e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"}),e.jsx("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"})]}):e.jsx("path",{d:"M8 5v14l11-7z",fill:"currentColor"})}),Qa=({className:t=""})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:t,children:[e.jsx("path",{d:"M8 5v14l11-7z",fill:"currentColor",opacity:"0.3"}),e.jsx("line",{x1:"3",y1:"3",x2:"21",y2:"21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),Va=()=>{const{topicId:t}=bt(),s=de(),[o]=Bt(),r=o.get("difficulty")||"easy",{completeLevel:i,canAccessDifficulty:a}=wt(),{updateQuestionStatus:n,getQuestionStatus:d,resetQuestionStatuses:c}=jt(),{getCurrentAttempt:b,startNewAttempt:m,submitAnswer:w,completeAttempt:y,hasInProgressAttempt:j,recordHintUsage:C,loadInProgressAttempt:_,resetAttempt:M}=vt(),{playSoundEffect:S,isSoundEffectsEnabled:g,isMusicEnabled:v,toggleMusic:x,isUserAuthenticated:I}=_t(),{checkForNewAchievements:O}=Nt(),[N,P]=l.useState(0),[u,h]=l.useState(null),[k,E]=l.useState(""),[T,z]=l.useState([]),[D,K]=l.useState(!1),[Z,J]=l.useState(0),[X,U]=l.useState(!1),[G,oe]=l.useState(0),[se,re]=l.useState(!1),[ve,Ue]=l.useState(!1),[he,V]=l.useState(!1),[He,it]=l.useState([]),[pe,Se]=l.useState(!1),[We,Qe]=l.useState(Date.now()),[kt,Pe]=l.useState({}),[It,Ce]=l.useState({}),we=l.useRef(null),[Me,qe]=l.useState(null),[xe,Te]=l.useState(null),[_s,lt]=l.useState(""),[ii,ct]=l.useState(!1),Le=ce.find(f=>f.id===t),H=(()=>{switch(t){case"present-tenses":return tt;case"past-tenses":return rs;case"conditionals":return as;case"prepositions":return is;case"articles":return ls;case"modal-verbs":return cs;default:return tt}})(),L=H[N],[St,Ve]=l.useState(!1),[js,Ge]=l.useState(!0);l.useEffect(()=>{St&&!a(r)&&(async()=>{if(t)try{await _(t,r)||($.error(`You don't have access to ${r} difficulty. Complete previous levels first.`),s("/topics"))}catch(p){console.error("Error checking in-progress attempt:",p)}})()},[r,a,s,St,t]),l.useEffect(()=>{(async()=>{if(!t)return;if(o.get("fresh")==="true"){c(t),await m(t,r,H.length),P(0),J(0),oe(0),U(!1),K(!1),h(null),E(""),z([]),Se(!1),Pe({}),Ce({}),Qe(Date.now()),re(!1),V(!1),Ve(!0),Ge(!1);const q=new URLSearchParams(o);q.delete("fresh");const F=q.toString()?`${window.location.pathname}?${q.toString()}`:window.location.pathname;window.history.replaceState({},"",F);return}const A=await _(t,r);if(Ve(!0),Ge(!1),A){console.log("ðŸ”„ Restaurando intento desde backend:",A);let q=0;Object.entries(A.answers).forEach(([ee,ne])=>{const _e=parseInt(ee);if(_e<H.length){const $s=H[_e];ne===$s.correctAnswer?(q++,n(t,_e,"correct")):n(t,_e,"incorrect")}}),J(q),Pe(A.timePerQuestion),Ce(A.hintsPerQuestion);const F=H.findIndex((ee,ne)=>!A.answers.hasOwnProperty(ne.toString()));let Y;F!==-1?Y=F:Y=H.length-1,P(Y);const ie=A.answers?A.answers[Y]:void 0;if(ie){h(ie),E(ie),z(ie.split(", ")),K(!0);const ee=ie===H[Y].correctAnswer;V(ee)}else h(null),E(""),z([]),K(!1),V(!1);console.log("âœ… Estado restaurado desde backend")}else j(t)||(Ve(!0),Ge(!1),c(t),await m(t,r,H.length),P(0),J(0),oe(0),U(!1),K(!1),h(null),E(""),z([]),Se(!1),Pe({}),Ce({}),Qe(Date.now()),re(!1),V(!1),console.log("âœ¨ Nuevo intento creado"));setTimeout(()=>{O(void 0).catch(q=>{console.error("Error checking achievements at game start:",q)})},1e3)})().catch(p=>{console.error("Error initializing attempt:",p),Ve(!0),Ge(!1)})},[t,r,o]);const dt=f=>{g&&S(f?"correct":"wrong")},ae=f=>{lt(f),setTimeout(()=>lt(""),100)},ut=f=>{if(!L.dragOptions||f>=L.dragOptions.length)return;const p=L.dragOptions[f];if(T.includes(p)){ae(`The word "${p}" is already placed in a space.`);return}qe(f),Te(null),ae(`Word "${p}" selected. Press 1 or 2 to place it in a space.`)},gt=f=>{const p=T[f];if(!p){ae(`Space ${f+1} is empty.`);return}Te(f),qe(null),ae(`Word "${p}" selected from space ${f+1}. Press 1 or 2 to move it.`)},Ns=f=>{if(Me!==null&&L.dragOptions){const p=L.dragOptions[Me],A=[...T];A[f]?ae(`Replacing "${A[f]}" with "${p}" in space ${f+1}.`):ae(`Placing "${p}" in space ${f+1}.`),A[f]=p,z(A),qe(null)}else if(xe!==null){const p=T[xe],A=[...T];if(A[f]){const q=A[f];A[xe]=q,A[f]=p,ae(`Swapping "${p}" with "${q}".`)}else A[xe]="",A[f]=p,ae(`Moving "${p}" to space ${f+1}.`);z(A),Te(null)}},ks=f=>{const p=T[f];if(p){const A=[...T];A[f]="",z(A),ae(`Word "${p}" removed from space ${f+1}.`)}};l.useEffect(()=>{const f=p=>{if(!((p.target instanceof HTMLInputElement||p.target instanceof HTMLTextAreaElement)&&!L.isDragAndDrop)){if(p.key==="Escape"&&L.isDragAndDrop&&!D){p.preventDefault(),p.stopPropagation(),qe(null),Te(null),ae("Selection cancelled.");return}if(L.isDragAndDrop&&!D){if(p.ctrlKey&&!p.shiftKey&&!p.altKey&&!p.metaKey){const A=p.key;if(A>="1"&&A<="3"){const q=parseInt(A)-1;if(L.dragOptions&&q<L.dragOptions.length){const F=L.dragOptions[q];if(T.includes(F)){ae(`The word "${F}" is already placed.`);return}else{p.preventDefault(),p.stopPropagation(),ut(q),ct(!0);return}}}}if(p.shiftKey&&!p.ctrlKey&&!p.altKey&&!p.metaKey&&(p.code==="Digit1"||p.code==="Digit2")){const A=p.code==="Digit1"?0:1;p.preventDefault(),p.stopPropagation(),gt(A),ct(!0);return}if(!p.ctrlKey&&!p.shiftKey&&!p.altKey&&!p.metaKey&&(Me!==null||xe!==null)){const A=p.key;if(A>="1"&&A<="2"){const q=parseInt(A)-1;p.preventDefault(),p.stopPropagation(),Ns(q);return}}if((p.key==="Delete"||p.key==="Backspace")&&xe!==null){p.preventDefault(),p.stopPropagation(),ks(xe),Te(null);return}}switch(p.key){case"ArrowLeft":p.preventDefault(),N>0&&mt(N-1);break;case"ArrowRight":p.preventDefault(),N<H.length-1&&mt(N+1);break}}};return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[N,H.length,L,D,Me,xe,T]);const Is=f=>{const p=[...f];for(let A=p.length-1;A>0;A--){const q=Math.floor(Math.random()*(A+1));[p[A],p[q]]=[p[q],p[A]]}return p};l.useEffect(()=>{L&&L.options&&!L.isFillInTheBlank&&it(Is(L.options))},[L]),l.useEffect(()=>{G>=2&&!X&&!D&&U(!0)},[G,X,D]),l.useEffect(()=>{Qe(Date.now())},[N]),l.useEffect(()=>{qe(null),Te(null),lt(""),ct(!1)},[N]);const Ss=()=>{const f=Math.round((Date.now()-We)/1e3);Pe(p=>({...p,[N]:f}))},mt=f=>{if(f!==N){P(f);const p=d(t,f);if(p==="unanswered")h(null),E(""),z([]),K(!1),U(!1),oe(0);else{K(!0);const A=b(t);A&&(h(A.answers[f]||null),E(A.answers[f]||""),z(A.answers[f]?A.answers[f].split(", "):[]),V(p==="correct"))}}},Ts=()=>{U(!0),C(t,N),Ce(f=>({...f,[N]:(f[N]||0)+1})),O(void 0).catch(f=>{console.error("Error checking achievements after hint usage:",f)})},As=async f=>{if(!D&&t){h(f),K(!0);const p=f===L.correctAnswer;V(p),dt(p),p?(J(q=>q+1),n(t,N,"correct")):(oe(q=>q+1),n(t,N,"incorrect"));const A=Math.round((Date.now()-We)/1e3);await w(t,N,f,A,X?1:0),O(void 0).catch(q=>{console.error("Error checking achievements after answer:",q)})}},Tt=async()=>{if(!D&&t&&k.trim()){K(!0);const f=Array.isArray(L.correctAnswer)?L.correctAnswer[0]:L.correctAnswer,p=k.trim().toLowerCase()===f.toLowerCase();V(p),dt(p),p?(J(q=>q+1),n(t,N,"correct")):(oe(q=>q+1),n(t,N,"incorrect"));const A=Math.round((Date.now()-We)/1e3);await w(t,N,k.trim(),A,X?1:0),O(void 0).catch(q=>{console.error("Error checking achievements after answer:",q)})}},Es=(f,p)=>{f.dataTransfer.setData("text/plain",p)},Ps=f=>{f.preventDefault()},Cs=(f,p)=>{f.preventDefault();const A=f.dataTransfer.getData("text/plain");z(q=>{const F=[...q];return F[p]=A,F})},Ms=async()=>{if(!D&&t&&T.length>0){K(!0);const f=L.correctAnswer,p=Array.isArray(f)?JSON.stringify(T)===JSON.stringify(f):T[0]===f;V(p),dt(p),p?(J(q=>q+1),n(t,N,"correct")):(oe(q=>q+1),n(t,N,"incorrect"));const A=Math.round((Date.now()-We)/1e3);await w(t,N,T.join(", "),A,X?1:0),O(void 0).catch(q=>{console.error("Error checking achievements after answer:",q)})}},qs=async()=>{const f=H.filter((p,A)=>d(t,A)!=="unanswered").length;if(Ss(),f===H.length){if(t){y(t,Z,H.length);const p=H.map((F,Y)=>{const ee=b(t)?.answers[Y]||"",ne=Array.isArray(F.correctAnswer)?F.correctAnswer.join(", "):F.correctAnswer,_e=ee===ne;return{questionId:`q${Y+1}`,userAnswer:ee,correctAnswer:ne,isCorrect:_e,timeSpent:kt[Y]||0,hintsUsed:It[Y]||0}}),A=Object.values(kt).reduce((F,Y)=>F+Y,0),q=Object.values(It).reduce((F,Y)=>F+Y,0);try{const F=Math.round(A),Y=Math.round(q),ie=await i(t,r,Z,H.length,{timeSpent:F,hintsUsed:Y,questionsDetails:p.map(ee=>({...ee,timeSpent:Math.round(ee.timeSpent||0),hintsUsed:Math.round(ee.hintsUsed||0)}))});try{await Ne.deleteInProgressAttempt(t,r),console.log("ðŸ—‘ï¸ Intento en progreso eliminado tras completar el nivel")}catch(ee){console.warn("Warning: Could not delete in-progress attempt:",ee)}if(ie.success){const ee=Math.round(Z/H.length*100);ie.newUnlocks&&ie.newUnlocks.length>0?$.success(`Progress saved! You've unlocked: ${ie.newUnlocks.join(", ").toUpperCase()}`,{position:"top-center",autoClose:4e3}):ee===100?$.success("Perfect! Level completed 100%!",{position:"top-center",autoClose:2e3}):$.success("Progress saved successfully!",{position:"top-center",autoClose:2e3}),console.log("ðŸ† Checking for achievements after level completion...");try{const ne=await O(void 0);console.log("ðŸ† New achievements found:",ne.length),ne.length>0&&console.log("ðŸ† Achievement names:",ne.map(_e=>_e.name))}catch(ne){console.error("Error checking achievements after level completion:",ne)}}}catch(F){console.error("Error saving progress:",F),$.error("Failed to save progress, but game completed locally")}}re(!0)}else N<H.length-1&&(P(p=>p+1),h(null),E(""),z([]),K(!1),U(!1),oe(0))},Ls=async()=>{if(!(!t||ve)){Ue(!0);try{await M(t),c(t),await m(t,r,H.length),P(0),h(null),E(""),z([]),K(!1),J(0),U(!1),oe(0),re(!1),V(!1),Pe({}),Ce({}),Qe(Date.now()),console.log('ðŸ”„ Nuevo intento iniciado tras "Try Again"')}catch(f){console.error("Error al reiniciar el juego:",f)}finally{Ue(!1)}}};l.useEffect(()=>{if(L?.audio){we.current&&(we.current.pause(),we.current.currentTime=0);const f=new Audio;return f.src=L.audio,f.volume=.7,f.addEventListener("ended",()=>{Se(!1)}),f.addEventListener("error",p=>{console.error("Error loading audio:",p),Se(!1)}),we.current=f,()=>{f&&(f.pause(),f.currentTime=0,f.removeEventListener("ended",()=>{}),f.removeEventListener("error",()=>{}))}}},[L]),l.useEffect(()=>{if(we.current)if(pe){const f=we.current.play();f!==void 0&&f.catch(p=>{console.error("Error playing audio:",p),Se(!1)})}else we.current.pause(),we.current.currentTime=0},[pe]);const Os=()=>{L?.audio&&I&&g&&Se(!pe)};if(js)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"img","aria-label":"Loading spinner"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":2,"aria-label":"Loading your progress",children:"Loading your progress..."}),e.jsx("p",{className:"text-gray-500 mt-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Please wait while we restore your attempt",children:"Please wait while we restore your attempt"})]})});if(!Le)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":2,children:"Topic not found"}),e.jsx(Q,{onClick:()=>s("/topics"),tabIndex:0,"aria-label":"Volver a la pÃ¡gina de temas",children:"Return to Topics"})]});if(!a(r))return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":2,children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text",children:"You need to complete previous levels first."}),e.jsx(Q,{onClick:()=>s("/topics"),tabIndex:0,"aria-label":"Volver a la pÃ¡gina de temas",children:"Return to Topics"})]});if(se){const f=Math.round(Z/H.length*100),p=f===100;return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(Lt,{enabled:!0}),e.jsx("div",{className:"flex-grow flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg max-w-lg w-full p-8 animate-slide-up",children:[e.jsxs("div",{className:"text-center mb-6",children:[p?e.jsx(De,{className:"h-16 w-16 text-yellow-500 mx-auto mb-4","aria-hidden":"true"}):e.jsx("div",{className:"h-16 w-16 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"img","aria-label":"Level completion icon",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“š"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,"aria-label":p?"Perfect! Level Completed!":"Level Attempted!",children:p?"Perfect! Level Completed!":"Level Attempted!"}),e.jsxs("p",{className:"text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`${Le?.title} - ${r.charAt(0).toUpperCase()+r.slice(1)}`,children:[Le?.title," - ",r.charAt(0).toUpperCase()+r.slice(1)]})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"text-6xl font-bold mb-2 text-primary focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":`Score: ${Z} out of ${H.length} questions correct`,children:[Z,"/",H.length]}),e.jsx(et,{value:f,max:100,size:"lg",color:f===100?"success":f>=70?"warning":"error",className:"mb-2"}),e.jsxs("p",{className:"text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`${f}% Correct`,children:[f,"% Correct"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,"aria-label":"Performance Summary",children:"Performance Summary:"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":p?"Excellent work! Perfect score. You've completely mastered this level.":f>=80?"Very good! Almost perfect. You need 100% to unlock the next level.":f>=50?"Nice try. Keep practicing to reach 100%.":"Keep practicing. You can try again until you get 100%.",children:p?"Excellent work! Perfect score. You've completely mastered this level.":f>=80?"Very good! Almost perfect. You need 100% to unlock the next level.":f>=50?"Nice try. Keep practicing to reach 100%.":"Keep practicing. You can try again until you get 100%."}),e.jsx("div",{className:"mt-3 p-3 bg-blue-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"text","aria-label":"Progress saved successfully message",children:e.jsx("p",{className:"text-blue-800 font-medium",children:"âœ¨ Progress saved successfully!"})})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(Q,{variant:"outline",onClick:Ls,disabled:ve,className:"h-[40px] w-[225px] border-2 border-black flex items-center justify-center",children:[e.jsx(Gt,{className:`h-5 w-5 mr-2 ${ve?"animate-spin":""}`}),ve?"Restarting...":"Try Again"]}),e.jsxs(Q,{variant:"custom",onClick:()=>s("/topics"),className:"h-[40px] w-[225px] bg-blue-500 hover:bg-blue-600 text-white border-2 border-black flex items-center justify-center",children:[e.jsx(yt,{className:"h-5 w-5 mr-2 text-white"}),"BACK TO TOPICS"]})]})]})})]})}return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(Lt,{enabled:!0}),e.jsx("div",{className:"flex-grow container-custom py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-8 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,"aria-label":`Current topic: ${Le.title}`,children:Le.title}),e.jsxs("div",{className:"bg-[rgb(var(--color-background-card))] rounded-xl shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($e,{icon:e.jsx(ot,{}),variant:"ghost",onClick:()=>{s("/topics")},tooltip:"Back to Topics","aria-label":"Back to Topics",className:"flex items-center"}),e.jsx("span",{className:"text-[#000] font-['Poppins'] text-[18px] italic font-[275] leading-normal capitalize ml-2 flex items-center mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Back to Topics navigation text",children:"Back to Topics"})]}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"flex justify-between items-center mb-2"})}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Keyboard navigation hint: Use arrow keys to navigate between questions",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs mr-1",children:"â†"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs mr-2",children:"â†’"}),e.jsx("span",{children:"Navigate"})]})]}),e.jsx(aa,{topicId:t,totalQuestions:H.length,currentQuestionIndex:N,onQuestionSelect:mt,className:"mb-4"}),e.jsx("div",{className:"mb-6",children:(()=>{const f=H.filter((A,q)=>d(t,q)!=="unanswered").length,p=Math.round(f/H.length*100);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`${f} of ${H.length} questions answered`,children:[f," of ",H.length," questions answered"]}),e.jsxs("span",{className:"text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`${p}% Completed`,children:[p,"% Completed"]})]}),e.jsx(et,{value:f,max:H.length,size:"md",color:"primary",className:"transition-all duration-300"})]})})()}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold flex-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":2,"aria-label":`Question: ${L.text}`,children:L.text}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx($e,{icon:I?v?e.jsx(Xe,{size:20,className:"text-blue-600"}):e.jsx(je,{size:20}):e.jsx(je,{size:20,className:"opacity-50"}),onClick:I?x:void 0,tooltip:I?v?"Silenciar MÃºsica de Fondo":"Activar MÃºsica de Fondo":"MÃºsica disponible despuÃ©s del login","aria-label":I?v?"Silenciar MÃºsica de Fondo":"Activar MÃºsica de Fondo":"MÃºsica disponible despuÃ©s del login",variant:"ghost",disabled:!I,className:I?"":"opacity-50 cursor-not-allowed"}),L?.audio&&e.jsx($e,{icon:!I||!g?e.jsx(Qa,{className:"text-gray-400"}):e.jsx(Wa,{className:"text-orange-600",isPlaying:pe}),onClick:I&&g?Os:void 0,tooltip:I?g?pe?"â¸ï¸ Parar Audio de Pregunta":"â–¶ï¸ Reproducir Audio de Pregunta":"ðŸ”Š Activar Audio de Pregunta en ConfiguraciÃ³n":"ðŸ”Š Audio de pregunta disponible despuÃ©s del login","aria-label":I?g?pe?"Parar Audio de Pregunta":"Reproducir Audio de Pregunta":"Activar Audio de Pregunta en ConfiguraciÃ³n":"Audio de pregunta disponible despuÃ©s del login",variant:"ghost",disabled:!I||!g,className:!I||!g?"opacity-50 cursor-not-allowed":"hover:bg-orange-50"})]})]}),L.image&&e.jsx("div",{className:"flex justify-center mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"img","aria-label":L.alt||`Grammar question illustration for: ${L.text.substring(0,50)}...`,children:e.jsx("img",{src:Ha(L.image)?.default,alt:L.alt||`Grammar question illustration for: ${L.text.substring(0,50)}...`,className:"rounded-lg shadow-md",style:{width:"300px",height:"300px",objectFit:"cover"},onError:f=>{console.error("Error loading image:",L.image),f.currentTarget.style.display="none"}})}),L.isFillInTheBlank?e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"text",value:k,onChange:f=>E(f.target.value),placeholder:"Write your answer here...",className:"p-4 border-2 border-gray-200 rounded-lg focus:border-[rgb(var(--color-primary))] focus:outline-none transition-all duration-300",disabled:D,onKeyPress:f=>{f.key==="Enter"&&!D&&k.trim()&&Tt()}}),!D&&e.jsx(Q,{onClick:Tt,disabled:!k.trim(),className:"ml-auto h-[40px] w-[225px] bg-[rgb(var(--color-button))] hover:bg-[rgb(var(--color-button))/0.8] text-white border-[2px] border-solid border-[#000000]",children:"Submit Answer"})]})}):L.isDragAndDrop?e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",role:"status",children:_s}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Instructions: Drag the words into the blank spaces",children:"Drag the words into the blank spaces"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",role:"application","aria-label":"Sentence construction area",children:(()=>{const f=L.text.split("______");return f.map((p,A)=>e.jsxs(W.Fragment,{children:[e.jsx("span",{className:"text-lg",role:"text",children:p}),A<f.length-1&&e.jsx("div",{className:`inline-block w-32 h-10 border-2 border-dashed rounded-lg flex items-center justify-center bg-white transition-all
                                      ${xe===A?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-gray-400"}
                                      ${T[A]?"border-green-400 bg-green-50":""}
                                    `,onDragOver:Ps,onDrop:q=>Cs(q,A),onClick:()=>!D&&gt(A),onKeyDown:q=>{(q.key==="Enter"||q.key===" ")&&(q.preventDefault(),!D&&gt(A))},tabIndex:D?-1:0,role:"button","aria-label":`Space ${A+1}: ${T[A]||"empty"}. ${D?"":"Press Enter to select."}`,"aria-describedby":`space-${A}-description`,children:T[A]?e.jsx("span",{className:"text-sm font-medium text-gray-700",children:T[A]}):e.jsxs("span",{className:"text-xs text-gray-400",children:["Espacio ",A+1]})}),A<f.length-1&&e.jsxs("div",{id:`space-${A}-description`,className:"sr-only",children:["Space number ",A+1," to place a word."]})]},A))})()})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Available words section",children:"Available words:"}),e.jsx("div",{className:"flex flex-wrap gap-3",role:"group","aria-label":"List of available words to drag",children:L.dragOptions?.map((f,p)=>{const q=!T.includes(f),F=Me===p;return e.jsx("div",{draggable:q&&!D,onDragStart:Y=>Es(Y,f),onClick:()=>!D&&q&&ut(p),onKeyDown:Y=>{(Y.key==="Enter"||Y.key===" ")&&(Y.preventDefault(),!D&&q&&ut(p))},tabIndex:q&&!D?0:-1,className:`px-4 py-2 rounded-lg border-2 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500
                                ${F?"border-blue-500 bg-blue-100 ring-2 ring-blue-300":""}
                                ${q&&!D?"border-blue-300 bg-blue-50 hover:border-blue-400 hover:bg-blue-100 cursor-pointer":"border-gray-200 bg-gray-100 cursor-not-allowed opacity-50"}
                              `,role:"button","aria-label":`Word ${p+1}: ${f}. ${q&&!D?"Press Ctrl+"+(p+1)+" to select.":"Not available."}`,"aria-pressed":F,"aria-disabled":!q||D,children:e.jsxs("span",{className:"text-sm font-medium",children:[p+1,". ",f]})},`${f}-${p}`)})})]}),!D&&e.jsx("div",{className:"flex justify-center",children:e.jsx(Q,{variant:"custom",onClick:Ms,disabled:T.filter(f=>f.trim()).length===0,className:"h-[40px] w-[225px] bg-blue-500 hover:bg-blue-600 text-white border-2 border-black","aria-label":"Check drag and drop answer",children:"Check Answer"})})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:He.map((f,p)=>{const A=f===L.correctAnswer,q=f===u;let F="p-4 rounded-lg border-2 transition-all duration-300 flex justify-center items-center";return D?A?F+=" border-[rgb(var(--color-correct-option))] bg-[rgb(var(--color-correct-option)/0.1)] text-[rgb(var(--color-correct-option))]":q?F+=" border-[rgb(var(--color-incorrect-option))] bg-[rgb(var(--color-incorrect-option)/0.45)] text-[rgb(var(--color-incorrect-option))]":F+=" border-gray-200 opacity-60":F+=q?" border-[rgb(var(--color-primary))] bg-[rgb(var(--color-primary)/0.1)]":" border-gray-200 hover:border-[rgb(var(--color-primary)/0.5)]",e.jsxs("button",{className:F,onClick:()=>As(f),disabled:D,style:{height:"40px"},children:[e.jsx("span",{className:"text-center",children:f}),D&&A&&e.jsx(Qt,{className:"h-5 w-5 text-success ml-2"}),D&&q&&!A&&e.jsx(ho,{className:"h-5 w-5 text-error ml-2"})]},p)})}),X&&e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-[rgb(var(--color-background-hint))] border-2 border-black",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($t,{}),e.jsx("span",{className:"font-medium",children:"Hint:"})]}),e.jsx("p",{children:L.hint})]}),D&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`bg-${he?"success":"error"}/10 border border-${he?"success":"error"}/30 p-4 rounded-lg`,children:[e.jsx("h3",{className:`font-bold text-${he?"success":"error"} mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1`,tabIndex:0,role:"heading","aria-level":3,"aria-label":he?"Correct answer feedback":"Incorrect answer feedback",children:he?"Correct!":"It's incorrect"}),L.isFillInTheBlank&&!he&&e.jsxs("p",{className:"mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`Your answer: ${k.trim()}. Correct answer: ${Array.isArray(L.correctAnswer)?L.correctAnswer[0]:L.correctAnswer}`,children:[e.jsx("strong",{children:"Your answer:"})," ",k.trim(),e.jsx("br",{}),e.jsx("strong",{children:"Correct answer:"})," ",Array.isArray(L.correctAnswer)?L.correctAnswer[0]:L.correctAnswer]}),L.isDragAndDrop&&!he&&e.jsxs("p",{className:"mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`Your answer: ${T.join(", ")}. Correct answer: ${Array.isArray(L.correctAnswer)?L.correctAnswer.join(", "):L.correctAnswer}`,children:[e.jsx("strong",{children:"Your answer:"})," ",T.join(", "),e.jsx("br",{}),e.jsx("strong",{children:"Correct answer:"})," ",Array.isArray(L.correctAnswer)?L.correctAnswer.join(", "):L.correctAnswer]}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`Explanation: ${L.explanation}`,children:L.explanation})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Q,{variant:"custom",icon:e.jsx(Je,{className:"text-white"}),iconPosition:"right",onClick:qs,className:"h-[40px] w-[225px] bg-[rgb(var(--color-button))] hover:bg-[#183AB0] text-white border-[2px] border-solid border-white",children:H.filter((p,A)=>d(t,A)!=="unanswered").length===H.length?"See results":"Next Question"})})]}),e.jsx("div",{className:"flex justify-between mt-6",children:e.jsx("div",{children:!X&&!D&&e.jsxs(Q,{variant:"outline",onClick:Ts,className:"bg-[rgb(var(--color-background-hint))] hover:bg-[rgb(var(--color-background-hint))/0.8] text-text border-2 border-black w-[323px]",style:{height:"40px",width:"225px"},children:[e.jsx($t,{}),X?"Hide Hint":"Show hint"]})})})]})]})]})})]})},Dt={currentScore:0,totalQuestions:0,currentQuestion:0,isGameCompleted:!1,hintUsed:!1,attempts:0},Ga={musicEnabled:!0,soundEffectsEnabled:!0,fullscreenMode:!1,textSize:"medium"},vs=l.createContext(void 0),Ya=({children:t})=>{const[s,o]=l.useState(Dt),[r,i]=l.useState([]),[a,n]=l.useState(Ga),d=()=>{o({...Dt,totalQuestions:r.length})},c=()=>{o(w=>({...w,hintUsed:!0}))},b=w=>{o(y=>({...y,currentScore:w?y.currentScore+1:y.currentScore,attempts:y.attempts+1}))},m=()=>{o(w=>{const y=w.currentQuestion+1,j=y>=w.totalQuestions;return{...w,currentQuestion:y,isGameCompleted:j,hintUsed:!1,attempts:0}})};return e.jsx(vs.Provider,{value:{gameState:s,questions:r,settings:a,setGameState:o,setQuestions:i,setSettings:n,resetGame:d,showHint:c,updateScore:b,nextQuestion:m},children:t})},Ka=()=>{const t=l.useContext(vs);if(t===void 0)throw new Error("useGame must be used within a GameProvider");return t},Ja=()=>{const{topicId:t}=bt(),s=de(),[o]=Bt(),r=o.get("difficulty")||"easy",[i,a]=l.useState([]),[n,d]=l.useState(!0),[c,b]=l.useState({correct:0,total:10}),[m,w]=l.useState(0),{getCurrentAttempt:y,resetAttempt:j}=vt(),{resetQuestionStatuses:C}=jt(),{checkForNewAchievements:_}=Nt(),{resetGame:M}=Ka(),S=ce.find(I=>I.id===t);if(l.useEffect(()=>{(async()=>{if(t)try{d(!0);const O=await Ee.getAttempts({topicId:t.replace("_","-"),difficulty:r,limit:100,sortBy:"completedAt",sortOrder:"desc"});if(O.success&&O.data?.attempts){const N=O.data.attempts;if(a(N),N.length>0){const P=N.reduce((u,h)=>h.percentage>u.percentage?h:u);b({correct:P.correct,total:P.total}),w(P.percentage),console.log("âœ… Mejor intento encontrado:",P)}else{const P=y(t);P&&P.isCompleted&&(b({correct:P.correctAnswers,total:P.totalQuestions}),w(P.score))}console.log("âœ… Intentos cargados para Results:",N)}}catch(O){console.error("âŒ Error cargando intentos en Results:",O);const N=y(t);N&&N.isCompleted&&(b({correct:N.correctAnswers,total:N.totalQuestions}),w(N.score))}finally{d(!1)}})()},[t,r,y]),!S)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Topic not found"}),e.jsx(Q,{onClick:()=>s("/topics"),children:"Return to Topics"})]});const g=()=>{if(t){j(t),C(t),M();const I=Date.now();s(`/game/${t}?difficulty=${r}&fresh=true&key=${I}`)}},v=I=>new Date(I).toLocaleString(),x=m===100;return l.useEffect(()=>{const O=setTimeout(async()=>{try{await _(void 0)}catch(N){console.error("Error checking achievements in Results:",N)}},1e3);return()=>clearTimeout(O)},[_,m,x]),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx(ge,{className:"mb-8",children:e.jsxs(me,{children:[e.jsxs("div",{className:"text-center mb-6",children:[x&&e.jsx(De,{className:"h-16 w-16 text-yellow-500 mx-auto mb-4"}),e.jsxs("h1",{className:"text-3xl font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:[S.title," - ",r.charAt(0).toUpperCase()+r.slice(1)," Results"]}),x&&e.jsx("p",{className:"text-green-600 font-semibold text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text",children:"Perfect! Level Completed"})]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"text-6xl font-bold mb-2 text-primary focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":`Score: ${c.correct} out of ${c.total} correct answers`,children:[c.correct," / ",c.total]}),e.jsxs("div",{className:"text-xl text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":`Percentage: ${m} percent correct`,children:[m,"% Correct"]})]}),e.jsx(et,{value:m,max:100,size:"lg",color:m===100?"success":m>=70?"warning":"error",showPercentage:!0,className:"mb-8"}),e.jsx("div",{className:"text-center mb-8",children:e.jsx("div",{className:`p-4 rounded-lg ${x?"bg-green-100":"bg-blue-100"} focus:outline-none focus:ring-2 focus:ring-blue-500`,tabIndex:0,role:"region","aria-label":"Status message",children:e.jsx("p",{className:`font-medium ${x?"text-green-800":"text-blue-800"} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2`,tabIndex:0,role:"text",children:x?"Excellent! You have completely mastered this level.":m>=80?"Very good! Almost perfect. You need 100% to unlock the next level.":m>=50?"Nice try. Keep practicing to reach 100%.":"Keep practicing. You can try again until you get 100%."})})}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(Q,{variant:"custom",onClick:g,icon:e.jsx(Gt,{className:"w-5 h-5"}),className:"h-[40px] w-[225px] bg-blue-500 hover:bg-blue-600 text-white border-2 border-black",children:"Try Again"}),e.jsx(Q,{variant:"outline",onClick:()=>s("/topics"),icon:e.jsx(yt,{className:"w-5 h-5"}),className:"h-[40px] min-w-[160px]",children:"Back to Topics"})]})]})}),!n&&i.length>0&&e.jsx(ge,{children:e.jsxs(me,{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":2,children:["My Attempts",i.length>5&&e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:["(",i.length," total - scroll to see all)"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto pr-2 custom-scrollbar",children:i.map((I,O)=>{const N=Math.max(...i.map(u=>u.percentage)),P=I.percentage===N;return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg relative ${P?"bg-green-50 border-2 border-green-200":"bg-gray-50"}`,children:[P&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(De,{className:"h-5 w-5 text-yellow-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:`font-semibold ${P?"text-green-800":""} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1`,tabIndex:0,role:"text",children:["Attempt #",i.length-O,P&&e.jsx("span",{className:"ml-2 text-xs font-medium text-green-600 bg-green-100 px-2 py-1 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"text",children:"BEST"})]}),e.jsx("div",{className:"text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:v(I.completedAt)}),I.timeSpent>0&&e.jsxs("div",{className:"text-xs text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:["Time: ",Math.round(I.timeSpent/60),"m ",I.timeSpent%60,"s"]}),I.hintsUsed>0&&e.jsxs("div",{className:"text-xs text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:["Hints used: ",I.hintsUsed]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-lg font-bold ${P?"text-green-700":""} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1`,tabIndex:0,role:"text","aria-label":`Score: ${I.correct} out of ${I.total} correct answers`,children:[I.correct," / ",I.total]}),e.jsxs("div",{className:`text-sm ${P?"text-green-600":"text-gray-600"} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1`,tabIndex:0,role:"text","aria-label":`Percentage: ${I.percentage} percent`,children:[I.percentage,"%"]})]})]},I._id)})}),i.length>5&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-4 bg-gradient-to-t from-white to-transparent pointer-events-none"})]})]})}),n&&e.jsx(ge,{children:e.jsx(me,{children:e.jsx("div",{className:"text-center py-8",children:e.jsx("div",{className:"text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text",children:"Loading attempts..."})})})})]})},Xa=()=>{const t=de(),{isMusicEnabled:s,isSoundEffectsEnabled:o,toggleMusic:r,toggleSoundEffects:i,isUserAuthenticated:a}=_t(),[n,d]=W.useState(()=>{const m=localStorage.getItem("gameSettings");return m?JSON.parse(m):{fullscreenMode:!1,textSize:"medium"}});l.useEffect(()=>{localStorage.setItem("gameSettings",JSON.stringify(n))},[n]);const c=(m,w)=>{d(y=>({...y,[m]:w!==void 0?w:!y[m]}))},b={small:"Small",medium:"Medium",large:"Large"};return l.useEffect(()=>{document.documentElement.style.fontSize=n.textSize==="small"?"14px":n.textSize==="large"?"18px":"16px"},[n.textSize]),l.useEffect(()=>{n.fullscreenMode?document.documentElement.requestFullscreen().catch(m=>{console.error("Error attempting fullscreen:",m)}):document.fullscreenElement&&document.exitFullscreen()},[n.fullscreenMode]),e.jsxs("div",{className:"max-w-2xl mx-auto py-8 animate-fade-in",children:[e.jsx("header",{className:"mb-8 text-center",children:e.jsx("h1",{className:"text-3xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:"SETTINGS"})}),e.jsxs(ge,{children:[e.jsxs(Zt,{children:[e.jsx("h2",{className:"text-xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":2,children:"Game Settings"}),e.jsx("p",{className:"text-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Customize your game experience"})]}),e.jsxs(me,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Audio"}),!a&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700",children:e.jsx("p",{className:"text-sm",children:"ðŸ” Audio controls available after login"})}),e.jsxs("div",{className:`space-y-4 ${a?"":"opacity-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[a?s?e.jsx(Xe,{className:"h-5 w-5 mr-3 text-blue-600","aria-hidden":"true"}):e.jsx(je,{className:"h-5 w-5 mr-3 text-gray-700","aria-hidden":"true"}):e.jsx(je,{className:"h-5 w-5 mr-3 text-gray-400","aria-hidden":"true"}),e.jsx("span",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Background Music setting",children:"Background Music"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${a&&s?"bg-primary":"bg-gray-300"} ${a?"cursor-pointer":"cursor-not-allowed"} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded`,onClick:a?r:void 0,tabIndex:0,role:"button","aria-label":`Background Music is ${a&&s?"enabled":"disabled"}. Click to ${a&&s?"disable":"enable"}`,"aria-pressed":a&&s,children:e.jsx("div",{className:`bg-white h-4 w-4 rounded-full shadow-md transform transition-transform ${a&&s?"translate-x-6":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[a?o?e.jsx(Xe,{className:"h-5 w-5 mr-3 text-green-600","aria-hidden":"true"}):e.jsx(je,{className:"h-5 w-5 mr-3 text-gray-700","aria-hidden":"true"}):e.jsx(je,{className:"h-5 w-5 mr-3 text-gray-400","aria-hidden":"true"}),e.jsx("span",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Question Audio setting",children:"Question Audio"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${a&&o?"bg-primary":"bg-gray-300"} ${a?"cursor-pointer":"cursor-not-allowed"} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded`,onClick:a?i:void 0,tabIndex:0,role:"button","aria-label":`Question Audio is ${a&&o?"enabled":"disabled"}. Click to ${a&&o?"disable":"enable"}`,"aria-pressed":a&&o,children:e.jsx("div",{className:`bg-white h-4 w-4 rounded-full shadow-md transform transition-transform ${a&&o?"translate-x-6":"translate-x-0"}`})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Visual"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(no,{className:"h-5 w-5 mr-3 text-gray-700","aria-hidden":"true"}),e.jsx("span",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Full Screen Mode setting",children:"Full Screen Mode"})]}),e.jsx("div",{className:`w-12 h-6 rounded-full p-1 transition-colors ${n.fullscreenMode?"bg-primary":"bg-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded cursor-pointer`,onClick:()=>c("fullscreenMode"),tabIndex:0,role:"button","aria-label":`Full Screen Mode is ${n.fullscreenMode?"enabled":"disabled"}. Click to ${n.fullscreenMode?"disable":"enable"}`,"aria-pressed":n.fullscreenMode,children:e.jsx("div",{className:`bg-white h-4 w-4 rounded-full shadow-md transform transition-transform ${n.fullscreenMode?"translate-x-6":"translate-x-0"}`})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center mb-2",children:e.jsx("span",{className:"mr-3 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":"Text Size setting",children:"Text Size"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{className:"p-2 text-gray-600 hover:text-primary transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",onClick:()=>{const m=["small","medium","large"],w=m.indexOf(n.textSize),y=Math.max(0,w-1);c("textSize",m[y])},disabled:n.textSize==="small",tabIndex:0,"aria-label":"Decrease text size",children:e.jsx(ro,{className:"h-5 w-5","aria-hidden":"true"})}),e.jsx("div",{className:"flex-1 mx-4",children:e.jsxs("div",{className:"relative pt-1",children:[e.jsx("div",{className:"overflow-hidden h-2 text-xs flex rounded bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"slider","aria-valuenow":n.textSize==="small"?1:n.textSize==="medium"?2:3,"aria-valuemin":1,"aria-valuemax":3,"aria-label":"Text size slider",children:["small","medium","large"].map(m=>e.jsx("div",{className:`shadow-none flex flex-col text-center whitespace-nowrap justify-center ${n.textSize===m?"bg-primary":"bg-gray-300"}`,style:{width:"33.333%"}},m))}),e.jsxs("div",{className:"flex justify-between text-xs px-1 mt-1",children:[e.jsx("span",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"text","aria-label":"Small text size",children:"Small"}),e.jsx("span",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"text","aria-label":"Medium text size",children:"Medium"}),e.jsx("span",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"text","aria-label":"Large text size",children:"Large"})]})]})}),e.jsx("button",{className:"p-2 text-gray-600 hover:text-primary transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",onClick:()=>{const m=["small","medium","large"],w=m.indexOf(n.textSize),y=Math.min(m.length-1,w+1);c("textSize",m[y])},disabled:n.textSize==="large",tabIndex:0,"aria-label":"Increase text size",children:e.jsx(lo,{className:"h-5 w-5","aria-hidden":"true"})})]}),e.jsx("div",{className:"mt-4 p-4 bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Text size preview",children:e.jsxs("p",{className:`${n.textSize==="small"?"text-sm":n.textSize==="large"?"text-lg":"text-base"}`,children:["This is how your text will look with the ",b[n.textSize]," setting."]})})]})]})]})]}),e.jsx(es,{className:"flex justify-center",children:e.jsx(Q,{variant:"custom",icon:e.jsx(ot,{className:"text-white"}),onClick:()=>t("/topics"),className:"h-[40px] w-[225px] bg-blue-500 hover:bg-blue-600 text-white border-2 border-black",tabIndex:0,"aria-label":"Back to topics page",children:"Back to topics"})})]})]})},Za=[{question:"How do I play the grammar games?",answer:"Select a grammar topic from the home screen, and you'll be taken to a brief tutorial. After watching the tutorial, you can start playing the game. Each game presents different types of exercises: multiple choice questions, fill-in-the-blank, or drag-and-drop activities."},{question:"Can I skip the tutorial?",answer:`Yes, you can skip the tutorial by clicking the "Skip Tutorial" button. You can also replay the tutorial at any time. Each tutorial is customized to show you exactly how that topic's questions work.`},{question:"How do drag-and-drop questions work?",answer:"In drag-and-drop exercises, you'll see sentences with blank spaces and a list of available words. Simply drag the correct words into the blanks. You can also use keyboard shortcuts: Ctrl+1/2/3 to select words, then 1/2 to place them in spaces, Shift+1/2 to select words from spaces, and Escape to cancel selections."},{question:"What keyboard shortcuts are available?",answer:"For drag-and-drop questions: Ctrl+1/2/3 selects words from the list, 1/2 places selected words in spaces, Shift+1/2 selects words already in spaces, Escape cancels current selection, and Delete removes words from selected spaces. Use arrow keys â†/â†’ to navigate between questions."},{question:"How do the hints work?",answer:`If you're stuck on a question, you can click the "Show Hint" button to get a clue. Hints will also appear automatically after two incorrect attempts.`},{question:"How is my score calculated?",answer:"Your score is calculated based on the number of correct answers. At the end of each game, you'll see your total score and success rate."},{question:"How do I change the sound settings?",answer:"You can change sound settings by clicking the Settings button on the home screen or by using the sound icon in the game screen."},{question:"Will my progress be saved?",answer:"Yes, your progress is saved automatically. You can see your completion percentage for each topic on the home screen."}],ei=()=>{const t=de(),[s,o]=l.useState(null),[r,i]=l.useState(""),[a,n]=l.useState(!1),[d,c]=l.useState("idle"),[b,m]=l.useState(""),[w,y]=l.useState("other"),[j,C]=l.useState(""),_=S=>{o(s===S?null:S)},M=async S=>{if(S.preventDefault(),!r.trim()){c("error"),m("Please write a message before sending.");return}n(!0),c("idle"),m("");try{const g=await bo.submitMessage({message:r.trim(),category:w,userEmail:j.trim()||void 0});if(g.success)c("success"),m("Message sent successfully! Our support team will get back to you soon."),i(""),C(""),y("other"),setTimeout(()=>{c("idle"),m("")},4e3);else throw new Error(g.message||"Error sending message")}catch(g){console.error("Error submitting support message:",g),c("error"),m(g.message||"An error occurred while sending your message. Please try again."),setTimeout(()=>{c("idle"),m("")},4e3)}finally{n(!1)}};return e.jsxs("div",{className:"max-w-3xl mx-auto py-8 animate-fade-in",children:[b&&e.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg border max-w-md transition-all duration-300 ${d==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[d==="success"?e.jsx(Qt,{className:"h-5 w-5 flex-shrink-0 mt-0.5 text-green-600"}):e.jsx(Ys,{className:"h-5 w-5 flex-shrink-0 mt-0.5 text-red-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:d==="success"?"Success!":"Error"}),e.jsx("p",{className:"text-sm mt-1",children:b})]}),e.jsx("button",{onClick:()=>{c("idle"),m("")},className:"text-gray-400 hover:text-gray-600 flex-shrink-0 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",tabIndex:0,"aria-label":"Close notification",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"bg-[rgb(var(--color-background-card))] rounded-xl shadow-md p-6",children:[e.jsx("header",{className:"mb-8",children:e.jsx("h1",{className:"text-3xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:"Help & Support"})}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":2,children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:Za.map((S,g)=>e.jsxs(ge,{className:"overflow-hidden",children:[e.jsxs("button",{className:"w-full text-left p-4 flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:()=>_(g),tabIndex:0,"aria-label":`${S.question} - ${s===g?"Collapse":"Expand"} answer`,"aria-expanded":s===g,children:[e.jsx("h3",{className:"text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:S.question}),s===g?e.jsx(eo,{className:"h-5 w-5 text-gray-500","aria-hidden":"true"}):e.jsx(Zs,{className:"h-5 w-5 text-gray-500","aria-hidden":"true"})]}),s===g&&e.jsx(me,{className:"border-t border-gray-100 bg-gray-50",children:e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text","aria-label":`Answer: ${S.answer}`,children:S.answer})})]},g))})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":2,children:"Game Navigation"}),e.jsx(ge,{children:e.jsx(me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Home Screen"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"The home screen displays all available grammar topics. Click on a topic card to start learning."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Tutorial Screen"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Each topic has a tutorial that explains the game mechanics and provides examples. You can skip or replay the tutorial."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Game Screen"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"The game screen presents different types of grammar exercises:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("strong",{children:"Multiple Choice:"})," Select the correct answer from the given options"]}),e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("strong",{children:"Fill in the Blank:"})," Type complete sentences using proper grammar"]}),e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("strong",{children:"Drag and Drop:"})," Drag words from the available options into the correct blank spaces"]})]}),e.jsx("p",{className:"mt-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Use the hint button if you need help, and navigate between questions using the arrow keys or the question navigator."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Results Screen"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"After completing all questions, you'll see your score and performance summary. You can retry the game or return to the home screen."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Settings Screen"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Customize your experience by adjusting audio and visual settings. Changes are saved automatically."})]})]})})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":2,children:"Accessibility Features"}),e.jsx(ge,{children:e.jsx(me,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Keyboard Navigation"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"The game is fully accessible via keyboard:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"â†/â†’"})," Navigate between questions"]}),e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"Tab"})," Move through interactive elements"]}),e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"Enter/Space"})," Activate buttons and select options"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Drag-and-Drop Keyboard Shortcuts"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"For users who prefer keyboard over mouse:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1",children:[e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"Ctrl+1/2/3"})," Select word from available options"]}),e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"1/2"})," Place selected word in space 1 or 2"]}),e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"Shift+1/2"})," Select word from existing space"]}),e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"Escape"})," Cancel current selection"]}),e.jsxs("li",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"listitem",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded text-sm",children:"Delete"})," Remove word from selected space"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Screen Reader Support"}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"All interactive elements include proper ARIA labels and live regions to announce changes to screen readers."})]})]})})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":2,children:"Contact Support"}),e.jsxs(ge,{children:[e.jsxs(Zt,{children:[e.jsx("h3",{className:"text-lg font-bold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Need more help?"}),e.jsx("p",{className:"text-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Send us a message and we'll get back to you."})]}),e.jsx(me,{children:e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-2",children:"Inquiry Type"}),e.jsxs("select",{id:"category",value:w,onChange:S=>y(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"technical",children:"Technical Issue"}),e.jsx("option",{value:"content",children:"Game Content"}),e.jsx("option",{value:"account",children:"User Account"}),e.jsx("option",{value:"feedback",children:"Suggestions/Feedback"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"userEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email (Optional)"}),e.jsx("input",{type:"email",id:"userEmail",value:j,onChange:S=>C(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"your-email@example.com"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"text",children:"If you provide your email, we can respond to you directly"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Message *"}),e.jsx("textarea",{id:"message",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:r,onChange:S=>i(S.target.value),placeholder:"Describe your inquiry or issue in as much detail as possible...",required:!0,maxLength:2e3,disabled:a}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"text","aria-label":`Character count: ${r.length} out of 2000 characters`,children:[r.length,"/2000 characters"]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Q,{type:"submit",variant:"custom",disabled:!r.trim()||a,className:`h-[40px] w-[150px] border-2 rounded-lg transition-all font-medium flex items-center justify-center ${a?"bg-gray-400 border-gray-500 cursor-not-allowed text-gray-200":"bg-blue-600 hover:bg-blue-700 border-blue-600 hover:border-blue-700 text-white shadow-sm hover:shadow-md"} focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2`,tabIndex:0,"aria-label":"Enviar mensaje de soporte",children:a?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-200","aria-hidden":"true"}),"Sending..."]}):"Send Message"})})]})})]})]}),e.jsx("div",{className:"mt-8 flex justify-start",children:e.jsx(Q,{variant:"custom",icon:e.jsx(ot,{className:"text-white"}),onClick:()=>t("/"),className:"h-[40px] w-[225px] bg-blue-500 hover:bg-blue-600 text-white border-2 border-black",tabIndex:0,"aria-label":"Back to topics page",children:"Back to topics"})})]})]})},ws="/assets/bgLogin-WAnyevpL.png",ti=()=>{const t=de(),s=Be(),{login:o,isAuthenticated:r,isLoading:i}=fe(),[a,n]=l.useState(!1),[d,c]=l.useState(!1),[b,m]=l.useState(!1);l.useEffect(()=>{if(r&&!i&&!a&&!b){const U=s.state?.from||"/topics";t(U,{replace:!0})}},[r,i,t,s,a,b]);const[w,y]=l.useState(!1),[j,C]=l.useState(1),[_,M]=l.useState(!1),[S,g]=l.useState(""),[v,x]=l.useState(""),[I,O]=l.useState(""),[N,P]=l.useState(""),[u,h]=l.useState(""),[k,E]=l.useState(!1),[T,z]=l.useState(!1),D=async U=>{U.preventDefault(),n(!0),m(!0);const G=new FormData(U.currentTarget),oe=G.get("email"),se=G.get("password");try{const re=await o(oe,se);re.success?($.success("Login successful",{position:"top-center",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout(()=>{const ve=s.state?.from||"/topics";t(ve,{replace:!0})},1600)):($.error(re.message||"Login error"),m(!1))}catch(re){console.error("Login error:",re),$.error("Unexpected login error"),m(!1)}finally{n(!1)}},K=()=>{y(!1),C(1),g(""),x(""),O(""),P(""),h(""),E(!1),z(!1),M(!1)},Z=async U=>{U.preventDefault(),M(!0);try{const G=await be.forgotPassword(S);if(G.securityQuestion)x(G.securityQuestion),C(2);else throw new Error("Security question could not be obtained");$.success("Email verified. Answer your security question.")}catch(G){console.error("Error getting security question:",G),$.error(Oe(G))}finally{M(!1)}},J=async U=>{U.preventDefault(),M(!0);try{if(!I.trim()){$.error("Please enter your security answer."),M(!1);return}const G=await be.verifySecurityAnswer({email:S,securityAnswer:I.trim()});if(G.success)C(3),$.success("Security answer verified. You can now reset your password.");else throw new Error(G.message||"Invalid security answer")}catch(G){console.error("Error verifying security answer:",G),$.error(Oe(G))}finally{M(!1)}},X=async U=>{if(U.preventDefault(),N!==u){$.error("Passwords don't match");return}if(N.length<6){$.error("Password must be at least 6 characters");return}M(!0);try{await be.resetPassword({email:S,newPassword:N,confirmPassword:u}),$.success("Password changed successfully! You can now login."),K()}catch(G){console.error("Error resetting password:",G),$.error(Oe(G))}finally{M(!1)}};return e.jsxs("div",{className:"min-h-screen flex relative",children:[e.jsx(ys,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs(ue,{to:"/",className:"flex items-center text-sm font-medium text-[#007AA2] hover:text-[#005f7a] transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2",tabIndex:0,"aria-label":"Back to home page",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]})}),e.jsx("div",{className:"hidden lg:flex lg:w-1/2 relative",children:e.jsx("img",{src:ws,alt:"Students studying English grammar in a modern classroom environment with interactive learning materials",className:"absolute inset-0 w-full h-full object-cover",tabIndex:0,role:"img","aria-label":"Background image showing students learning English grammar"})}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-left w-full mb-8",children:[e.jsx("img",{src:Ze,alt:"Grammar Master Pro Logo",className:"h-36 w-auto mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"img","aria-label":"Logo de Grammar Master Pro"}),e.jsx("h1",{className:"text-4xl font-bold text-[#007AA2E8] mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:"Login"}),e.jsx("p",{className:"text-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":"Welcome message: Welcome back! Please login to your account",children:"Welcome back! Please login to your account."})]}),e.jsxs("form",{className:"space-y-6",onSubmit:D,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-extrabold text-gray-700 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your email",tabIndex:0,"aria-label":"Email input field"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsx("label",{htmlFor:"password",className:"block text-sm font-extrabold text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Password"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:d?"text":"password",autoComplete:"current-password",required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your password",tabIndex:0,"aria-label":"Password input field"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",onClick:()=>c(!d),tabIndex:0,"aria-label":d?"Hide password":"Show password",children:d?e.jsx("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-gray-600 hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2",tabIndex:0,"aria-label":"Forgot your password? Open recovery modal",children:"Forgot password?"})}),e.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#000DFF] hover:bg-[#0000cc] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",tabIndex:0,"aria-label":"Sign in to Grammar Master Pro",children:a?"Logging in...":"Login"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"button",className:"w-full flex items-center justify-center gap-3 py-3 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",tabIndex:0,"aria-label":"Registrarse con Google",children:[e.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),e.jsx("span",{children:"Sign up with Google"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:["Don't have an account?"," ",e.jsx(ue,{to:"/signup",className:"font-medium text-[#007AA2] hover:text-[#005f7a] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-1",tabIndex:0,"aria-label":"Crear una nueva cuenta en Grammar Master Pro",children:"Sign up"})]})})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6 relative",children:[e.jsx("button",{onClick:K,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",tabIndex:0,"aria-label":"Close password recovery modal",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"mb-6 mt-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${j>=1?"bg-[#000DFF] text-white":"bg-gray-200 text-gray-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`,tabIndex:0,role:"text","aria-label":`Step 1: Email ${j>=1?"completed":"pending"}`,children:"1"}),e.jsx("span",{className:`ml-2 text-xs font-medium ${j===1?"text-[#000DFF]":"text-gray-500"}`,children:"Email"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${j>=2?"bg-[#000DFF] text-white":"bg-gray-200 text-gray-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`,tabIndex:0,role:"text","aria-label":`Step 2: Security ${j>=2?"completed":"pending"}`,children:"2"}),e.jsx("span",{className:`ml-2 text-xs font-medium ${j===2?"text-[#000DFF]":"text-gray-500"}`,children:"Security"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${j>=3?"bg-[#000DFF] text-white":"bg-gray-200 text-gray-500"} focus:outline-none focus:ring-2 focus:ring-blue-500`,tabIndex:0,role:"text","aria-label":`Step 3: Password ${j>=3?"completed":"pending"}`,children:"3"}),e.jsx("span",{className:`ml-2 text-xs font-medium ${j===3?"text-[#000DFF]":"text-gray-500"}`,children:"Password"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gray-200 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 h-2 bg-[#000DFF] rounded-full transition-all duration-300 ease-in-out",style:{width:`${(j-1)/2*100}%`},role:"progressbar","aria-valuenow":j,"aria-valuemin":1,"aria-valuemax":3,"aria-label":`Recovery process progress: step ${j} of 3`})]})]}),j===1&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":3,children:"Forgot Password"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":"Instructions: Enter your email address and we'll help you reset your password",children:"Enter your email address and we'll help you reset your password."}),e.jsxs("form",{onSubmit:Z,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"forgotEmail",className:"block text-sm font-extrabold text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{id:"forgotEmail",type:"email",value:S,onChange:U=>g(U.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your email",tabIndex:0,"aria-label":"Recovery email input field"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:K,className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",tabIndex:0,"aria-label":"Cancel password recovery process",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:_,className:"flex-1 py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-[#000DFF] hover:bg-[#0000cc] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50",tabIndex:0,"aria-label":"Continue with password recovery process",children:_?"Loading...":"Continue"})]})]})]}),j===2&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":3,children:"Security Question"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":"Instructions: Please answer your security question to verify your identity",children:"Please answer your security question to verify your identity."}),e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-extrabold text-gray-700 mb-1",children:"Security Question"}),e.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"text","aria-label":`Security question: ${v}`,children:v})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"securityAnswer",className:"block text-sm font-extrabold text-gray-700 mb-1",children:"Your Answer"}),e.jsx("input",{id:"securityAnswer",type:"text",value:I,onChange:U=>O(U.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your answer",tabIndex:0,"aria-label":"Security answer input field"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>C(1),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",tabIndex:0,"aria-label":"Back to previous step",children:"Back"}),e.jsx("button",{type:"submit",disabled:_,className:"flex-1 py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-[#000DFF] hover:bg-[#0000cc] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50",tabIndex:0,"aria-label":"Verify security answer",children:_?"Verifying...":"Continue"})]})]})]}),j===3&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":3,children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":"Instructions: Create a new password for your account",children:"Create a new password for your account."}),e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-extrabold text-gray-700 mb-1",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"newPassword",type:k?"text":"password",value:N,onChange:U=>P(U.target.value),required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter new password",tabIndex:0,"aria-label":"New password input field"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",onClick:()=>E(!k),tabIndex:0,"aria-label":k?"Hide new password":"Show new password",children:k?e.jsx("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"confirmNewPassword",className:"block text-sm font-extrabold text-gray-700 mb-1",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmNewPassword",type:T?"text":"password",value:u,onChange:U=>h(U.target.value),required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Confirm new password",tabIndex:0,"aria-label":"New password confirmation input field"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",onClick:()=>z(!T),tabIndex:0,"aria-label":T?"Hide password confirmation":"Show password confirmation",children:T?e.jsx("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>C(2),className:"flex-1 py-3 px-4 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",tabIndex:0,"aria-label":"Back to previous step",children:"Back"}),e.jsx("button",{type:"submit",disabled:_,className:"flex-1 py-3 px-4 border border-transparent rounded-lg text-sm font-medium text-white bg-[#000DFF] hover:bg-[#0000cc] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-50",tabIndex:0,"aria-label":"Reset password",children:_?"Resetting...":"Reset Password"})]})]})]})]})})]})},si=()=>{const t=de(),{register:s,isAuthenticated:o,isLoading:r}=fe(),[i,a]=l.useState(!1),[n,d]=l.useState(!1),[c,b]=l.useState(!1);l.useEffect(()=>{o&&!r&&t("/topics",{replace:!0})},[o,r,t]);const m=async w=>{w.preventDefault(),a(!0);const y=new FormData(w.currentTarget),j=y.get("firstName"),C=y.get("lastName"),_=y.get("email"),M=y.get("password"),S=y.get("confirmPassword"),g=y.get("securityQuestion"),v=y.get("securityAnswer");if(M!==S){$.error("Passwords do not match"),a(!1);return}if(!g){$.error("Please select a security question"),a(!1);return}try{const x=await s({firstName:j,lastName:C,email:_,password:M,confirmPassword:S,securityQuestion:g,securityAnswer:v});x.success?($.success("Â¡Account successfully created! Now you can log in.",{position:"top-center",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),setTimeout(()=>{t("/login",{replace:!0})},2600)):$.error(x.message||"Error in registration")}catch(x){console.error("Error in registration:",x),$.error("Unexpected error in registration")}finally{a(!1)}};return e.jsxs("div",{className:"min-h-screen flex relative",children:[e.jsx(ys,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs(ue,{to:"/",className:"flex items-center text-sm font-medium text-[#007AA2] hover:text-[#005f7a] transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2",tabIndex:0,"aria-label":"Back to home page",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]})}),e.jsx("div",{className:"hidden lg:flex lg:w-1/2 relative",children:e.jsx("img",{src:ws,alt:"Students studying English grammar in a modern classroom environment with interactive learning materials",className:"absolute inset-0 w-full h-full object-cover",tabIndex:0,role:"img","aria-label":"Background image showing students learning English grammar"})}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-left w-full mb-8",children:[e.jsx("img",{src:Ze,alt:"Grammar Master Pro - English Learning Platform Logo",className:"h-36 w-auto mb-6 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded",tabIndex:0,role:"img","aria-label":"Grammar Master Pro logo"}),e.jsx("h1",{className:"text-4xl font-bold text-[#007AA2E8] mb-2 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:"Sign Up"}),e.jsx("p",{className:"text-gray-600 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text","aria-label":"Welcome message: Create your account to get started",children:"Create your account to get started"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:m,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-extrabold text-gray-700 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"First Name"}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your first name",tabIndex:0,"aria-label":"First name input field"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-extrabold text-gray-700 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Last Name"}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your last name",tabIndex:0,"aria-label":"Last name input field"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-extrabold text-gray-700 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your email",tabIndex:0,"aria-label":"Email input field"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-extrabold text-gray-700 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"new-password",required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Create a password",tabIndex:0,"aria-label":"Password input field"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",onClick:()=>d(!n),tabIndex:0,"aria-label":n?"Hide password":"Show password",children:n?e.jsx("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-extrabold text-gray-700 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:c?"text":"password",autoComplete:"new-password",required:!0,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Confirm your password",tabIndex:0,"aria-label":"Confirm password input field"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",onClick:()=>b(!c),tabIndex:0,"aria-label":c?"Hide password confirmation":"Show password confirmation",children:c?e.jsx("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"securityQuestion",className:"block text-sm font-extrabold text-gray-700 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Security Question"}),e.jsxs("select",{id:"securityQuestion",name:"securityQuestion",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",tabIndex:0,"aria-label":"Select security question",children:[e.jsx("option",{value:"",children:"Select a security question"}),e.jsx("option",{value:"What is the name of your first pet?",children:"What is the name of your first pet?"}),e.jsx("option",{value:"What is your mother's maiden name?",children:"What is your mother's maiden name?"}),e.jsx("option",{value:"What is your favorite book?",children:"What is your favorite book?"}),e.jsx("option",{value:"What city were you born in?",children:"What city were you born in?"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"securityAnswer",className:"block text-sm font-extrabold text-gray-700 mb-1 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Security Answer"}),e.jsx("input",{id:"securityAnswer",name:"securityAnswer",type:"text",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",placeholder:"Enter your answer",tabIndex:0,"aria-label":"Security answer input field"})]}),e.jsx("button",{type:"submit",className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#000DFF] hover:bg-[#0000cc] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",tabIndex:0,"aria-label":"Create account in Grammar Master Pro",children:i?"Creating Account...":"Create Account"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{type:"button",className:"w-full flex items-center justify-center gap-3 py-3 px-4 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",tabIndex:0,"aria-label":"Sign up with Google",children:[e.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})}),e.jsx("span",{children:"Sign up with Google"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:["Already have an account?"," ",e.jsx(ue,{to:"/login",className:"font-medium text-[#007AA2] hover:text-[#005f7a] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-1",tabIndex:0,"aria-label":"Sign in to Grammar Master Pro",children:"Login"})]})})]})})]})},Ke="/assets/perfil-CXSVvkUX.jpg",oi="/assets/trofeo-Ck-m1ofz.png",ni="/assets/estrella-BuQvW_pG.png",zt="/assets/medalla-DvtLaWly.jpeg",ri=()=>{const{user:t,logout:s,refreshUser:o}=fe(),r=de(),{isLevelCompleted:i,levels:a}=wt(),[n,d]=l.useState({totalPoints:0,completedLessons:0,totalLessons:0,completedTopics:0,totalTopics:0,overallProgress:0,easyMedal:!1,mediumMedal:!1,hardMedal:!1,completedTopicsByDifficulty:{easy:[],medium:[],hard:[]},totalAttempts:0,averageScore:0,bestScore:0,totalTimeSpent:0,totalHintsUsed:0,streakData:{currentStreak:0,longestStreak:0,lastPlayedAt:null},achievements:[],levelInfo:{currentLevel:1,pointsToNextLevel:100,levelProgress:0}}),[c,b]=l.useState(!0),[m,w]=l.useState(Ke),[y,j]=l.useState(!1),C=l.useRef(null);l.useEffect(()=>{t&&_()},[t,a]);const _=async()=>{try{b(!0);const[u,h]=await Promise.all([Ee.getProgress(),Ee.getStats()]);console.log("Progress Response:",u),console.log("Stats Response:",h);let k=0,E=0;const T={easy:[],medium:[],hard:[]},z=10,D=ce.length*3;let K=0;const Z=ce.length;ce.forEach(V=>{let He=!1;["easy","medium","hard"].forEach(it=>{const pe=it;i(V.id,pe)&&(k++,E+=z,T[pe].push(V.title),He||(He=!0,K++))})});const J=Z>0?Math.round(K/Z*100):0,X={easy:ce.filter(V=>V.difficulty==="easy"),medium:ce.filter(V=>V.difficulty==="medium"),hard:ce.filter(V=>V.difficulty==="hard")},U=X.easy.length>0&&X.easy.every(V=>i(V.id,"easy")),G=X.medium.length>0&&X.medium.every(V=>i(V.id,"medium")),oe=X.hard.length>0&&X.hard.every(V=>i(V.id,"hard")),se=h?.data?.attemptStats||{},re=h?.data?.progressSummary||{},ve=M(E),Ue=S({completedLessons:k,totalPoints:E,averageScore:se.avgScore||0,bestScore:se.bestScore||0,totalAttempts:se.totalAttempts||0,totalTimeSpent:se.totalTimeSpent||0,totalHintsUsed:se.totalHintsUsed||0,easyMedal:U,mediumMedal:G,hardMedal:oe,overallProgress:J}),he=g(re.lastPlayedAt);d({totalPoints:E,completedLessons:k,totalLessons:D,completedTopics:K,totalTopics:Z,overallProgress:J,easyMedal:U,mediumMedal:G,hardMedal:oe,completedTopicsByDifficulty:T,totalAttempts:se.totalAttempts||0,averageScore:Math.round(se.avgScore||0),bestScore:Math.round(se.bestScore||0),totalTimeSpent:se.totalTimeSpent||0,totalHintsUsed:se.totalHintsUsed||0,streakData:he,achievements:Ue,levelInfo:ve})}catch(u){console.error("Error calculating user stats:",u),d(h=>({...h,totalAttempts:0,averageScore:0,bestScore:0,totalTimeSpent:0,totalHintsUsed:0,achievements:[]}))}finally{b(!1)}},M=u=>{const k=Math.floor(u/100)+1,E=u%100,T=100-E,z=E/100*100;return{currentLevel:k,pointsToNextLevel:T,levelProgress:Math.round(z)}},S=u=>[{id:"first_steps",name:"First Steps",description:"Complete your first lesson",icon:"ðŸŽ¯",earned:u.completedLessons>=1,category:"completion"},{id:"getting_started",name:"Getting Started",description:"Complete 5 lessons",icon:"ðŸš€",earned:u.completedLessons>=5,category:"completion"},{id:"grammar_explorer",name:"Grammar Explorer",description:"Complete 10 lessons",icon:"ðŸ—ºï¸",earned:u.completedLessons>=10,category:"completion"},{id:"dedicated_learner",name:"Dedicated Learner",description:"Complete 15 lessons",icon:"ðŸ“š",earned:u.completedLessons>=15,category:"completion"},{id:"perfectionist",name:"Perfectionist",description:"Achieve 100% on any lesson",icon:"â­",earned:u.bestScore>=100,category:"performance"},{id:"high_achiever",name:"High Achiever",description:"Maintain 85% average score",icon:"ðŸ†",earned:u.averageScore>=85,category:"performance"},{id:"scholar",name:"Scholar",description:"Maintain 90% average score",icon:"ðŸŽ“",earned:u.averageScore>=90,category:"performance"},{id:"easy_master",name:"Easy Master",description:"Complete all Easy topics",icon:"ðŸ¥‰",earned:u.easyMedal,category:"completion"},{id:"medium_master",name:"Medium Master",description:"Complete all Medium topics",icon:"ðŸ¥ˆ",earned:u.mediumMedal,category:"completion"},{id:"hard_master",name:"Hard Master",description:"Complete all Hard topics",icon:"ðŸ¥‡",earned:u.hardMedal,category:"completion"},{id:"persistent",name:"Persistent",description:"Make 10 attempts",icon:"ðŸ’ª",earned:u.totalAttempts>=10,category:"consistency"},{id:"determined",name:"Determined",description:"Make 25 attempts",icon:"ðŸ”¥",earned:u.totalAttempts>=25,category:"consistency"},{id:"help_seeker",name:"Help Seeker",description:"Use hints wisely (5+ hints used)",icon:"ðŸ’¡",earned:u.totalHintsUsed>=5,category:"exploration"},{id:"course_complete",name:"Course Complete",description:"Complete 100% of the course",icon:"ðŸŽ‰",earned:u.overallProgress>=100,category:"completion"}],g=u=>{if(!u)return{currentStreak:0,longestStreak:0,lastPlayedAt:null};const h=new Date,k=new Date(u),T=Math.floor((h.getTime()-k.getTime())/(1e3*60*60*24))<=1?1:0;return{currentStreak:T,longestStreak:Math.max(T,1),lastPlayedAt:u}},v=()=>{if(!t?.createdAt)return"Unknown";const u=new Date(t.createdAt),k=Math.abs(new Date().getTime()-u.getTime()),E=Math.ceil(k/(1e3*60*60*24));if(E<30)return`${E} days`;if(E<365){const T=Math.floor(E/30);return`${T} ${T===1?"month":"months"}`}else{const T=Math.floor(E/365);return`${T} ${T===1?"year":"years"}`}},x=()=>{s(),r("/")},I=u=>{if(u<60)return`${u}s`;if(u<3600)return`${Math.floor(u/60)}m ${u%60}s`;const h=Math.floor(u/3600),k=Math.floor(u%3600/60);return`${h}h ${k}m`},O=async u=>{const h=u.target.files?.[0];if(h){if(!h.type.startsWith("image/")){alert("Please select a valid image file.");return}if(h.size>5*1024*1024){alert("Image is too large. Maximum 5MB.");return}try{j(!0);const k=new FileReader;k.onload=async E=>{try{const T=E.target?.result,z=await be.updateProfileImage(T);if(z.success)w(T),await o(),console.log("âœ… Profile image updated successfully");else throw new Error(z.message||"Error updating profile image")}catch(T){console.error("âŒ Error uploading image:",T),alert("Error uploading image. Please try again.")}finally{j(!1)}},k.readAsDataURL(h)}catch(k){console.error("âŒ Error processing image:",k),alert("Error processing image."),j(!1)}}},N=()=>{y||C.current?.click()},P=async()=>{if(!y)try{j(!0);const u=await be.deleteProfileImage();if(u.success)w(Ke),await o(),console.log("âœ… Profile image deleted successfully");else throw new Error(u.message||"Error deleting profile image")}catch(u){console.error("âŒ Error deleting image:",u),alert("Error deleting image.")}finally{j(!1)}};return l.useEffect(()=>{t?.profileImage?w(t.profileImage):w(Ke)},[t]),t?e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("div",{className:"text-center py-6 px-4",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900 uppercase tracking-wider focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"heading","aria-level":1,children:"Profile"})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center space-y-4 md:space-y-0 md:space-x-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-2 border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"img","aria-label":`Profile picture of ${t.first_name} ${t.last_name}`,children:e.jsx("img",{src:m,alt:`${t.first_name} ${t.last_name}'s profile picture`,className:"w-full h-full object-cover object-top",style:{objectPosition:"top"}})}),e.jsxs("button",{onClick:N,disabled:y,className:`mt-3 flex items-center space-x-1 px-3 py-2 rounded-full transition-colors text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${y?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,"aria-label":"Edit profile picture",tabIndex:0,children:[e.jsx(ao,{className:"w-4 h-4","aria-hidden":"true"}),e.jsx("span",{children:y?"Uploading...":"Edit Photo"})]}),m!==Ke&&e.jsx("button",{onClick:P,disabled:y,className:`mt-2 flex items-center space-x-1 px-3 py-1 rounded-full transition-colors text-xs font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${y?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-red-100 text-red-700 hover:bg-red-200"}`,"aria-label":"Delete profile picture",tabIndex:0,children:e.jsx("span",{children:"Reset to Default"})}),e.jsx("input",{ref:C,type:"file",accept:"image/*",onChange:O,className:"hidden","aria-label":"Upload new profile picture"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between w-full items-start gap-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":2,children:t.first_name}),e.jsx("h3",{className:"text-2xl font-semibold text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:t.last_name})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 h-6 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"text",children:"English Level: B1 Intermediate"}),e.jsxs("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 h-6 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"text",children:["Member since ",v()]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Lessons completed statistics",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg mr-4",children:e.jsx("img",{src:oi,alt:"Lessons",className:"w-8 h-8","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Lessons Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:c?"...":n.completedLessons}),e.jsxs("p",{className:"text-xs text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:["Level ",n.levelInfo.currentLevel]})]}),e.jsx(Je,{className:"ml-auto text-gray-400","aria-hidden":"true"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Total points statistics",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg mr-4",children:e.jsx("img",{src:ni,alt:"Points",className:"w-8 h-8","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Total Points"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:c?"...":n.totalPoints}),e.jsxs("p",{className:"text-xs text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:[n.levelInfo.pointsToNextLevel," to next level"]})]}),e.jsx(Je,{className:"ml-auto text-gray-400","aria-hidden":"true"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 flex items-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Achievements statistics",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg mr-4",children:e.jsx("img",{src:zt,alt:"Achievements",className:"w-8 h-8 rounded-full","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Achievements"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:c?"...":n.achievements.filter(u=>u.earned).length}),e.jsxs("p",{className:"text-xs text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:["of ",n.achievements.length," earned"]})]}),e.jsx(Je,{className:"ml-auto text-gray-400","aria-hidden":"true"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Average score statistics",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:[c?"...":n.averageScore,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Average Score"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Best score statistics",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:[c?"...":n.bestScore,"%"]}),e.jsx("div",{className:"text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Best Score"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Total attempts statistics",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:c?"...":n.totalAttempts}),e.jsx("div",{className:"text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Total Attempts"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Time spent statistics",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:c?"...":I(n.totalTimeSpent)}),e.jsx("div",{className:"text-sm text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Time Spent"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Overall Progress"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"progressbar","aria-valuenow":n.overallProgress,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Overall progress: ${n.overallProgress} percent complete`,children:e.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-300",style:{width:`${n.overallProgress}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-sm text-gray-500",children:[e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:c?"Loading...":`${n.completedTopics} of ${n.totalTopics} topics completed`}),e.jsx("p",{className:"focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:c?"":`${n.overallProgress}% Complete`})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Level Progress"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":"Level progress information",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-2xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":4,children:["Level ",n.levelInfo.currentLevel]}),e.jsx("p",{className:"text-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:"Grammar Master"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:[n.totalPoints," points"]}),e.jsxs("p",{className:"text-blue-100 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:[n.levelInfo.pointsToNextLevel," to next level"]})]})]}),e.jsx("div",{className:"w-full bg-blue-300 bg-opacity-30 rounded-full h-3 focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"progressbar","aria-valuenow":n.levelInfo.levelProgress,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Level progress: ${n.levelInfo.levelProgress} percent complete`,children:e.jsx("div",{className:"bg-white h-3 rounded-full transition-all duration-500",style:{width:`${n.levelInfo.levelProgress}%`}})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Achievements"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.achievements.map((u,h)=>e.jsx("div",{className:`p-4 rounded-lg border-2 transition-all focus:outline-none focus:ring-2 focus:ring-blue-500 ${u.earned?"bg-yellow-50 border-yellow-200 shadow-md":"bg-gray-50 border-gray-200 opacity-60"}`,title:u.description,tabIndex:0,role:"button","aria-pressed":u.earned,"aria-label":`Achievement ${h+1} of ${n.achievements.length}: ${u.name} - ${u.description}. ${u.earned?"Earned and unlocked":"Not earned yet, locked"}`,onKeyDown:k=>{if(k.key==="Enter"||k.key===" "){k.preventDefault();const E=`${u.name}: ${u.description}. ${u.earned?"Earned and unlocked":"Not earned yet, locked"}`,T=document.createElement("div");T.setAttribute("aria-live","polite"),T.className="sr-only",T.textContent=E,document.body.appendChild(T),setTimeout(()=>{document.body.removeChild(T)},1e3)}},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl mb-2 ${u.earned?"":"grayscale"}`,children:u.icon}),e.jsx("h4",{className:`font-semibold text-sm mb-1 ${u.earned?"text-gray-900":"text-gray-500"} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1`,tabIndex:-1,role:"heading","aria-level":4,children:u.name}),e.jsx("p",{className:`text-xs ${u.earned?"text-gray-600":"text-gray-400"} focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1`,tabIndex:-1,role:"text",children:u.description}),u.earned&&e.jsx("div",{className:"mt-2 px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:-1,role:"text","aria-label":"Earned status",children:"Earned"}),!u.earned&&e.jsx("div",{className:"mt-2 px-2 py-1 bg-gray-100 text-gray-500 rounded-full text-xs font-medium focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:-1,role:"text","aria-label":"Locked status",children:"Locked"})]})},u.id))})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"heading","aria-level":3,children:"Difficulty Medals"}),e.jsx("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:[{name:"Easy Topics",earned:n.easyMedal},{name:"Medium Topics",earned:n.mediumMedal},{name:"Hard Topics",earned:n.hardMedal}].map((u,h)=>e.jsxs("div",{className:"flex flex-col items-center focus:outline-none focus:ring-2 focus:ring-blue-500",tabIndex:0,role:"region","aria-label":`${u.name} medal: ${u.earned?"Earned":"Not earned yet"}`,children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-2 ${u.earned?"bg-yellow-100":"bg-gray-100"}`,children:e.jsx("img",{src:zt,alt:`Medal ${h+1}`,className:`w-10 h-10 object-cover rounded-full ${u.earned?"opacity-100":"opacity-30 grayscale"}`,"aria-hidden":"true"})}),e.jsx("span",{className:"text-xs text-center text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1",tabIndex:0,role:"text",children:u.name})]},h))})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsx("button",{onClick:x,className:"px-6 py-2 bg-blue-600 text-white font-medium rounded-full hover:bg-blue-700 transition-colors shadow-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",tabIndex:0,"aria-label":"Logout from application",children:"Logout"})})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-2",tabIndex:0,role:"text",children:"No user data available"}),e.jsx("button",{onClick:()=>r("/login"),className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",tabIndex:0,"aria-label":"Go to login page",children:"Go to Login"})]})})},Ae=({children:t,redirectTo:s="/"})=>{const{isAuthenticated:o,isLoading:r}=fe(),i=Be();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 focus:outline-none focus:ring-2 focus:ring-white rounded",tabIndex:0,role:"text","aria-label":"Authentication verification in progress",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-white mx-auto mb-4 focus:outline-none focus:ring-2 focus:ring-white rounded",tabIndex:0,role:"img","aria-label":"Loading spinner for authentication"}),e.jsx("p",{className:"text-white text-lg focus:outline-none focus:ring-2 focus:ring-white rounded px-1",tabIndex:0,role:"text",children:"Verificando sesiÃ³n..."})]})}):o?e.jsx(e.Fragment,{children:t}):e.jsx(Rt,{to:s,state:{from:i.pathname},replace:!0})};function ai(){return e.jsx(yo,{children:e.jsx(So,{children:e.jsx(ia,{children:e.jsx(Ya,{children:e.jsx(ra,{children:e.jsx(Io,{children:e.jsx(Mo,{children:e.jsx(zs,{children:e.jsx(No,{children:e.jsxs(Bs,{children:[e.jsx(le,{path:"/",element:e.jsx(ko,{})}),e.jsx(le,{path:"/login",element:e.jsx(ti,{})}),e.jsx(le,{path:"/signup",element:e.jsx(si,{})}),e.jsx(le,{path:"/help",element:e.jsx(ei,{})}),e.jsx(le,{path:"/topics",element:e.jsx(Ae,{children:e.jsx(qo,{})})}),e.jsx(le,{path:"/tutorial/:topicId",element:e.jsx(Ae,{children:e.jsx($o,{})})}),e.jsx(le,{path:"/game/:topicId",element:e.jsx(Ae,{children:e.jsx(Va,{})})}),e.jsx(le,{path:"/results/:topicId",element:e.jsx(Ae,{children:e.jsx(Ja,{})})}),e.jsx(le,{path:"/settings",element:e.jsx(Ae,{children:e.jsx(Xa,{})})}),e.jsx(le,{path:"/profile",element:e.jsx(Ae,{children:e.jsx(ri,{})})}),e.jsx(le,{path:"*",element:e.jsx(Rt,{to:"/",replace:!0})})]})})})})})})})})})})}document.title="Grammar Master Pro - Learn English Grammar";document.documentElement.lang="es";Ht(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(ai,{})}));
